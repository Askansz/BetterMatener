!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ffc52097-0866-4c57-ae97-07985baf8523",e._sentryDebugIdIdentifier="sentry-dbid-ffc52097-0866-4c57-ae97-07985baf8523")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2432],{74705:function(e,t,a){"use strict";a.d(t,{Z:function(){return g},u:function(){return _}});var r=a(24297),n=a(74934),s=a(2560),l=a(57748);let i=e=>l.C1.useListWorkspacesByIDsQuery({ids:e}),o=new r.Mt,d=async(e,t)=>{let a=t.map(e=>e.id);return{taskStatuses:await o.listTaskStatusesByUser({user_id:e,task_ids:a})}};var c=(e,t)=>{let{data:a,isLoading:r}=(0,s.a)({queryKey:["taskStatuses",e,t],queryFn:async()=>d(e,t)});return{data:a,isLoading:r}};let u=new r.Mt,_=(e,t)=>{let{data:a}=(0,s.a)({queryKey:["total-tasks",e],queryFn:async()=>u.listByUserID({user_id:e,without_completed:!1,only_assessed:!1,filter:{filter:null,order_by:[{field:"deadline",order:"asc"}]},limit:0}),enabled:t});return a?.total_count??0},m=async e=>{let{userID:t,withoutCompleted:a,limit:r,startFromCurrentWeeksMonday:n,order:s,filterOnOldTasks:l}=e;if(l){let e=await u.listArchivedTasksForStudent({pagination:{page:0,size:0},filter:{filter:null,order_by:[{field:"deadline",order:s}]}});return{...e,total_count:e.tasks.length}}return u.listByUserID({user_id:t,without_completed:a,only_assessed:!1,filter:{filter:null,order_by:[{field:"deadline",order:s}]},limit:r,start_from_current_weeks_monday:n})},h=(e,t)=>e.map(e=>{if(!t)return e;let a=t.workspaces.find(t=>t.id===e.workspace_id);return{...e,...a&&{workspaceTitle:a.title}}}),p=(e,t)=>e.map(e=>{let a=t.find(t=>t.task_id===e.id);return{...e,...a&&{status:a.status}}});var g=e=>{let{userID:t,withoutCompleted:a,limit:r,startFromCurrentWeeksMonday:l,order:o,filterOnOldTasks:d}=e,{data:u,isPending:_}=(0,s.a)({queryKey:["tasks",t,a,r,l,o,d],queryFn:async()=>m({userID:t,withoutCompleted:a,limit:r,startFromCurrentWeeksMonday:l,order:o,filterOnOldTasks:d})}),{data:g}=c(t,u?.tasks??[]),y=p(u?.tasks??[],g?.taskStatuses.statuses??[]),{data:x}=i(u?.tasks?.map(e=>e.workspace_id).filter(n.Z.isNotNullish)??[]),f=h(y??[],x),b={...u,tasks:f};return{data:b,totalCount:b.total_count??0,isPending:_}}},66303:function(e,t,a){"use strict";var r=a(27573),n=a(45531),s=a.n(n),l=a(23507),i=a.n(l);let o=e=>{let{status:t,orientation:a,className:r,size:n}=e;return s()(i().barIndicator,r,{[i()["barIndicator--horizontal"]]:"horizontal"===a,[i()["barIndicator--vertical"]]:"vertical"===a,[i()["barIndicator--default"]]:"default"===t,[i()["barIndicator--disabled"]]:"disabled"===t,[i()["barIndicator--error"]]:"error"===t,[i()["barIndicator--success"]]:"success"===t,[i()["barIndicator--warning"]]:"warning"===t,[i()["barIndicator--neutral"]]:"neutral"===t,[i()["barIndicator--information"]]:"information"===t,[i()["barIndicator--size-full"]]:"full"===n,[i()["barIndicator--size-16"]]:"16"===n})};t.Z=e=>{let{status:t,orientation:a,className:n,style:s,size:l="16"}=e;return(0,r.jsx)("div",{style:s,className:o({status:t,orientation:a,className:n,size:l})})}},67014:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(7653),n=e=>{let[t,a]=(0,r.useState)(e?.defaultOpen??!1);return{isOpen:t,open:(0,r.useCallback)(()=>{a(!0)},[]),close:(0,r.useCallback)(t=>{(!e?.onAttemptClose||t?.force||e.onAttemptClose())&&(a(!1),e?.afterClose&&setTimeout(e.afterClose,300))},[e])}}},27767:function(e,t,a){"use strict";a.d(t,{Z:function(){return W}});var r=a(27573),n=a(69203),s=a(59245),l=a(7653),i=a(72103),o=a(35725),d=a(45531),c=a.n(d),u=a(65880),_=a(66221);let m=[{name:(0,o.Z)("Kolgr\xe5 ljus"),variableName:"--color-surface-userselect-category1-lightest",hexValue:"#fafafa"},{name:(0,o.Z)("Kolgr\xe5 mellan"),variableName:"--color-surface-userselect-category1-lighter",hexValue:"#f2f2f2"},{name:(0,o.Z)("Kolgr\xe5 intensiv"),variableName:"--color-surface-userselect-category1-light",hexValue:"#e6e6e6"},{name:(0,o.Z)("Kolgr\xe5 djup"),variableName:"--color-surface-userselect-category1-midlight",hexValue:"#d9d9d9"},{name:(0,o.Z)("Persika ljus"),variableName:"--color-surface-userselect-category2-lightest",hexValue:"#fff6e5"},{name:(0,o.Z)("Persika mellan"),variableName:"--color-surface-userselect-category2-lighter",hexValue:"#ffeecc"},{name:(0,o.Z)("Persika intensiv"),variableName:"--color-surface-userselect-category2-light",hexValue:"#ffe5b2"},{name:(0,o.Z)("Persika djup"),variableName:"--color-surface-userselect-category2-midlight",hexValue:"#ffdd99"},{name:(0,o.Z)("Citron ljus"),variableName:"--color-surface-userselect-category3-lightest",hexValue:"#fffce5"},{name:(0,o.Z)("Citron mellan"),variableName:"--color-surface-userselect-category3-lighter",hexValue:"#fffacc"},{name:(0,o.Z)("Citron intensiv"),variableName:"--color-surface-userselect-category3-light",hexValue:"#fff7b2"},{name:(0,o.Z)("Citron djup"),variableName:"--color-surface-userselect-category3-midlight",hexValue:"#ffeb33"},{name:(0,o.Z)("Rosa ljus"),variableName:"--color-surface-userselect-category4-lightest",hexValue:"#ffe5f6"},{name:(0,o.Z)("Rosa mellan"),variableName:"--color-surface-userselect-category4-lighter",hexValue:"#ffccee"},{name:(0,o.Z)("Rosa intensiv"),variableName:"--color-surface-userselect-category4-light",hexValue:"#ffb2e5"},{name:(0,o.Z)("Rosa djup"),variableName:"--color-surface-userselect-category4-midlight",hexValue:"#ff99dd"},{name:(0,o.Z)("Azure ljus"),variableName:"--color-surface-userselect-category5-lightest",hexValue:"#e5f6ff"},{name:(0,o.Z)("Azure mellan"),variableName:"--color-surface-userselect-category5-lighter",hexValue:"#cceeff"},{name:(0,o.Z)("Azure intensiv"),variableName:"--color-surface-userselect-category5-light",hexValue:"#b2e5ff"},{name:(0,o.Z)("Azure djup"),variableName:"--color-surface-userselect-category5-midlight",hexValue:"#99ddff"},{name:(0,o.Z)("Lila ljus"),variableName:"--color-surface-userselect-category6-lightest",hexValue:"#e5e5ff"},{name:(0,o.Z)("Lila mellan"),variableName:"--color-surface-userselect-category6-lighter",hexValue:"#ccccff"},{name:(0,o.Z)("Lila intensiv"),variableName:"--color-surface-userselect-category6-light",hexValue:"#b2b2ff"},{name:(0,o.Z)("Lila djup"),variableName:"--color-surface-userselect-category6-midlight",hexValue:"#9999ff"},{name:(0,o.Z)("Violett ljus"),variableName:"--color-surface-userselect-category7-lightest",hexValue:"#f6e5ff"},{name:(0,o.Z)("Violett mellan"),variableName:"--color-surface-userselect-category7-lighter",hexValue:"#eeccff"},{name:(0,o.Z)("Violett intensiv"),variableName:"--color-surface-userselect-category7-light",hexValue:"#e5b2ff"},{name:(0,o.Z)("Violett djup"),variableName:"--color-surface-userselect-category7-midlight",hexValue:"#dd99ff"},{name:(0,o.Z)("Turkos ljus"),variableName:"--color-surface-userselect-category8-lightest",hexValue:"#e5fff6"},{name:(0,o.Z)("Turkos mellan"),variableName:"--color-surface-userselect-category8-lighter",hexValue:"#ccffee"},{name:(0,o.Z)("Turkos intensiv"),variableName:"--color-surface-userselect-category8-light",hexValue:"#b2ffe5"},{name:(0,o.Z)("Turkos djup"),variableName:"--color-surface-userselect-category8-midlight",hexValue:"#99ffdd"}];var h={src:"/_next/static/media/wheel.ec488c92.svg",height:24,width:24,blurWidth:0,blurHeight:0},p=a(83609),g=a.n(p),y=e=>{let{active:t,selectedColor:a,hoveredColor:n,focusedColor:s,error:l}=e,i=void 0===n&&void 0===s&&void 0!==a||n===a||s===a||!t&&void 0!==a,d=void 0!==a&&void 0===s&&void 0===n?a:t&&void 0!==n?n:t&&void 0===n&&void 0!==s?s:a,p=m.find(e=>e.hexValue===d)?.name;return(0,r.jsxs)("div",{className:c()(g().input,{[g().inputActive]:t,[g().inputError]:l}),children:[(0,r.jsxs)("div",{className:g().inputLabel,children:[d?(0,r.jsx)("div",{className:g().inputColor,style:{backgroundColor:d},children:i?(0,r.jsx)(_.Z,{variant:"regular",fontAwesomeIcon:"check"}):null}):(0,r.jsx)(u.default,{src:h,alt:"Color wheel",height:24}),(0,r.jsx)("p",{children:p??(0,o.Z)("V\xe4lj f\xe4rg")})]}),(0,r.jsx)(_.Z,{variant:"solid",fontAwesomeIcon:"chevron-down",rotate:t?180:0})]})},x=a(41608),f=a(69702),b=a(16034),v=a.n(b),k=e=>{let{onChange:t,onHoverColor:a,onFocusColor:n,focusedColor:s}=e,l=m[0]?.hexValue??"#fafafa",i=()=>{a(void 0),n(void 0)};return(0,r.jsx)("div",{className:v().popup,children:m.map(e=>(0,r.jsx)(f.Z,{className:v().popupColor,style:{backgroundColor:e.hexValue},onClick:()=>{t(e.hexValue)},onFocus:()=>{void 0===s&&e.hexValue!==l&&n(e.hexValue)},onBlur:()=>{i()},onMouseOver:()=>{a(e.hexValue)},onMouseLeave:()=>{i()}},e.variableName))})},Z=a(62155),j=a.n(Z),C=e=>{let{onChange:t,elementID:a,errorID:n,onHoverColor:s,onFocusColor:l,children:i,active:o,onChangeActive:d,focusedColor:c}=e;return(0,r.jsxs)(x.ZP.Root,{open:o,onChangeOpen:d,middleware:["flip","shift","offset"],offsetOptions:{mainAxis:8},children:[(0,r.jsx)(x.ZP.Target,{children:(0,r.jsx)(f.Z,{"aria-labelledby":a,"aria-describedby":n,className:j().touchable,children:i})}),(0,r.jsx)(x.ZP.Element,{enableFocusManager:!0,children:(0,r.jsx)(k,{onChange:e=>{t(e),d(!1)},onHoverColor:s,onFocusColor:l,focusedColor:c})})]})},S=a(93193),T=a(4940),w=a.n(T),D=e=>{let{onChange:t}=e;return(0,r.jsx)("div",{className:w().popupContainer,children:m.map(e=>(0,r.jsxs)(f.Z,{className:w().colorCell,onClick:()=>{t(e.hexValue)},children:[(0,r.jsx)("div",{className:w().colorBlob,style:{backgroundColor:e.hexValue}}),(0,r.jsx)("p",{className:s.X.Label_SM_Regular,children:e.name})]},e.variableName))})},N=a(46659),I=a.n(N),A=e=>{let{onChange:t,elementID:a,errorID:n,children:s,active:l,onChangeActive:i}=e;return(0,r.jsxs)(S.Z,{open:l,onOpenChange:i,children:[(0,r.jsx)(S.Z.Target,{children:(0,r.jsx)("div",{className:I().targetContainer,children:(0,r.jsx)(f.Z,{"aria-labelledby":a,"aria-describedby":n,onClick:()=>{i(!l)},children:s})})}),(0,r.jsxs)(S.Z.Content,{children:[(0,r.jsx)(S.Z.Header,{children:(0,r.jsx)(S.Z.Title,{children:(0,o.Z)("V\xe4lj bakgrundsf\xe4rg")})}),(0,r.jsx)(S.Z.Body,{children:(0,r.jsx)(D,{onChange:e=>{t(e),i(!1)}})})]})]})},W=e=>{let{color:t,onChange:a,label:o,required:d=!1,error:c}=e,u=(0,l.useId)(),_=(0,l.useId)(),[m,h]=(0,l.useState)(!1),[p,g]=(0,l.useState)(),[x,f]=(0,l.useState)(),b=(0,n.Z)();return(0,r.jsxs)(i.Z.Wrapper,{children:[(0,r.jsxs)("p",{className:s.X.Inputlabel_SM_Semibold,id:u,children:[o,d?" *":null]}),b?(0,r.jsx)(A,{onChange:a,elementID:u,errorID:_,active:m,onChangeActive:h,children:(0,r.jsx)(y,{selectedColor:t,error:!!c,active:m,focusedColor:void 0,hoveredColor:void 0})}):(0,r.jsx)(C,{onChange:a,elementID:u,errorID:_,onHoverColor:g,active:m,onChangeActive:h,onFocusColor:f,focusedColor:x,children:(0,r.jsx)(y,{selectedColor:t,error:!!c,active:m,focusedColor:x,hoveredColor:p})}),c&&"boolean"!=typeof c?(0,r.jsx)(i.Z.Error,{id:_,children:c}):null]})}},26145:function(e,t,a){"use strict";var r=a(27573),n=a(45531),s=a.n(n),l=a(7653),i=a(91237),o=a.n(i);let d=(0,l.forwardRef)((e,t)=>{let{startIcon:a,endIcon:n,children:l,disabled:i,...d}=e;return(0,r.jsxs)("button",{type:"button",...d,ref:t,className:s()(o().fab,d.className,{[o()["fab--only-icon"]]:void 0===l}),disabled:i,children:[a,l,n]})});t.Z=d},3161:function(e,t,a){"use strict";var r,n;a.d(t,{g9:function(){return i},js:function(){return o}}),(n=r||(r={})).TopLeft="top left",n.TopCenter="top center",n.TopRight="top right",n.BottomLeft="bottom left",n.BottomCenter="bottom center",n.BottomRight="bottom right",n.CenterLeft="center left",n.CenterRight="center right";let s={bottom:"top center","bottom-start":"top left","bottom-end":"top right",top:"bottom center","top-start":"bottom left","top-end":"bottom right",left:"center right","left-start":"top right","left-end":"bottom right",right:"center left","right-start":"top left","right-end":"bottom left"},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"absolute";return{enableTransition:!0,transitionOptions:e,positionMethod:t}},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.6,t=`scale(${e})`;return l({initial:e=>{let{placement:a}=e;return{transformOrigin:s[a],opacity:0,transform:t}},open:e=>{let{placement:t}=e;return{transformOrigin:s[t],opacity:1,transform:"scale(1)"}},close:e=>{let{placement:a}=e;return{transformOrigin:s[a],opacity:0,transform:t}},duration:150})},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=`${e}px`,a=`-${e}px`,r={top:`translateY(${t})`,right:`translateX(${a})`,bottom:`translateY(${a})`,left:`translateX(${t})`};return l({initial:e=>{let{side:t}=e;return{opacity:0,transform:r[t]}},close:e=>{let{side:t}=e;return{opacity:0,transform:r[t]}},duration:150})}},31943:function(e,t,a){"use strict";a.d(t,{d:function(){return n}});var r=a(7653);let n=()=>{let e=(0,r.useRef)(null),t=(0,r.useCallback)(()=>{e.current?.open()},[]),a=(0,r.useCallback)(t=>{e.current?.close(t)},[]);return{ref:e,open:t,close:a}}},81052:function(e,t,a){"use strict";a.d(t,{Z:function(){return A}});var r=a(27573),n=a(71539),s=a(45531),l=a.n(s),i=a(79162),o=a(92575),d=a(25913),c=a(7653);let u=(0,c.createContext)({onClose:()=>{}}),_=()=>(0,c.useContext)(u);var m=a(86480),h=a.n(m),p=a(13498),g=a.n(p),y=a(53794),x=a.n(y),f=a(98138),b=a(17331),v=a.n(b);let k=(0,c.forwardRef)((e,t)=>{let{onSubmit:a,children:n}=e;return(0,r.jsx)(f.Z,{ref:t,onSubmit:a,className:v().modal__form,children:n})});var Z=a(91138),j=a(1125),C=a.n(j),S=a(59245),T=a(9737),w=a.n(T),D=a(17691),N=a.n(D),I=a(62590),A=Object.assign(e=>{let{open:t,onClose:a,className:s,overlayClassName:i,"aria-label":o,"aria-description":d,children:c}=e,{refs:_,context:m}=(0,n.YF)({open:t,onOpenChange:a}),h=(0,n.bQ)(m,{outsidePressEvent:"click"}),p=(0,n.qs)(m),{getFloatingProps:g}=(0,n.NI)([h,p]),{isMounted:y,status:x}=(0,n.hU)(m,{duration:I.t});return y?(0,r.jsx)(u.Provider,{value:{onClose:a},children:(0,r.jsx)(n.ll,{children:(0,r.jsx)(n.y0,{lockScroll:!0,className:l()(N().overlay,i,{[N()["overlay--open"]]:"open"===x}),children:(0,r.jsx)(n.wD,{context:m,children:(0,r.jsx)("div",{ref:_.setFloating,className:l()(N().modal,s,{[N()["modal--open"]]:"open"===x}),"aria-label":o,"aria-describedby":d,...g(),children:c})})})})}):null},{Header:e=>{let{platform:t="all",mobileCloseButtonLabel:a,children:n}=e,{onClose:s}=_(),{t:i}=(0,o.T_)();return(0,r.jsxs)("div",{className:l()(C().modal__header,{[C()["modal__header--platform-all"]]:"all"===t,[C()["modal__header--platform-mobile"]]:"mobile"===t,[C()["modal__header--platform-desktop"]]:"desktop"===t}),children:[(0,r.jsx)("div",{children:n}),(0,r.jsx)(Z.Z,{size:"lg",variant:"tertiary",onClick:s,className:C().modal__mobileCloseButton,children:a??i(o.ZT.Common.Cancel)})]})},Title:e=>{let{children:t}=e;return(0,r.jsx)("p",{className:S.X.Heading_LG,children:t})},Subtitle:e=>{let{children:t}=e;return(0,r.jsx)("p",{className:l()(S.X.Label_SM_Regular,w().modal__subtitle),children:t})},Content:e=>{let{paddedOnMobile:t,className:a,children:n}=e;return(0,r.jsx)("div",{className:l()(g().modal__content,{[g()["modal__content--paddedOnMobile"]]:t},a),children:n})},Footer:e=>{let{platform:t="all",stretchButtons:a,className:n,children:s}=e;return(0,r.jsx)("div",{className:l()(x().modal__footer,{[x()["modal__footer--platform-all"]]:"all"===t,[x()["modal__footer--platform-mobile"]]:"mobile"===t,[x()["modal__footer--platform-desktop"]]:"desktop"===t,[x()["modal__footer--stretchButtons"]]:a},n),children:s})},CloseButton:()=>{let{onClose:e}=_(),{t}=(0,o.T_)();return(0,r.jsx)(d.Z,{size:"sm",variant:"secondary",pill:!0,"aria-label":t(o.ZT.Common.Close),onClick:e,className:h().modalCloseButton,children:(0,r.jsx)(i.J,{name:"icon-xmark-24"})})},Form:k})},27285:function(e,t,a){"use strict";var r=a(7653),n=a(62590);t.Z=e=>{let[t,a]=(0,r.useState)(e?.defaultOpen??!1);return{isOpen:t,open:(0,r.useCallback)(()=>{a(!0)},[]),close:(0,r.useCallback)(t=>{(!e?.onAttemptClose||t?.force||e.onAttemptClose())&&(a(!1),e?.afterClose&&setTimeout(e.afterClose,n.t))},[e])}}},62590:function(e,t,a){"use strict";a.d(t,{t:function(){return r}});let r=300},95684:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(27573),n=a(65188),s=a.n(n);let l=(e,t,a)=>{if(void 0!==e)return Math.min(a,Math.max(t,e))};var i=e=>{let{progress:t}=e,a=l(t,0,100);return(0,r.jsx)("progress",{className:s().progress,value:a,max:100})}},7787:function(e,t,a){"use strict";var r=a(27573),n=a(45531),s=a.n(n),l=a(42274),i=a(42174),o=a.n(i);t.Z=e=>{let{text:t,align:a="left"}=e;return(0,r.jsx)(l.Z,{title:t,disabled:t.length<41,children:(0,r.jsx)("p",{className:s()(o().textCell,{[o()["textCell--align-right"]]:"right"===a}),children:t})})}},88205:function(e,t,a){"use strict";var r=a(27573),n=a(45531),s=a.n(n),l=a(7653),i=a(70449),o=a.n(i);let d=(0,l.forwardRef)((e,t)=>{let{size:a="md",...n}=e;return(0,r.jsxs)("div",{className:s()(o().toggle,{[o()["toggle--size-sm"]]:"sm"===a,[o()["toggle--size-md"]]:"md"===a,[o()["toggle--size-lg"]]:"lg"===a}),children:[(0,r.jsx)("input",{type:"checkbox",role:"switch",...n,ref:t}),(0,r.jsx)("span",{})]})});t.Z=d},95397:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var r=a(27573),n=a(42274),s=a(25913),l=a(79162),i=a(92575),o=a(59245),d=a(45531),c=a.n(d),u=a(53206),_=a(12157),m=a(98017);let h=(e,t)=>{let{t:a}=(0,i.T_)();return e===m.j.Month?u.Z.capitalize(_.Z.formatHelper(t,"MMM yyyy")):`${a(i.ZT.Common.Week)} ${_.Z.formatHelper(t,"w, yyyy")}`};var p=a(13777),g=a.n(p);let y=e=>e===m.j.Month?i.ZT.Date.NextMonth:i.ZT.Date.NextWeek,x=e=>e===m.j.Month?i.ZT.Date.PreviousMonth:i.ZT.Date.PreviousWeek,f=e=>e===m.j.Month?i.ZT.Date.ThisMonth:i.ZT.Date.ThisWeek,b=(e,t)=>e===m.j.Month?_.Z.sameMonth(t):_.Z.sameWeek(t);var v=e=>{let{mode:t,date:a,onCurrent:d,onDecrement:u,onIncrement:_}=e,{t:p}=(0,i.T_)(),v=h(t,a);return(0,r.jsxs)("div",{className:c()(g().periodSelector,{[g()["periodSelector--monthLabel"]]:t===m.j.Month,[g()["periodSelector--weekLabel"]]:t===m.j.Week}),children:[b(t,a)?(0,r.jsx)(l.J,{name:"icon-calendar-16"}):(0,r.jsx)(n.Z,{title:p(f(t)),children:(0,r.jsx)(s.Z,{variant:"tertiary",size:"xs","aria-label":p(f(t)),className:g().periodSelector__todayButton,onClick:d,children:(0,r.jsx)(l.J,{name:"icon-clock-rotate-left-16"})})}),(0,r.jsx)("p",{className:o.X.Label_SM_Regular,children:v}),(0,r.jsxs)("div",{className:g().periodSelector__navButtons,children:[(0,r.jsx)(n.Z,{title:p(x(t)),children:(0,r.jsx)(s.Z,{variant:"tertiary",size:"xs","aria-label":p(x(t)),onClick:u,children:(0,r.jsx)(l.J,{name:"icon-chevron-left-16"})})}),(0,r.jsx)(n.Z,{title:p(y(t)),children:(0,r.jsx)(s.Z,{variant:"tertiary",size:"xs","aria-label":p(y(t)),onClick:_,children:(0,r.jsx)(l.J,{name:"icon-chevron-right-16"})})})]})]})}},98017:function(e,t,a){"use strict";var r,n;a.d(t,{j:function(){return r}}),(n=r||(r={})).Month="month",n.Week="week"},78723:function(e,t,a){"use strict";a.d(t,{h:function(){return n}});var r,n,s=a(12157);(r=n||(n={})).Fall="fall",r.Spring="spring";class l{static #e=this.getCurrentSemester=()=>Number(s.Z.getMonth())>=7?"fall":"spring";static #t=this.getStartYear=()=>"fall"===this.getCurrentSemester()?s.Z.getISOYear():s.Z.getISOYear(s.Z.decrementYear());static #a=this.getStartAndEndDateForSemester=e=>{let t=this.getStartYear();return"fall"===e?{startDate:s.Z.getISO(s.Z.setMonth(t,7)),endDate:s.Z.getISO(s.Z.endOfYear(t))}:{startDate:s.Z.getISO(s.Z.startOfYear(s.Z.incrementYear(t))),endDate:s.Z.getISO(s.Z.endOfMonth(s.Z.setMonth(s.Z.incrementYear(t),6)))}}}t.Z=l},1424:function(e,t,a){"use strict";a.d(t,{dG:function(){return er},MK:function(){return o},zK:function(){return ts},fr:function(){return tb},PN:function(){return ei},Tk:function(){return aw},Np:function(){return tO},GU:function(){return tB},cB:function(){return au},Me:function(){return af},IH:function(){return tL},_t:function(){return aL},d1:function(){return K},FC:function(){return aR},De:function(){return aj},KI:function(){return te},s7:function(){return A},PP:function(){return es},F_:function(){return D},V:function(){return N}});var r,n,s,l,i,o,d=a(27573),c=a(24297),u=a(72142),_=a(42274),m=a(80549),h=a(98138),p=a(89358),g=a(96669),y=a(91138),x=a(69702),f=a(12157),b=a(21009),v=a(14207),k=a(79162),Z=a(92575),j=a(59245),C=a(45531),S=a.n(C),T=a(7653),w=a(57748);let D=()=>{let e=w.Jb.useListEventAbsenceTypesQuery({query:{}},{staleTime:1/0});return{eventAbsenceTypes:e.data?.event_absence_types??[],isLoading:e.isPending}},N=()=>{let{isStudent:e}=(0,b.ih)(),{isAdult:t}=(0,b.Tt)(),a=(0,b.zP)(),r=a?.type_of_schooling==="UpperSecondary";return!!e&&!!r&&!!t},I=(e,t)=>e.map(e=>({id:e.id,full_name:e.full_name,first_name:e.first_name,last_name:e.last_name,class_user_group_title:e.class_user_group_title,profile_image_file_url:e.profile_image_file_url,userAbsenceReports:t.filter(t=>e.id===t.student_user_id)})),A=e=>{let{limit:t,offset:a,searchTerm:r,week:n,order:s,userIDs:l,groupID:i}=e,o=f.Z.startOfWeek(f.Z.parseISOWeek(n)),d=f.Z.endOfWeek(f.Z.parseISOWeek(n)),c=w.Jb.useListEventAbsenceReportsQuery({query:{params:{greater_or_equal:{start_at:f.Z.getUTC(f.Z.startOfDay(o))},smaller_or_equal:{start_at:f.Z.getUTC(f.Z.endOfDay(d))},...l&&{in:{student_user_id:l}}}}}),u=c?.data?.event_absence_reports,_=u?.map(e=>e.student_user_id),m=w.Ck.useListUserPreviewsQuery({query:{params:{like:{full_name:r??""},in:{id:_},...i&&{equals:{user_school_student:{class_user_group_id:i}}}},order_by:s,limit:t,offset:a},include_archived_students:!1}),h=c.isPending||m.isPending;return{data:{reportData:I(m.data?.users??[],u??[])??[],fullReportData:u??[],totalCount:m.data?.total_count??0,week:n,isPending:h}}};var W=a(93193),O=a(25913),F=a(49660),E=a(35725),B=a(81484),R=a.n(B);function H(e){let{eventEndDate:t,eventStartDate:a,duration:r,onChangeDuration:n}=e,{t:s}=(0,Z.T_)();return(0,d.jsxs)("div",{className:R().absencePartialForm,children:[(0,d.jsx)(O.Z,{"aria-label":(0,E.Z)("Minska antal minuter"),variant:"primary",disabled:0===r,onClick:()=>{n(r-1)},children:(0,d.jsx)(k.J,{name:"icon-minus-24"})}),(0,d.jsx)(F.Z,{"aria-label":s(Z.ZT.Common.Minutes),variant:"outlined",value:r,onChangeValue:function(e){let r=Number(e);if(isNaN(r))return;let s=f.Z.getMinutesBetweenDates(a,t);r>=s?n(s):r<1?n(0):n(r)},inputMode:"numeric",pattern:"[0-9]*",className:R().absencePartialForm__input}),(0,d.jsx)(O.Z,{"aria-label":(0,E.Z)("\xd6ka antal minuter"),variant:"primary",disabled:r===f.Z.getMinutesBetweenDates(a,t),onClick:()=>{n(r+1)},children:(0,d.jsx)(k.J,{name:"icon-plus-24"})}),(0,d.jsxs)("p",{className:R().absencePartialForm__duration,children:[r," ",s(Z.ZT.Common.Minutes).toLowerCase()]})]})}var P=a(78198),M=a.n(P);function L(e){let{eventEndDate:t,eventStartDate:a,duration:r,onChangeDuration:n,onClickTarget:s,onClose:l,children:i}=e,{t:o}=(0,Z.T_)(),[c,u]=(0,T.useState)(!1);return(0,d.jsxs)(W.Z,{open:c,onOpenChange:e=>{u(e),e||l()},children:[(0,d.jsx)(W.Z.Target,{targetProps:{onClick:s},children:i}),(0,d.jsxs)(W.Z.Content,{children:[(0,d.jsx)(W.Z.Header,{closeButtonLabel:o(Z.ZT.Common.Done),children:(0,d.jsx)(W.Z.Title,{children:o(Z.ZT.Attendance.PartialAbsence)})}),(0,d.jsx)(W.Z.Body,{className:M().absencePartialBottomSheetBody,children:(0,d.jsx)(H,{duration:r,onChangeDuration:n,eventStartDate:a,eventEndDate:t})})]})]})}var $=a(41608),U=a(62476),z=a.n(U),V=(0,T.memo)(function(e){let{duration:t,onChangeDuration:a,eventStartDate:r,eventEndDate:n,onClickTarget:s,onClose:l,children:i}=e,{t:o}=(0,Z.T_)(),[c,u]=(0,T.useState)(!1);return(0,d.jsxs)($.ZP.Root,{open:c,onChangeOpen:e=>{u(e),e||l()},placement:"bottom-end",middleware:["offset","shift"],offsetOptions:{mainAxis:8},children:[(0,d.jsx)($.ZP.Target,{targetProps:{onClick:s},children:i}),(0,d.jsx)($.ZP.Element,{enableFocusManager:!0,children:(0,d.jsxs)("div",{className:z().popup,children:[(0,d.jsxs)("div",{className:z().popup__header,children:[(0,d.jsx)("p",{className:j.X.Label_MD_Semibold,children:o(Z.ZT.Attendance.PartialAbsence)}),(0,d.jsx)(O.Z,{variant:"secondary","aria-label":o(Z.ZT.Common.Close),size:"xs",pill:!0,onClick:()=>{u(!1),l()},children:(0,d.jsx)(k.J,{name:"icon-xmark-16"})})]}),(0,d.jsx)(H,{eventStartDate:r,eventEndDate:n,duration:t,onChangeDuration:a})]})})]})}),G=a(88977),J=a.n(G);let q=new c.NF;function X(e){let{eventStartDate:t,onCreateNewAbsenceReport:a}=e,{form:r}=(0,v.cI)(),{t:n}=(0,Z.T_)(),{eventAbsenceTypes:s}=D();return(0,d.jsx)(h.Z,{onSubmit:r.handleSubmit(e=>{a(f.Z.getFullISO(t),f.Z.getFullISO(f.Z.endOfDay(t)),e.absenceTypeID,e.comment)}),children:(0,d.jsxs)(h.Z.Column,{children:[(0,d.jsxs)(p.Z,{label:n(Z.ZT.Common.Type),required:!0,...r.register("absenceTypeID"),children:[(0,d.jsx)("option",{value:"",children:n(Z.ZT.Common.Choose)}),s.filter(e=>e.only_staff).map(e=>(0,d.jsx)("option",{value:e.id,children:n({key:e.title})},e.id))]}),(0,d.jsx)(m.Z,{label:n(Z.ZT.Common.Comment),...r.register("comment"),minRows:2,maxRows:2}),(0,d.jsxs)(g.Z,{gap:4,children:[(0,d.jsx)(k.J,{name:"icon-info-circle-fill-16"}),(0,d.jsx)("p",{className:j.X.Paragraph_XS_Regular,children:n(Z.ZT.Attendance.AbsenceReportDesc)})]}),(0,d.jsx)(y.Z,{variant:"secondary",size:"md",type:"submit",fullWidth:!0,children:n(Z.ZT.Attendance.ReportAbsence)})]})})}let Y=e=>{let{title:t,expanded:a,onClick:r,children:n}=e;return(0,d.jsxs)("div",{className:J().expandable,children:[(0,d.jsxs)(x.Z,{onClick:r,className:J().expandable__header,children:[(0,d.jsx)("p",{className:j.X.Paragraph_SM_Semibold,children:t}),(0,d.jsx)(k.J,{name:a?"icon-chevron-up-24":"icon-chevron-down-24"})]}),a?(0,d.jsx)("div",{className:J().expandable__content,children:n}):null]})},Q=(0,T.forwardRef)((e,t)=>{let{selected:a,selectedColor:r,onClick:n,children:s,className:l,...i}=e;return(0,d.jsx)(x.Z,{...i,ref:t,onClick:n,className:S()(J().attendanceButton,l,{[J()["attendanceButton--selected"]]:a,[J()["attendanceButton--selectedSuccess"]]:a&&"success"===r,[J()["attendanceButton--selectedWarning"]]:a&&"warning"===r,[J()["attendanceButton--selectedDanger"]]:a&&"danger"===r,[J()["attendanceButton--selectedNeutral"]]:a&&"neutral"===r}),children:s})});var K={AttendanceButton:Q,AttendingButton:e=>{let{t}=(0,Z.T_)();return(0,d.jsx)(_.Z,{title:t(Z.ZT.Common.Attendant),children:(0,d.jsx)(Q,{selected:e.eventAttendee.status===u.b.EventAttendanceReportStatus.Attendance,selectedColor:"success",onClick:()=>{e.onUpdateEventAttendee({...e.eventAttendee,status:u.b.EventAttendanceReportStatus.Attendance,event_absence_type_id:null,event_absence_report_id:null,absence_duration:0})},children:(0,d.jsx)(k.J,{name:"icon-checkmark-16"})})})},AbsentButton:e=>{let{t}=(0,Z.T_)();return(0,d.jsx)(_.Z,{title:t(e.eventAttendee.status===u.b.EventAttendanceReportStatus.AbsenceReported?Z.ZT.Attendance.ReportedAbsence:e.eventAttendee.status===u.b.EventAttendanceReportStatus.AbsenceUnreported?Z.ZT.Attendance.UnreportedAbsence:Z.ZT.Attendance.Absent),children:(0,d.jsx)(Q,{selectedColor:e.eventAttendee.event_absence_report_id?"warning":"danger",selected:e.eventAttendee.status===u.b.EventAttendanceReportStatus.AbsenceReported||e.eventAttendee.status===u.b.EventAttendanceReportStatus.AbsenceUnreported,onClick:()=>{e.onUpdateEventAttendee({...e.eventAttendee,status:e.absenceReport?u.b.EventAttendanceReportStatus.AbsenceReported:u.b.EventAttendanceReportStatus.AbsenceUnreported,event_absence_type_id:e.absenceReport?.event_absence_type_id||null,event_absence_report_id:e.absenceReport?.id||null,absence_duration:0})},children:(0,d.jsx)(k.J,{name:"icon-user-xmark-16"})})})},PartiallyAbsentButton:function(e){let{t}=(0,Z.T_)();function a(){0===e.eventAttendee.absence_duration&&e.onUpdateEventAttendee({...e.eventAttendee,status:u.b.EventAttendanceReportStatus.Attendance,event_absence_type_id:null,event_absence_report_id:null})}function r(){e.onUpdateEventAttendee({...e.eventAttendee,status:u.b.EventAttendanceReportStatus.AbsencePartial,event_absence_type_id:null,event_absence_report_id:null,absence_duration:0===e.eventAttendee.absence_duration?5:e.eventAttendee.absence_duration})}function n(t){e.onUpdateEventAttendee({...e.eventAttendee,status:u.b.EventAttendanceReportStatus.AbsencePartial,event_absence_type_id:null,event_absence_report_id:null,absence_duration:t})}return(0,d.jsx)(_.Z,{title:t(Z.ZT.Attendance.PartialAbsence),children:(0,d.jsxs)("div",{children:[(0,d.jsx)(V,{duration:e.eventAttendee.absence_duration,onChangeDuration:n,eventStartDate:e.eventStartDate,eventEndDate:e.eventEndDate,onClose:a,onClickTarget:r,children:(0,d.jsx)(Q,{selectedColor:"warning",selected:e.eventAttendee.status===u.b.EventAttendanceReportStatus.AbsencePartial,className:J().partialAttendanceDesktopButton,children:e.eventAttendee.absence_duration>0?(0,d.jsx)("p",{children:e.eventAttendee.absence_duration}):(0,d.jsx)(k.J,{name:"icon-clock-circle-outline-16"})})}),(0,d.jsx)(L,{duration:e.eventAttendee.absence_duration,onChangeDuration:n,eventStartDate:e.eventStartDate,eventEndDate:e.eventEndDate,onClose:a,onClickTarget:r,children:(0,d.jsx)(Q,{selectedColor:"warning",selected:e.eventAttendee.status===u.b.EventAttendanceReportStatus.AbsencePartial,className:J().partialAttendanceMobileButton,children:e.eventAttendee.absence_duration>0?(0,d.jsx)("p",{children:e.eventAttendee.absence_duration}):(0,d.jsx)(k.J,{name:"icon-clock-circle-outline-16"})})})]})})},NeutralButton:e=>{let{t}=(0,Z.T_)();return(0,d.jsx)(_.Z,{title:t(Z.ZT.Attendance.Neutral),description:t(Z.ZT.Attendance.StudentPresentNorAbsent),children:(0,d.jsx)(Q,{selectedColor:"neutral",selected:e.eventAttendee.status===u.b.EventAttendanceReportStatus.Neutral,onClick:()=>{e.onUpdateEventAttendee({...e.eventAttendee,status:u.b.EventAttendanceReportStatus.Neutral,event_absence_report_id:null,event_absence_type_id:null,absence_duration:0})},children:(0,d.jsx)(k.J,{name:"icon-n-16"})})})},AdditionalInfo:e=>{let{t}=(0,Z.T_)(),a=(0,b.zP)(),r=e.eventAttendee.status===u.b.EventAttendanceReportStatus.Neutral,[n,s]=(0,T.useReducer)(e=>!e,!1),[l,i]=(0,T.useReducer)(e=>!e,e.courseID!==e.eventAttendee.course_id||r),[o,c]=(0,T.useReducer)(e=>!e,!1),[_,g]=(0,T.useState)([]),y=a?.type_of_schooling==="Elementary";return(0,T.useEffect)(()=>{y&&q.list({pagination:{page:0,size:0}}).then(e=>{g(e.courses??[])})},[y]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(Y,{title:t(Z.ZT.Attendance.CommentToStudent),expanded:n,onClick:s,children:(0,d.jsx)(m.Z,{"aria-label":t(Z.ZT.Attendance.CommentToStudent),defaultValue:e.eventAttendee.comment,minRows:2,maxRows:2,onBlur:t=>{e.onUpdateEventAttendee({...e.eventAttendee,comment:t.currentTarget.value})}})}),e.hasReport?null:(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(Y,{title:t(Z.ZT.Attendance.AbsenceReport),expanded:o,onClick:()=>{c()},children:(0,d.jsx)(X,{eventStartDate:e.eventStartDate,onCreateNewAbsenceReport:e.onCreateNewAbsenceReport})})}),(0,d.jsx)(Y,{title:t(Z.ZT.Attendance.DeviantSubject),expanded:l,onClick:()=>{i()},children:(0,d.jsx)(h.Z.Column,{children:y?(0,d.jsxs)(p.Z,{"aria-label":t(Z.ZT.Attendance.DeviantSubject),value:e.eventAttendee.course_id??"",onChangeValue:t=>{e.onUpdateEventAttendee({...e.eventAttendee,course_id:t||e.courseID||null})},children:[(0,d.jsx)("option",{value:"",disabled:e.eventAttendee.course_id===e.courseID,children:e.eventAttendee.course_id===e.courseID?"-":t(Z.ZT.Common.Reset)}),_.map(e=>(0,d.jsx)("option",{value:e.id,children:e.title},e.id))]}):null})})]})}},ee=a(78723),et=a(66641),ea=a(72791);(r=l||(l={})).Lessons="Lessons",r.Minutes="Minutes",(n=i||(i={})).Total="Total",n.Reported="Reported",n.Unreported="Unreported";let er="attendance-statistics-store",en=ee.Z.getStartAndEndDateForSemester(ee.Z.getCurrentSemester()),es=(0,et.Ue)()((0,ea.tJ)(e=>({isFilterActive:!1,filter:{fromDate:en.startDate,toDate:en.endDate,groupID:"",userID:"",representBy:l.Minutes,status:i.Total,showPercentage:!0,percentage:void 0},setIsFilterActive:t=>{e({isFilterActive:t})},setFilter:t=>{e({filter:t})}}),{name:er,storage:(0,ea.FL)(()=>localStorage)}));class el{static #e=this.isReportForEntireDay=e=>{let t=f.Z.startOfDay(e.start_at),a=f.Z.endOfDay(e.end_at);return!!(f.Z.isEqual(t,e.start_at)&&f.Z.isEqual(a,e.end_at))};static #t=this.sortReportsByCreator=(e,t,a)=>{let r=a.find(t=>t.id===e.event_absence_type_id)?.only_staff;return r===a.find(e=>e.id===t.event_absence_type_id)?.only_staff?0:r?-1:1};static #a=this.getIconForEventAttendeeStatus=e=>{switch(e){case"Attendance":return"check";case"AbsencePartial":return"clock";case"AbsenceReported":case"AbsenceUnreported":return"xmark";default:return"minus"}};static #r=this.getBackgroundColorForEventAttendeeStatus=e=>{switch(e){case"Attendance":return"var(--old-success-color-light)";case"AbsencePartial":case"AbsenceReported":return"var(--old-warning-color-light)";case"AbsenceUnreported":return"var(--old-danger-color-light)";default:return"#efefef"}};static #n=this.getTextColorForEventAttendeeStatus=e=>{switch(e){case"Attendance":return"var(--old-success-color)";case"AbsencePartial":case"AbsenceReported":return"var(--old-warning-color)";case"AbsenceUnreported":return"var(--old-danger-color)";default:return"#000000"}};static #s=this.getLabelForEventAttendeeStatus=e=>{switch(e){case"Attendance":return Z.ZT.Attendance.Attending;case"AbsencePartial":return Z.ZT.Attendance.PartialAbsence;case"AbsenceReported":return Z.ZT.Attendance.ReportedAbsence;case"AbsenceUnreported":return Z.ZT.Attendance.UnreportedAbsence;case"Neutral":return Z.ZT.Attendance.Neutral;default:return Z.ZT.Attendance.NotReported}};static #l=this.canUserReportAttendance=e=>{let{event:t,userID:a,isEmployee:r,isAdmin:n,settings:s}=e;return!!t.use_attendance&&!!r&&(!!t.moderator_user_ids.includes(a)||!!n||(!t.reported||t.reported_by_user_id===a)&&"NO"!==s.EventAttendanceAllowSubstitute&&!!f.Z.sameWeek(t.start_at))};static #i=this.requireTwoFactorPassword=(e,t,a,r)=>!e.includes(t)&&!a&&"PASSWORD"===r.EventAttendanceAllowSubstitute;static #o=this.canUserUnreportEvent=(e,t)=>{if(!e.reported)return!1;let a=e.moderator_user_ids.includes(t);return e.reported_by_user_id===t||!!a}}var ei=el,eo=a(79367),ed=a(9037),ec=a(26145),eu=a(69809),e_=a(95397),em=a(98017),eh=a(23618),ep=a(2393),eg=a(29843),ey=a(7787),ex=a(26165),ef=a(53206),eb=a(23072),ev=a.n(eb);let ek=(0,eg.Cl)(),eZ=(e,t)=>{let a=(0,eh.s0)(),{eventAbsenceTypes:r}=D(),{t:n}=(0,Z.T_)(),s=f.Z.getISOWeekdays(e,[0,1,2,3,4]).map(e=>{let s=Array.from(new Set(t.filter(t=>f.Z.getISO(t.start_at)===e).map(e=>e.student_user_id))).length;return ek.display({id:e,minSize:161,header:()=>(0,d.jsxs)(d.Fragment,{children:[ef.Z.capitalize(f.Z.getDayname(e)),` ${f.Z.getDay(e)}/${f.Z.getMonth(e)}`,(0,d.jsx)(ep.Z,{variant:"neutral-extra-darkest",count:s})]}),cell:t=>{let{row:s}=t;return(0,d.jsxs)("div",{className:ev().cell__container,children:[0===s.original.userAbsenceReports.filter(t=>f.Z.sameDay(e,t.start_at)).length?(0,d.jsx)("div",{children:"-"}):null,s.original.userAbsenceReports.filter(t=>f.Z.sameDay(e,t.start_at)).map(e=>(0,d.jsxs)(x.Z,{onClick:()=>{a(`./${e.id}`)},className:ev().cell,children:[(0,d.jsxs)("div",{className:ev().cell__information,children:[(0,d.jsx)("p",{className:j.X.Label_SM_Regular,children:n({key:r.find(t=>t.id===e.event_absence_type_id)?.title??""})}),e.description.length>0&&(0,d.jsx)(k.J,{name:"icon-comment-lines-fill-16"})]}),(0,d.jsxs)("div",{className:S()(ev().cell__time,j.X.Label_XS_Regular),children:[(0,d.jsx)(k.J,{name:"icon-clock-circle-outline-16"}),ei.isReportForEntireDay(e)?n(Z.ZT.Common.WholeDay):(0,d.jsxs)(d.Fragment,{children:[f.Z.getISOHour(e.start_at)," - ",f.Z.getISOHour(e.end_at)]})]})]},e.id))]})}})});return[ek.accessor("full_name",{header:()=>n(Z.ZT.Common.Name),cell:e=>{let{row:t}=e;return(0,d.jsx)(ex.bb,{user:{id:t.original.id,first_name:t.original.first_name,last_name:t.original.last_name,profile_image_file_url:t.original.profile_image_file_url},showLastName:!0})},meta:{pinned:"desktop"}}),ek.display({id:"class_user_group_title",header:()=>n(Z.ZT.Common.Class),cell:e=>{let{row:t}=e;return(0,d.jsx)(ey.Z,{text:t.original.class_user_group_title??""})}}),...s]};var ej=a(4537),eC=a.n(ej);let eS=()=>{let e=w.Ck.useListUserGroupsQuery({query:{params:{equals:{is_class:!0}}}});return e.data?.user_groups??[]};var eT=a(31943),ew=a(69038),eD=a(66221),eN=a(59373),eI=a(20886);(s=o||(o={})).Guardian="Guardian",s.StudentOverview="StudentOverview",s.Employee="Employee",s.Admin="Admin",s.Student="Student";var eA=a(83499),eW=a(55613);let eO=new eA.PO,eF=async(e,t,a,r)=>{if(!t&&e!==o.Guardian&&e!==o.Admin&&e!==o.Student)return Promise.reject();let n=e===o.Student?eO.deleteEventAbsenceReportAsStudent({id:r}):e===o.Guardian?eO.deleteEventAbsenceReportAsGuardian({user_id:a,id:r}):eO.deleteEventAbsenceReport({id:r});return eW.FN.promise(n,(0,E.Z)("Tog bort fr\xe5nvaroanm\xe4lan!")),n},eE=async e=>{let{mode:t,userID:a,dateParams:r}=e;return t===o.Guardian?eO.listEventAbsenceReportsAsGuardian({user_id:a,query:{params:r}}):t===o.Student?eO.listEventAbsenceReportsAsStudent({query:{params:r}}):eO.listEventAbsenceReports({query:{params:{equals:{student_user_id:a},...r}}})};var eB=e=>{let{reports:t,mode:a,groupID:r,onDeleteAbsenceReport:n}=e,{reportID:s}=(0,eh.UO)(),l=(0,eT.d)(),i=(0,eh.s0)(),{t:c}=(0,Z.T_)(),{eventAbsenceTypes:u}=D(),[_,m]=(0,T.useState)(!1),h=t.find(e=>e.id===s),{checkinAbsenceEnabled:p,setCheckinAbsence:x,hasCheckinAbsence:b}=(0,eI.H9)(h?.student_user_id,f.Z.getISO(h?.start_at),f.Z.getISO(h?.end_at)),v=()=>{h&&eF(a,r,h.student_user_id,h.id).then(()=>{n(h.id),m(!1),p&&b&&x(!1)})},k=(0,ex.dl)(h?.created_by||void 0);return h?(0,d.jsxs)(ew.ZP,{ref:l.ref,afterClose:()=>{i("..")},height:"small",children:[(0,d.jsx)(ew.ZP.Header,{children:(0,d.jsx)("h1",{children:c(Z.ZT.Attendance.AbsenceReport)})}),(0,d.jsxs)(ew.ZP.Content,{padded:!0,children:[k?(0,d.jsxs)(g.Z,{gap:10,style:{marginBlockEnd:10},children:[(0,d.jsx)(ex.Yt,{size:"lg",user:k}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{style:{lineHeight:1.3},children:k.full_name}),(0,d.jsx)("p",{style:{lineHeight:1.3},children:c(ex.p5.getCategoryTranslation(k.category))})]})]}):null,(0,d.jsx)("p",{style:{fontWeight:500},children:c({key:u.find(e=>e.id===h.event_absence_type_id)?.title??""})}),(0,d.jsxs)("p",{style:{fontSize:14},children:[(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:"clock",style:{marginInlineEnd:5}}),ei.isReportForEntireDay(h)?c(Z.ZT.Common.WholeDay):(0,d.jsxs)(d.Fragment,{children:[f.Z.getISOHour(h.start_at)," - ",f.Z.getISOHour(h.end_at)]})]}),(0,d.jsx)("p",{children:h.guardian_comment||h.description}),a===o.StudentOverview||a===o.Admin?(0,d.jsxs)(g.Z,{gap:10,align:"center",style:{marginBlockStart:15},children:[(0,d.jsx)(y.Z,{variant:"primary",size:"md",destructive:!0,onClick:()=>{_?v():m(!0)},children:c(Z.ZT.Common.Delete)}),_?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y.Z,{variant:"secondary",size:"md",onClick:()=>{m(!1)},children:c(Z.ZT.Common.Cancel)}),(0,d.jsx)(eN.Z,{color:"danger",children:(0,E.Z)("\xc4r du s\xe4ker p\xe5 att du vill ta bort fr\xe5nvaroanm\xe4lningen?")})]}):null]}):null]})]}):null},eR=a(86660),eH=a(26181),eP=a(2261),eM=a(2420),eL=a(13094),e$=a(74934),eU=a(79505),ez=a(35176),eV=a(4192),eG=a(8230),eJ=a(79100),eq=a(78195),eX=a(31283),eY=a(15709);let eQ=new eA.PO,eK=e=>{switch(e){case o.Guardian:return eY.Y.Event.AbsenceCreatedGuardian;case o.Student:return eY.Y.Event.AbsenceCreatedStudent;default:return eY.Y.Event.AbsenceCreatedEmployee}},e0=e=>{let{userID:t,date:a,mode:r,enabled:n}=e,s=Number(f.Z.getWeek(a)),l=Number(f.Z.getFullYear(a)),i=w.gl.useListChildcareDeviationsForWeekAsGuardianQuery({week:s,year:l,user_id:t},{enabled:n&&r===o.Guardian}),d=w.gl.useListChildcareDeviationsQuery({user_id:t,query:{params:{equals:{date:a,user_id:t}}}},{enabled:n&&r!==o.Guardian}),c=i.data?.childcare_deviations?.find(e=>e.date===a),u=d.data?.childcare_deviations?.[0],_=w.F6.useDeleteChildcareDeviationMutation(),m=w.F6.useCreateChildcareDeviationAsGuardianMutation(),h=w.F6.useUpdateChildcareDeviationAsGuardianMutation(),p=w.F6.useCreateChildcareDeviationMutation(),g=w.F6.useUpdateChildcareDeviationMutation();return{upsertDeviation:()=>{if(r===o.Guardian){if(c){h.mutate({id:c.id,starts_at:c.starts_at,ends_at:c.ends_at,guardian_comment:c.guardian_comment,comment:c.comment,absence:!0,user_id:t});return}m.mutate({user_id:t,date:a,starts_at:null,ends_at:null,guardian_comment:null,comment:null,absence:!0});return}if(u){g.mutate({id:u.id,starts_at:u.starts_at,ends_at:u.ends_at,comment:u.comment,absence:!0,guardian_comment:u.guardian_comment,user_id:t});return}p.mutate({user_id:t,date:a,starts_at:null,ends_at:null,comment:null,absence:!0,guardian_comment:null})},deleteDeviation:()=>{let e=r===o.Guardian?c?.id:u?.id;e&&_.mutate({id:e,user_id:t})},hasAbsenceDeviation:!!(r===o.Guardian?c?.absence:u?.absence)}},e1=e=>{let{userID:t,groupID:a,date:r,mode:n,onCreateNewReport:s,reportCheckinAbsence:l,onReset:i,startTime:d,endTime:c,fullDay:u,absenceTypeID:_,description:m,error:h}=e,{t:p}=(0,Z.T_)(),{setCheckinAbsence:g}=(0,eI.H9)(t,r,r),{eventAbsenceTypes:y}=D(),{settings:x}=(0,ez.rV)(),{upsertDeviation:b}=e0({date:r,mode:n,userID:t,enabled:x.NewChildcare}),v=eK(n),k=n===o.Guardian||n===o.Student,j=()=>{let e=y.find(e=>!e.only_staff);if(!e){eW.FN.error(p(Z.ZT.Toast.AbsenceTypeNotFound));return}let a={start_at:f.Z.getUTC(u?f.Z.startOfDay(r):`${r}T${d}`),end_at:f.Z.getUTC(u?f.Z.endOfDay(r):`${r}T${c}`),description:"",guardian_comment:m,event_absence_type_id:e.id},l=n===o.Guardian?eQ.createEventAbsenceReportAsGuardianWithReturnObject({...a,user_id:t}):eQ.createEventAbsenceReportAsStudentWithReturnObject(a);eW.FN.promise(l,p(Z.ZT.Toast.CreatedAbsenceReport)),l.then(e=>{s(e.event_absence_report),i(),eY.Y.trackEvent(v)})},C=()=>{let e=eQ.createEventAbsenceReportWithReturnObject({event_absence_type_id:_??"",start_at:f.Z.getUTC(u?f.Z.startOfDay(r):`${r}T${d}`),end_at:f.Z.getUTC(u?f.Z.endOfDay(r):`${r}T${c}`),description:m,user_id:t});eW.FN.promise(e,p(Z.ZT.Toast.CreatedAbsenceReport)),e.then(e=>{s(e.event_absence_report),i(),eY.Y.trackEvent(v)})},S=()=>_||k?!u&&d&&c&&d===c?(h.new((0,E.Z)("Starttiden f\xe5r inte vara samma som sluttiden!")),!1):(!!a||n!==o.StudentOverview)&&(!!r&&(!!d&&!!c||!!u)||(h.new(p(Z.ZT.Common.AlertAllFields)),!1)):(h.new(p(Z.ZT.Common.AlertAllFields)),!1);return{onSubmit:()=>{if(h.clear(),S()){if(l&&(x.NewChildcare?b():g(!0)),k){j();return}C()}}}};var e6=(0,T.memo)(e=>{let{groupID:t,userID:a,date:r,mode:n,onCreateNewReport:s,checkinAbsenceEnabled:l,reports:i}=e,c=N(),{t:u}=(0,Z.T_)(),_=(0,eX.Z)(),[x,b]=(0,T.useState)(!1),[v,k]=(0,T.useState)(null),[j,C]=(0,T.useState)(""),[S,w]=(0,T.useState)(""),[I,A]=(0,T.useState)(""),[W,O]=(0,T.useState)(!1),[F,B]=(0,T.useState)(!1),R=i.some(e=>!!x||!!(f.Z.isTimeValid(j)&&f.Z.isTimeValid(S))&&f.Z.intervalsOverlapping(e.start_at,e.end_at,`${r}T${j}`,`${r}T${S}`));(0,T.useEffect)(()=>{B(!1)},[R]);let{eventAbsenceTypes:H}=D(),{settings:P}=(0,ez.rV)(),M=n===o.Guardian||n===o.Student,{onSubmit:L}=e1({mode:n,reportCheckinAbsence:W,startTime:j,endTime:S,fullDay:x,absenceTypeID:v,description:I,error:_,date:r,userID:a,groupID:t,onReset:()=>{k(null),C(""),w(""),A(""),b(!1),O(!1)},onCreateNewReport:s});return c||n!==o.Student?(0,d.jsx)(h.Z,{onSubmit:L,children:(0,d.jsxs)(h.Z.Column,{children:[M?null:(0,d.jsxs)(p.Z,{label:u(Z.ZT.Common.Type),value:v??"",onChangeValue:e=>{k(e||null)},error:_.visible&&!v,required:!0,children:[(0,d.jsx)("option",{value:"",children:"-"}),H.sort((e,t)=>(0,eL.Z)(e.title,t.title)).filter(e=>e.only_staff).map(e=>(0,d.jsx)("option",{value:e.id,children:u({key:e.title})},e.id))]}),(0,d.jsx)(eG.Z,{label:u(Z.ZT.Common.FullDay),checked:x,onChange:()=>{b(e=>!e),l&&O(!x)}}),x?null:(0,d.jsxs)(h.Z.Row,{children:[(0,d.jsx)(eq.Z,{label:u(Z.ZT.Common.From),value:j,onChangeValue:C,error:_.visible&&!x&&!j}),(0,d.jsx)(eq.Z,{label:u(Z.ZT.Common.To),value:S,onChangeValue:w,minTime:j,error:_.visible&&!x&&!S})]}),n!==o.Guardian||P.EventAbsenceReportUseGuardianComment?(0,d.jsx)(m.Z,{label:u(Z.ZT.Common.Description),placeholder:u(Z.ZT.Common.Description),value:I,onChangeValue:A,minRows:2}):null,l&&(0,d.jsx)(eG.Z,{checked:W,onChange:()=>{O(e=>!e)},label:(0,E.Z)("Anm\xe4l till fritids ocks\xe5?")}),R&&!F?(0,d.jsxs)(eJ.Z,{type:"warning",children:[(0,d.jsx)(eJ.Z.Text,{children:(0,E.Z)("Den valda tiden \xf6verlappar med en annan fr\xe5nvaroanm\xe4lan.")}),(0,d.jsx)(eJ.Z.Action,{type:"dismiss",onClick:()=>{B(!0)}})]}):null,(0,d.jsxs)(g.Z,{align:"center",gap:10,children:[(0,d.jsx)(y.Z,{variant:"primary",size:"md",onClick:L,children:u(Z.ZT.Common.Save)}),(0,d.jsx)(eN.Z,{weight:500,color:"danger",children:_.text})]})]})}):(0,d.jsx)("div",{children:(0,d.jsx)(eN.Z,{children:(0,E.Z)("Det g\xe5r inte att skapa fr\xe5nvaroanm\xe4lan som elev innan du fyller 18")})})}),e5=a(21469),e2=a.n(e5);let e3=(0,T.memo)(e=>{let{report:t,deletable:a,onDelete:r,absenceType:n}=e,{t:s}=(0,Z.T_)(),l=(0,ex.LM)(e=>e.userPreviews)[t.created_by??""],i=(0,b.Tt)().userID===t.created_by,[o,c]=(0,T.useState)(!1),u={time:f.Z.getISOHour(t.created_at),date:f.Z.getReadable(t.created_at)};return(0,d.jsxs)("div",{className:e2().reportItem,children:[o?(0,d.jsx)("div",{className:e2().reportItem__deleteOverlay,children:(0,d.jsx)(eN.Z,{color:"danger",weight:500,children:s(Z.ZT.Alert.RemoveReportDesc)})}):null,(0,d.jsxs)(g.Z,{align:"center",gap:10,children:[l?(0,d.jsx)(_.Z,{title:l.full_name??"",disabled:null===l.full_name,children:(0,d.jsx)(ex.Yt,{user:l,size:"md"})}):null,(0,d.jsxs)(g.Z,{direction:"column",children:[(0,d.jsx)("p",{children:s({key:n?.title??""})}),(0,d.jsxs)(g.Z,{align:"center",children:[(0,d.jsxs)(g.Z,{gap:5,align:"center",children:[(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:"clock"}),(0,d.jsx)(eN.Z,{color:"secondary",size:12,children:ei.isReportForEntireDay(t)?s(Z.ZT.Common.WholeDay):(0,d.jsxs)(d.Fragment,{children:[f.Z.getISOHour(t.start_at)," -"," ",f.Z.getISOHour(t.end_at)]})})]}),(0,d.jsx)(eo.Z,{size:15,margin:5,orientation:"vertical"}),(0,d.jsx)(eN.Z,{color:"secondary",size:12,children:s(i?Z.ZT.Attendance.ReportedByCurrentUser(u):Z.ZT.Attendance.ReportedBy({...u,name:l?.full_name??""}))})]}),(0,d.jsx)(eN.Z,{color:"secondary",size:12,children:("guardian_comment"in t?t.guardian_comment:null)||t.description})]})]}),(0,d.jsxs)(g.Z,{gap:5,style:{zIndex:2},children:[o?(0,d.jsx)(_.Z,{title:s(Z.ZT.Common.Cancel),children:(0,d.jsx)(O.Z,{"aria-label":s(Z.ZT.Common.Cancel),variant:"tertiary",pill:!0,size:"sm",onClick:()=>{c(!1)},children:(0,d.jsx)(k.J,{name:"icon-minus-24"})})}):null,a?(0,d.jsx)(_.Z,{title:s(Z.ZT.Common.Remove),children:(0,d.jsx)(O.Z,{"aria-label":s(Z.ZT.Common.Remove),variant:"secondary",pill:!0,size:"sm",onClick:()=>{o?r(t.id):c(!0)},children:(0,d.jsx)(k.J,{name:"icon-trash-can-24"})})}):null]})]})});var e7=(0,T.memo)(e=>{let{reports:t,eventAttendees:a,date:r,mode:n,onDelete:s}=e,{eventAbsenceTypes:l}=D(),i=(0,T.useMemo)(()=>[...new Set(t.map(e=>e.created_by))].filter(e$.Z.isNotNullish),[t]);return(0,ex.b1)(i),(0,d.jsx)("div",{className:e2().reportList,children:t.map(e=>{let t=a.some(t=>t.event_absence_report_id===e.id),i=f.Z.before(r,f.Z.getISO()),c=l.find(t=>t.id===e.event_absence_type_id);return(0,d.jsx)(e3,{report:e,deletable:n!==o.Employee&&(n!==o.Student&&n!==o.Guardian||!t&&!i),onDelete:s,absenceType:c},e.id)})})}),e4=a(65423),e9=a.n(e4);let e8=new eA.PO;var te=e=>{let{mode:t,groupID:a,userID:r,onAddAbsenceReport:n=()=>{},onDeleteAbsenceReport:s=()=>{}}=e,{t:l}=(0,Z.T_)(),[i,c]=(0,T.useState)(f.Z.getISO()),[u,_]=(0,T.useState)([]),[m,h]=(0,T.useState)([]),{settings:p}=(0,ez.rV)(),{checkinAbsenceEnabled:y,setCheckinAbsence:x,hasCheckinAbsence:b}=(0,eI.H9)(r,i,i),{deleteDeviation:v,hasAbsenceDeviation:k}=e0({userID:r,date:i,mode:t,enabled:p.NewChildcare}),j=(0,T.useCallback)(e=>{(a||t===o.Guardian||t===o.Admin||t===o.Student)&&eF(t,a,r,e).then(()=>{s(e),h(t=>t.filter(t=>t.id!==e)),y&&b&&x(!1),k&&v()})},[a,t,r,s,y,b,k,x,v]);(0,T.useEffect)(()=>{let e={greater_or_equal:{start_at:f.Z.getUTC(f.Z.startOfDay(i))},smaller_or_equal:{start_at:f.Z.getUTC(f.Z.endOfDay(i))}};return a&&e8.listEventAttendanceReports({group_id:a,user_id:r,query:{params:e}}).then(e=>{_(e.event_attendance_reports)}),eE({mode:t,userID:r,dateParams:e}).then(e=>{h(e.event_absence_reports)}),t===o.Guardian&&e8.listEventAttendanceReports({user_id:r,query:{params:e,order_by:{created_at:{index:0,desc:!1}}}}).then(e=>{_(e.event_attendance_reports)}),()=>{h([])}},[a,r,t,i]);let C=(0,T.useCallback)(e=>{h(t=>[e,...t]),n(e)},[n]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:e9().header,children:[(0,d.jsxs)(eN.Z,{weight:500,color:"secondary",children:[ef.Z.capitalize(f.Z.getDayname(i))," ",i]}),(0,d.jsxs)(g.Z,{gap:10,align:"center",children:[(0,d.jsx)(eU.Z,{"aria-label":l(Z.ZT.Common.Date),value:i,onChangeValue:c}),(0,d.jsx)(eV.Z,{onDecrement:()=>{c(f.Z.decrementDay(i))},onToday:()=>{c(f.Z.getISO())},onIncrement:()=>{c(f.Z.incrementDay(i))},decrementTooltip:l(Z.ZT.Date.PreviousDay),incrementTooltip:l(Z.ZT.Date.NextDay)})]})]}),0!==m.length?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:e9().subHeader,children:(0,d.jsx)("h4",{children:(0,E.Z)("Fr\xe5nvaroanm\xe4lningar")})}),(0,d.jsx)("div",{className:e9().content,children:(0,d.jsx)(e7,{reports:m,eventAttendees:u,date:i,mode:t,onDelete:j})})]}):null,(0,d.jsx)("div",{className:e9().subHeader,children:(0,d.jsx)("h4",{children:l(Z.ZT.Attendance.NewAbsenceReport)})}),(0,d.jsx)("div",{className:e9().content,children:(0,d.jsx)(e6,{groupID:a,userID:r,date:i,mode:t,checkinAbsenceEnabled:y,onCreateNewReport:C,reports:m})})]})},tt=a(45744),ta=a.n(tt);let tr=new eA.KD;var tn=e=>{let{mode:t,userIDs:a,groupID:r,onAddAbsenceReport:n,onDeleteAbsenceReport:s}=e,l=(0,eT.d)(),i=(0,eh.s0)(),{t:o}=(0,Z.T_)(),{userPreviews:c,addUserPreviews:u}=(0,ex.LM)(),[_,m]=(0,T.useState)(null),{pagination:h,limit:p,offset:y,setPage:f,response:b,setResponse:v}=(0,eP.Z)(),[k,j]=(0,T.useState)(""),[C,S]=(0,T.useState)([]),w=(0,T.useCallback)(()=>{tr.listUserPreviews({query:{params:{equals:{category:"Student"},like:{full_name:k}},order_by:{last_name:{index:0,desc:!1}},limit:p,offset:y},include_archived_students:!1}).then(e=>{S(e.users),v({total_count:e.total_count})})},[p,y,k,v]);if((0,T.useEffect)(()=>{w()},[w]),_)return(0,d.jsxs)(ew.ZP,{ref:l.ref,afterClose:()=>{i("..",{replace:!0})},height:"large",children:[(0,d.jsx)(ew.ZP.Header,{onBack:()=>{m(null)},children:(0,d.jsxs)(g.Z,{gap:10,align:"center",style:{marginInlineStart:10},children:[(0,d.jsx)(ex.Yt,{size:"md",user:c[_]}),(0,d.jsx)(eN.Z,{size:18,weight:500,children:c[_]?.full_name})]})}),(0,d.jsx)(ew.ZP.Content,{children:(0,d.jsx)(te,{mode:t,groupID:r,userID:_,onAddAbsenceReport:n,onDeleteAbsenceReport:s})})]});if(!a)return(0,d.jsxs)(ew.ZP,{ref:l.ref,afterClose:()=>{i("..",{replace:!0})},height:"large",children:[(0,d.jsx)(ew.ZP.Header,{children:(0,d.jsx)("h1",{children:o(Z.ZT.Choose.User)})}),(0,d.jsx)(ew.ZP.Content,{children:(0,d.jsx)(eM.Z,{pagination:h,paginationResponse:b,onChangePage:f,onChangeQuery:j,data:C,onClick:e=>{m(e.id),u({[e.id]:e})},contentLeft:e=>(0,d.jsxs)(g.Z,{gap:10,align:"center",children:[(0,d.jsx)(ex.Yt,{size:"md",user:e}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:e.full_name}),(0,d.jsx)("div",{className:ta().chipWrapper,children:e.class_user_group_title?(0,d.jsx)(eR.Z,{variant:"outlined",size:"xs",pill:!0,children:e.class_user_group_title}):null})]})]})})})]});let D=a.map(e=>c[e]).sort((e,t)=>(0,eL.Z)(e?.last_name??"",t?.last_name??"")).filter(e$.Z.isNotNullish);return(0,d.jsxs)(ew.ZP,{ref:l.ref,afterClose:()=>{i("..",{replace:!0})},height:"large",children:[(0,d.jsx)(ew.ZP.Header,{children:(0,d.jsx)("h1",{children:o(Z.ZT.Choose.User)})}),(0,d.jsx)(ew.ZP.Content,{padded:!0,children:(0,d.jsx)(eH.Z,{templateColumns:"repeat(2, 1fr)",gap:15,children:D.map(e=>(0,d.jsxs)(x.Z,{className:ta().userItem,onClick:()=>{m(e.id)},children:[(0,d.jsx)(ex.Yt,{user:e,size:"sm"}),(0,d.jsxs)(g.Z,{direction:"column",align:"flex-start",children:[(0,d.jsx)("p",{children:e.full_name}),e.class_user_group_title?(0,d.jsx)(eR.Z,{variant:"outlined",size:"xs",pill:!0,children:e.class_user_group_title}):null]})]},e.id))})})]})},ts=e=>{let{mode:t,userIDs:a,groupID:r,data:n,userPagination:s,onChangeWeek:l,onChangeGroupID:i,onChangeQuery:o,onChangeOrder:c}=e,{t:u}=(0,Z.T_)(),_=(0,T.useRef)(null),m=eS(),h=(0,eh.s0)(),g=(0,w.ge)(),y=()=>{g.invalidateListEventAbsenceReportsQuery({query:{}})},x=n.week,b=eZ(x,n.fullReportData);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(eh.Z5,{children:[(0,d.jsx)(eh.AW,{path:"/report",element:(0,d.jsx)(tn,{mode:t,userIDs:a,groupID:r,onAddAbsenceReport:()=>{y()},onDeleteAbsenceReport:()=>{y()}})}),(0,d.jsx)(eh.AW,{path:":reportID",element:(0,d.jsx)(eB,{reports:n.fullReportData,mode:t,groupID:r,onDeleteAbsenceReport:()=>{y()}})})]}),(0,d.jsx)(eu.Z,{onChangeQuery:o,data:n.reportData,pagination:s.pagination,ref:_,paginationResponse:{total_count:n.totalCount},onChangePage:s.setPage,onChangeSize:s.setSize,onChangeOrder:c,headerContent:{position:"top",content:(0,d.jsxs)("div",{className:eC().headerContent,children:[(0,d.jsx)("h4",{className:eC().headerContent__title,children:u(Z.ZT.Common.WeekNumber({week:f.Z.getWeek(f.Z.parseISOWeek(x))}))}),(0,d.jsx)("div",{className:eC().dateButtonGroup,children:(0,d.jsx)(e_.Z,{mode:em.j.Week,date:x,onCurrent:()=>{l(f.Z.getISOWeek())},onDecrement:()=>{l(f.Z.decrementISOWeek(x,1))},onIncrement:()=>{l(f.Z.incrementISOWeek(x,1))}})}),i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:eC().groupSelect,children:[(0,d.jsxs)("p",{className:j.X.Label_MD_Semibold,children:[u(Z.ZT.Class.Choose),":"]}),(0,d.jsxs)(p.Z,{value:r,onChangeValue:i,size:"sm",className:eC().groupSelect__select,"aria-label":u(Z.ZT.Group.Type.Group.Choose),children:[(0,d.jsx)("option",{value:"",children:u(Z.ZT.Workspace.NotSelected)}),m.map(e=>(0,d.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,d.jsx)(eo.Z,{size:16,orientation:"vertical",className:eC().desktopDivider})]}),(0,d.jsx)("div",{className:eC().desktopReportButton,children:(0,d.jsx)(ed.Z,{variant:"primary",size:"sm",href:"report",replace:!0,children:u(Z.ZT.Attendance.ReportAbsence)})})]})},isLoading:n.isPending,columns:b}),(0,d.jsx)("div",{className:eC().mobileReportButton,children:(0,d.jsx)(ec.Z,{onClick:()=>{h("report")},children:u(Z.ZT.Attendance.ReportAbsence)})})]})},tl=a(18591),ti=a(76648),to=a(45957),td=a(56957),tc=a.n(td);let tu=e=>{let t=w.Jb.useGetEventQuery({id:e});return{isReported:t.data?.event.reported??!1,eventTitle:t.data?.event.title??""}},t_=e=>{let t=(0,ti.Kt)(e=>e.courses)[e.course_id??""],{isReported:a,eventTitle:r}=tu(e.event_id);return{course:t,isReported:a,eventTitle:r,status:{label:ei.getLabelForEventAttendeeStatus(e.status),fontAwesomeIcon:ei.getIconForEventAttendeeStatus(e.status)}}};var tm=e=>{let{eventAttendee:t,editable:a,onClickEdit:r,onClose:n}=e,{t:s}=(0,Z.T_)(),{course:l,isReported:i,eventTitle:o,status:c}=t_(t),{eventAbsenceTypes:u}=D();return(0,d.jsxs)(to.Z,{rounded:!0,border:!0,shadow:!0,children:[(0,d.jsxs)("div",{className:tc().detailsHeader,children:[(0,d.jsxs)(g.Z,{gap:5,align:"center",children:[(0,d.jsx)("div",{className:tc().detailsHeader__box,style:{backgroundColor:ei.getBackgroundColorForEventAttendeeStatus(t.status),color:ei.getTextColorForEventAttendeeStatus(t.status)},children:(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:c.fontAwesomeIcon})}),(0,d.jsx)("p",{children:s(c.label)})]}),(0,d.jsx)(O.Z,{"aria-label":s(Z.ZT.Common.Close),variant:"tertiary",size:"sm",onClick:n,children:(0,d.jsx)(k.J,{name:"icon-xmark-24"})})]}),(0,d.jsxs)("div",{style:{padding:5},children:[l?(0,d.jsxs)(eN.Z,{size:14,color:"secondary",children:[(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:"books",style:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:20}}),l.title]}):o?(0,d.jsxs)(eN.Z,{size:14,color:"secondary",children:[(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:"tag",style:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:20}}),o]}):null,(0,d.jsxs)(eN.Z,{size:14,color:"secondary",children:[(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:"clock",style:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:20}}),s(Z.ZT.Common.MinutesCount({count:String(t.event_duration)}))]}),"AbsencePartial"===t.status?(0,d.jsxs)(eN.Z,{size:14,color:"secondary",children:[(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:"alarm-clock",style:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:20}}),s(Z.ZT.Common.MinutesCount({count:String(t.absence_duration)}))]}):null,"AbsenceReported"===t.status&&t.event_absence_type_id?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(eN.Z,{size:14,color:"secondary",children:[(0,d.jsx)(eD.Z,{variant:"duotone",fontAwesomeIcon:"question",style:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:20}}),s(Z.ZT.Attendance.Reason)]}),(0,d.jsx)("p",{style:{marginInlineStart:20,fontSize:14},children:s({key:u.find(e=>e.id===t.event_absence_type_id)?.title??""})})]}):null,t.comment?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(eN.Z,{size:14,color:"secondary",children:[(0,d.jsx)(eD.Z,{variant:"duotone",fontAwesomeIcon:"message-lines",style:{display:"inline-flex",justifyContent:"center",alignItems:"center",width:20}}),s(Z.ZT.Attendance.CommentToStudent)]}),(0,d.jsx)("p",{style:{marginInlineStart:20,fontSize:14},children:t.comment})]}):null,a&&i?(0,d.jsx)(O.Z,{"aria-label":s(Z.ZT.Common.Edit),variant:"tertiary",size:"sm",onClick:r,children:(0,d.jsx)(k.J,{name:"icon-pencil-24"})}):null]})]})},th=a(12255),tp=a.n(th);let tg=new eA.PO;var ty=e=>{let{visible:t,onClose:a,userGroupID:r,eventAttendee:n,onSubmitUpdate:s}=e,{t:l}=(0,Z.T_)(),i=(0,ti.Kt)(e=>e.courses),o=(0,ex.LM)(e=>e.userPreviews),{eventAbsenceTypes:c}=D(),[_,m]=(0,T.useState)(null),[h,p]=(0,T.useState)([]);(0,T.useEffect)(()=>{m(n)},[n]),(0,T.useEffect)(()=>{_?.start_at&&_?.end_at&&tg.listEventAbsenceReports({query:{params:{equals:{student_user_id:_.student_user_id},greater_or_equal:{start_at:f.Z.getUTC(_.start_at)},smaller_or_equal:{end_at:f.Z.getUTC(_.end_at)}}}}).then(e=>{p(e.event_absence_reports)})},[_?.student_user_id,_?.start_at,_?.end_at]);let x=(0,T.useMemo)(()=>(h?.filter(e=>e.student_user_id===n?.student_user_id).sort((e,t)=>ei.sortReportsByCreator(e,t,c)))[0],[h,n?.student_user_id,c]);if(!_)return null;let b=_.course_id?i[_.course_id]:void 0,v=o[_.student_user_id],k=async()=>{if(!_)return;let e=tg.updateEventAttendanceReportWithReturnObject({group_id:r,id:_.id,status:_.status,absence_duration:_.absence_duration,event_absence_report_id:_.event_absence_report_id,event_absence_type_id:_.event_absence_type_id,comment:_.comment,course_id:_.course_id});eW.FN.promise(e,l(Z.ZT.Toast.UpdatedLessonReporting)),s((await e).event_attendance_report),a()};return(0,d.jsxs)(ew.ZP,{visible:t,onClose:a,children:[(0,d.jsx)(ew.ZP.Header,{children:(0,d.jsx)("h1",{children:`${b?.title??l(Z.ZT.Attendance.WithoutCourse)} ${f.Z.getISOHour(_.start_at)}-${f.Z.getISOHour(_.end_at)}`})}),(0,d.jsxs)(ew.ZP.Content,{padded:!0,children:[(0,d.jsxs)(g.Z,{align:"center",justify:"space-between",children:[(0,d.jsxs)(g.Z,{align:"center",children:[(0,d.jsx)(ex.Yt,{size:"sm",user:v}),(0,d.jsx)("p",{style:{marginLeft:10,whiteSpace:"nowrap",fontWeight:600},children:v?.full_name})]}),(0,d.jsxs)(g.Z,{gap:5,align:"center",children:[(0,d.jsx)(K.AttendingButton,{eventAttendee:_,onUpdateEventAttendee:m}),(0,d.jsx)(K.AbsentButton,{eventAttendee:_,onUpdateEventAttendee:m,absenceReport:x}),(0,d.jsx)(K.PartiallyAbsentButton,{eventAttendee:_,onUpdateEventAttendee:m,eventStartDate:_.start_at,eventEndDate:_.end_at})]})]}),x?(0,d.jsxs)("div",{className:tp().reportChip,children:[(0,d.jsxs)("p",{children:[l({key:c.find(e=>e.id===x.event_absence_type_id)?.title??""})," ",(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:"clock",style:{marginInline:5}}),ei.isReportForEntireDay(x)?l(Z.ZT.Common.WholeDay):(0,d.jsxs)(d.Fragment,{children:[f.Z.getISOHour(x.start_at)," -"," ",f.Z.getISOHour(x.end_at)]})]}),x.description?(0,d.jsx)("p",{style:{fontStyle:"italic"},children:x.description}):null]}):null,(0,d.jsx)(eo.Z,{}),(0,d.jsx)(to.Z,{rounded:!0,border:!0,children:(0,d.jsx)(K.AdditionalInfo,{eventAttendee:_,onUpdateEventAttendee:m,courseID:n?.course_id,eventStartDate:_.start_at,hasReport:!!x,onCreateNewAbsenceReport:(e,t,a,r)=>{tg.createEventAbsenceReportWithReturnObject({event_absence_type_id:a,user_id:_.student_user_id,start_at:f.Z.getUTC(e),end_at:f.Z.getUTC(t),description:r}).then(e=>{p(t=>[...t,e.event_absence_report]),m({..._,status:u.b.EventAttendanceReportStatus.AbsenceReported,absence_duration:0,event_absence_type_id:a,event_absence_report_id:e.event_absence_report.id})})}})})]}),(0,d.jsxs)(ew.ZP.Footer,{children:[(0,d.jsx)("div",{}),(0,d.jsxs)("div",{children:[(0,d.jsx)(y.Z,{variant:"secondary",size:"md",onClick:a,children:l(Z.ZT.Common.Cancel)}),(0,d.jsx)(y.Z,{variant:"primary",size:"md",onClick:k,children:l(Z.ZT.Common.Save)})]})]})]})};let tx=new eA.PO,tf=e=>{let{defaultComponent:t,eventAttendee:a,editable:r,setSelectedEventAttendeeID:n}=e,[s,l]=(0,T.useState)(!1);return(0,d.jsxs)($.ZP.Root,{open:s,onChangeOpen:l,children:[(0,d.jsx)($.ZP.Target,{children:(0,d.jsxs)(x.Z,{options:{type:"element"},style:{display:"inline"},children:[t,a.comment?(0,d.jsx)(eD.Z,{variant:"duotone",fontAwesomeIcon:"message-lines",color:"theme",style:{position:"absolute",top:0,right:0,paddingTop:2,paddingRight:6}}):null]})}),(0,d.jsx)($.ZP.Element,{children:(0,d.jsx)(tm,{eventAttendee:a,editable:r,onClickEdit:()=>{n(a.id)},onClose:()=>{l(!1)}})})]})};var tb=(0,T.memo)(e=>{let{week:t,userID:a,userGroupID:r,editable:n}=e,{t:s}=(0,Z.T_)(),[l,i]=(0,T.useState)([]),[o,c]=(0,T.useState)(null),u=Array.from(new Set(l.map(e=>e.course_id))).filter(e$.Z.isNotNullish),_=(0,ti.w1)(u),m=(0,T.useMemo)(()=>l.filter(e=>f.Z.getISOWeek(e.start_at)===t).map(e=>({id:e.id,title:e?.course_id?_[e.course_id]?.title:s(Z.ZT.Attendance.WithoutCourse),day:tl.i.getDayNameFromDate(new Date(e.start_at)),startTime:f.Z.getISOHour(e.start_at),endTime:f.Z.getISOHour(e.end_at),color:ei.getBackgroundColorForEventAttendeeStatus(e.status),stripeColor:ei.getTextColorForEventAttendeeStatus(e.status)})),[l,_]);(0,T.useEffect)(()=>{tx.listEventAttendanceReports({group_id:r??void 0,user_id:a,query:{params:{greater_or_equal:{start_at:f.Z.getUTC(f.Z.startOfDay(f.Z.startOfWeek(f.Z.parseISOWeek(t))))},smaller_or_equal:{start_at:f.Z.getUTC(f.Z.endOfDay(f.Z.endOfWeek(f.Z.parseISOWeek(t))))}}}}).then(e=>{i(e.event_attendance_reports)})},[r,a,t]);let h=(0,T.useCallback)((e,t)=>{let a=l.find(t=>t.id===e.id);return a?(0,d.jsx)(tf,{eventAttendee:a,defaultComponent:t,editable:n,setSelectedEventAttendeeID:c}):null},[l,n]),p=f.Z.getISOWeek()===t?tl.i.getDayNameFromDate(new Date):void 0;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ty,{visible:!!o,onClose:()=>{c(null)},userGroupID:r,eventAttendee:l.find(e=>e.id===o)??null,onSubmitUpdate:e=>{i(t=>t.map(t=>t.id===e.id?e:t))}}),(0,d.jsx)(tl.u$,{weekNumber:Number(f.Z.getWeek(f.Z.parseISOWeek(t))),events:m,renderEvent:h,options:{enabledDays:[0,1,2,3,4],startHour:7,endHour:18},activeDay:p})]})}),tv=a(35992),tk=a(839),tZ=a(66065),tj=a.n(tZ),tC=e=>{let{children:t}=e;return(0,d.jsx)("table",{className:tj().attendanceOverviewTable,children:t})},tS=a(10844),tT=a.n(tS),tw=e=>{let{children:t}=e;return(0,d.jsx)("div",{className:tT().attendanceOverviewWrapper,children:t})},tD=a(7181),tN=a.n(tD),tI=e=>{let{eventAttendee:t,onEdit:a}=e,r=(0,ti.Kt)(e=>e.courses),{t:n}=(0,Z.T_)(),[s,l]=(0,T.useState)(!1);return(0,d.jsxs)($.ZP.Root,{open:s,onChangeOpen:l,children:[(0,d.jsx)($.ZP.Target,{children:(0,d.jsx)(x.Z,{className:tN().attendeeItem,style:{backgroundColor:ei.getBackgroundColorForEventAttendeeStatus(t.status),border:`2px solid ${t.comment?ei.getTextColorForEventAttendeeStatus(t.status):"transparent"}`},children:(0,d.jsxs)("p",{style:{color:ei.getTextColorForEventAttendeeStatus(t.status)},children:[(0,d.jsx)(eD.Z,{variant:"regular",fontAwesomeIcon:ei.getIconForEventAttendeeStatus(t.status),style:{fontSize:10,width:10,marginRight:5}}),t.course_id?r[t.course_id]?.short_name:n(Z.ZT.Attendance.WithoutCourse)]})})}),(0,d.jsx)($.ZP.Element,{children:(0,d.jsx)(tm,{eventAttendee:t,editable:void 0!==a,onClickEdit:()=>a?.(),onClose:()=>{l(!1)}})})]})},tA=a(23246),tW=a.n(tA),tO=e=>{let{calendarWeek:t,groupID:a}=e,{t:r}=(0,Z.T_)(),n=(0,eh.s0)(),[s,l]=(0,T.useState)(null),i=w.Jb.useListEventAttendanceReportsQuery({group_id:a,query:{params:{greater_or_equal:{start_at:f.Z.getUTC(f.Z.startOfWeek(f.Z.parseISOWeek(t)))},smaller_or_equal:{start_at:f.Z.getUTC(f.Z.endOfWeek(f.Z.parseISOWeek(t)))}}}}),o=(0,T.useMemo)(()=>i.data?.event_attendance_reports??[],[i]),c=o.map(e=>e.course_id).filter(e$.Z.isNotNullish);(0,ti.w1)(c);let u=(0,T.useMemo)(()=>Array.from(new Set(o.map(e=>e.student_user_id))),[o]),_=(0,ex.b1)(u),m=(0,T.useMemo)(()=>u.sort((e,t)=>(0,eL.Z)(_[e]?.last_name??"",_[t]?.last_name??"")),[u,_]);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ty,{visible:!!s,onClose:()=>{l(null)},userGroupID:a,eventAttendee:o.find(e=>e.id===s)??null,onSubmitUpdate:async()=>i.refetch()}),(0,d.jsx)(tw,{children:0===o.length||void 0===a?(0,d.jsx)("div",{className:tW().attendanceHeader__empty,children:(0,d.jsx)(tv.Z,{icon:(0,d.jsx)(k.J,{name:"icon-clipboard-24"}),text:(0,E.Z)(void 0===a?"V\xe4lj grupp f\xf6r att se n\xe4rvarostatistik":"Ingen n\xe4rvarostatisk finns att visa f\xf6r vald vecka.")})}):(0,d.jsx)(tk.Z,{custom:!0,children:(0,d.jsxs)(tC,{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:r(Z.ZT.Roles.Student)}),[,,,,,].fill(null).map((e,a)=>{let r=f.Z.setDay(f.Z.parseISOWeek(t),a);return(0,d.jsxs)("th",{style:{color:f.Z.sameDay(r)?"var(--color-text-brand-enabled)":void 0},children:[ef.Z.capitalize(f.Z.getDayname(r))," ",f.Z.getDay(r),"/",f.Z.getMonth(r)]},a)})]})}),(0,d.jsx)("tbody",{children:m.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsxs)(g.Z,{align:"center",gap:5,justify:"space-between",children:[(0,d.jsx)("span",{children:_[e]?.full_name}),(0,d.jsx)(O.Z,{"aria-label":r(Z.ZT.Common.View),variant:"tertiary",size:"sm",pill:!0,onClick:()=>{n(`./${e}`)},children:(0,d.jsx)(k.J,{name:"icon-chevron-right-24"})})]})}),[,,,,,].fill(null).map((a,r)=>{let n=f.Z.setDay(f.Z.parseISOWeek(t),r),s=o.filter(t=>f.Z.sameDay(t.start_at,n)&&t.student_user_id===e).sort((e,t)=>f.Z.getUnix(e.start_at)-f.Z.getUnix(t.start_at));return(0,d.jsx)("td",{children:(0,d.jsx)(g.Z,{gap:5,children:s.map(e=>(0,d.jsx)(tI,{eventAttendee:e,onEdit:()=>{l(e.id)}},e.id))})},r)})]},e))})]})})})]})},tF=a(16538);let tE=new eA.PO;var tB=e=>{let{userID:t,userGroupID:a,editable:r,onSelectWeek:n}=e,{t:s}=(0,Z.T_)(),[l,i]=(0,T.useState)(ee.Z.getCurrentSemester()),{startDate:o,endDate:c}=ee.Z.getStartAndEndDateForSemester(l),u=f.Z.getYear(ee.Z.getStartAndEndDateForSemester(ee.h.Spring).startDate),_=f.Z.getYear(ee.Z.getStartAndEndDateForSemester(ee.h.Fall).startDate),[m,h]=(0,T.useState)([]),[p,y]=(0,T.useState)(null),x=Array.from(new Set(m.map(e=>e.course_id).filter(e$.Z.isNotNullish)));(0,ti.w1)(x),(0,T.useEffect)(()=>{tE.listEventAttendanceReports({group_id:a??void 0,user_id:t,query:{params:{greater_or_equal:{start_at:f.Z.getUTC(f.Z.startOfDay(f.Z.startOfMonth(o)))},smaller_or_equal:{start_at:f.Z.getUTC(f.Z.endOfDay(f.Z.endOfMonth(c)))}}}}).then(e=>{h(e.event_attendance_reports)})},[a,t,o,c]);let b=f.Z.getWeeksWithinSpan(f.Z.startOfMonth(o),f.Z.before(c)?f.Z.endOfMonth(c):void 0);return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ty,{visible:!!p,onClose:()=>{y(null)},userGroupID:a,eventAttendee:m.find(e=>e.id===p)??null,onSubmitUpdate:e=>{h(t=>t.map(t=>t.id===e.id?e:t))}}),(0,d.jsx)(tw,{children:(0,d.jsxs)(tk.Z,{custom:!0,children:[(0,d.jsx)("div",{style:{padding:10,borderBottom:"1px solid var(--color-border-neutral-container-light)"},children:(0,d.jsxs)(tF.Z.Group,{"aria-label":(0,E.Z)("Termin"),children:[(0,d.jsx)(tF.Z,{label:(0,E.Z)(`HT ${_}`),checked:l===ee.h.Fall,onChange:()=>{i(ee.h.Fall)}}),(0,d.jsx)(tF.Z,{label:(0,E.Z)(`VT ${u}`),checked:l===ee.h.Spring,onChange:()=>{i(ee.h.Spring)}})]})}),(0,d.jsxs)(tC,{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:s(Z.ZT.Common.Week)}),[,,,,,].fill(null).map((e,t)=>(0,d.jsx)("th",{children:ef.Z.capitalize(f.Z.getDayname(f.Z.setDay(new Date,t)))},t))]})}),(0,d.jsx)("tbody",{children:b?.map(e=>d.jsxs("tr",{children:[d.jsx("td",{children:d.jsxs(g.Z,{align:"center",gap:5,justify:"space-between",children:[s(Z.ZT.Common.WeekNumberAlt({week:f.Z.getWeek(f.Z.parseISOWeek(e))})).toLowerCase(),e?d.jsx(O.Z,{"aria-label":E.Z("V\xe4lj vecka"),variant:"tertiary",pill:!0,size:"sm",onClick:()=>{n(e)},children:d.jsx(k.J,{name:"icon-chevron-right-24"})}):null]})}),[,,,,,].fill(null).map((t,a)=>{let n=f.Z.setDay(f.Z.parseISOWeek(e),a),s=m.filter(e=>f.Z.sameDay(e.start_at,n)).sort((e,t)=>f.Z.getUnix(e.start_at)-f.Z.getUnix(t.start_at));return d.jsx("td",{style:{backgroundColor:f.Z.sameDay(n)?"var(--color-surface-brand-lightest)":void 0},children:d.jsx(g.Z,{gap:5,children:s.map(e=>d.jsx(tI,{eventAttendee:e,onEdit:r?()=>{y(e.id)}:void 0},e.id))})},a)})]},e))})]})]})})]})},tR=a(88205);let tH=v.wh.object({groupID:v.wh.string().optional(),fromDate:v.wh.string(),toDate:v.wh.string(),percentage:v.wh.coerce.number().min(5,(0,E.Z)("Minst 5%")).max(100,(0,E.Z)("Max 100%")).optional(),status:v.wh.enum([i.Total,i.Reported,i.Unreported]),representBy:v.wh.enum([l.Lessons,l.Minutes]),showPercentage:v.wh.boolean()});var tP=a(6772),tM=a.n(tP),tL=e=>{let{open:t,app:a}=e,{t:r}=(0,Z.T_)(),{groupID:n}=(0,eh.UO)(),s="Admin"===a,{setFilter:o,filter:c,setIsFilterActive:u}=es(),{form:m}=(0,v.cI)({resolver:(0,v.FP)(tH),defaultValues:{groupID:n??"",fromDate:c.fromDate,toDate:c.toDate,status:c.status,representBy:c.representBy,showPercentage:c.showPercentage,percentage:c.percentage??void 0}});return(0,d.jsxs)(h.Z,{onSubmit:m.handleSubmit(e=>{if(u(!0),f.Z.after(e.fromDate,e.toDate)){m.setError("fromDate",{message:r(Z.ZT.Errors.Enddateafterstartdate)});return}t&&t(!1),o(e)}),className:tM().attendanceStatisticsFilter,children:[(0,d.jsx)("div",{className:tM().attendanceStatisticsFilter__date,children:(0,d.jsxs)("div",{children:[(0,d.jsx)(eU.Z,{...m.register("fromDate"),label:(0,E.Z)("Startdatum *"),"aria-label":r(Z.ZT.Common.StartDate)}),(0,d.jsx)(eU.Z,{...m.register("toDate"),label:(0,E.Z)("Slutdatum *"),"aria-label":r(Z.ZT.Common.EndDate)})]})}),(0,d.jsxs)("div",{className:tM().attendanceStatisticsFilter__percentage,children:[s?(0,d.jsxs)("div",{className:tM().percentage__amount,children:[(0,d.jsxs)("div",{className:S()(tM().percentage__label,j.X.Label_SM_Semibold),children:[(0,E.Z)("Visa elever med fr\xe5nvaro \xf6ver"),(0,d.jsx)(_.Z,{title:(0,E.Z)("V\xe4lj en procentenhet f\xf6r att visa elever med total, anm\xe4ld eller oanm\xe4ld fr\xe5nvaro \xf6ver den procenten."),children:(0,d.jsx)(k.J,{name:"icon-info-circle-outline-16"})})]}),(0,d.jsx)(F.Z,{...m.register("percentage"),"aria-label":(0,E.Z)("V\xe4lj procent"),inputMode:"numeric",endDecorator:"%",pattern:"[0-9]*",min:"5",max:"100"})]}):null,(0,d.jsx)("div",{className:tM().percentage__type,children:(0,d.jsxs)(tF.Z.Group,{label:s?"":(0,E.Z)("Visa fr\xe5nvaro som"),children:[(0,d.jsx)(tF.Z,{...m.register("status"),size:"sm",label:(0,E.Z)("Total"),value:i.Total}),(0,d.jsx)(tF.Z,{...m.register("status"),size:"sm",label:(0,E.Z)("Anm\xe4ld"),value:i.Reported}),(0,d.jsx)(tF.Z,{...m.register("status"),size:"sm",label:(0,E.Z)("Oanm\xe4ld"),value:i.Unreported})]})})]}),(0,d.jsxs)("div",{className:tM().attendanceStatisticsFilter__representBy,children:[(0,d.jsxs)("div",{className:S()(tM().percentage__label,j.X.Label_SM_Semibold),children:[(0,E.Z)("V\xe4lj enhet att visa fr\xe5nvaro i"),(0,d.jsx)(_.Z,{title:(0,E.Z)("Visa antalet lektioner eller minuter eleven varit fr\xe5nvarande under perioden."),children:(0,d.jsx)(k.J,{name:"icon-info-circle-outline-16"})})]}),(0,d.jsxs)("div",{className:tM().representBy__type,children:[(0,d.jsxs)(tF.Z.Group,{"aria-label":(0,E.Z)("V\xe4lj enhet att visa fr\xe5nvaro i"),children:[(0,d.jsx)(tF.Z,{...m.register("representBy"),size:"sm",label:r(Z.ZT.Common.Lessons),value:l.Lessons}),(0,d.jsx)(tF.Z,{...m.register("representBy"),size:"sm",label:r(Z.ZT.Common.Minutes),value:l.Minutes})]}),(0,d.jsxs)("div",{className:S()(tM().representBy__togglePercentage,j.X.Label_XS_Regular),children:[(0,E.Z)("Visa \xe4ven i antal procent")," ",(0,d.jsx)(tR.Z,{...m.register("showPercentage"),"aria-label":(0,E.Z)("Visa procent")})]})]})]}),(0,d.jsx)("div",{className:tM().attendanceStatisticsFilter__action,children:(0,d.jsx)(y.Z,{type:"submit",fullWidth:!0,variant:"primary",size:"md",children:(0,E.Z)("Visa")})})]})},t$=a(89314),tU=a.n(t$),tz=e=>{let{app:t}=e;return(0,d.jsxs)("div",{className:tU().attendanceStatisticsFirstVisit,children:[(0,d.jsxs)("div",{className:tU().attendanceStatisticsFirstVisit__text,children:[(0,d.jsx)("h5",{className:j.X.Heading_LG,children:(0,E.Z)("B\xf6rja med att filtrera")}),(0,d.jsx)("p",{className:j.X.Paragraph_SM_Regular,children:(0,E.Z)("Visa olika typer av fr\xe5nvaro per \xe4mne genom att filtrera nedan.")})]}),(0,d.jsx)(tL,{app:t})]})},tV=a(27968),tG=a(35555);let tJ=e=>e.absence_partial+e.absence_reported+e.absence_unreported+e.total_attendance,tq=e=>{let t=Math.floor(e/60),a=e%60;return 0===t?`${a}m`:0===a?`${t}h`:`${t}h ${a<10?"0":""}${a}m`},tX=e=>{let{value:t,total:a,representBy:r,usePercentage:n}=e,s=void 0===t||0===t?"":r===l.Minutes?tq(t):t,i=n&&t&&a?` (${(0,tV.Z)(t/a)})`:null;return null!==i?`${s}${i}`:s},tY=e=>{let{page:t,pageSize:a,users:r}=e,n=(t-1)*a;return r.slice(n,n+a)},tQ=e=>{(0,tG.Z)(e),eW.FN.success((0,E.Z)("Personnumret kopierat till urklipp"))};var tK=a(66303),t0=a(68516),t1=a.n(t0),t6=e=>{let{status:t,value:a,row:r}=e,{filter:n}=es();if(0===a)return"-";let s=tJ(r.original);return(0,d.jsxs)("div",{className:t1().barCell,children:[(0,d.jsx)(tK.Z,{orientation:"vertical",status:t,size:"16"}),(0,d.jsx)("p",{className:j.X.Label_SM_Regular,children:tX({value:a,total:s,representBy:n.representBy,usePercentage:n.showPercentage})})]})};let t5=(0,eg.Cl)(),t2=[t5.group({id:"status",header:e=>{let{table:t}=e;return t.options.meta?.t(Z.ZT.Common.Status)},columns:[t5.accessor("total_absence",{header:()=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.J,{name:"icon-user-xmark-16"}),(0,E.Z)("Total fr\xe5nvaro")]}),cell:e=>{let{row:t}=e;return(0,d.jsx)(t6,{status:"error",value:t.original.total_absence,row:t})}}),t5.accessor("absence_partial",{header:e=>{let{table:t}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.J,{name:"icon-clock-circle-outline-16"}),t.options.meta?.t(Z.ZT.Attendance.PartialAbsence)]})},cell:e=>{let{getValue:t,row:a}=e;return(0,d.jsx)(t6,{status:"error",value:t(),row:a})}}),t5.accessor("absence_reported",{header:e=>{let{table:t}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.J,{name:"icon-flag-outline-16"}),t.options.meta?.t(Z.ZT.Attendance.ReportedAbsence)]})},cell:e=>{let{getValue:t,row:a}=e;return(0,d.jsx)(t6,{status:"warning",value:t(),row:a})}}),t5.accessor("absence_unreported",{header:e=>{let{table:t}=e;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.J,{name:"icon-user-xmark-16"}),t.options.meta?.t(Z.ZT.Attendance.UnreportedAbsence)]})},cell:e=>{let{getValue:t,row:a}=e;return(0,d.jsx)(t6,{status:"error",value:t(),row:a})}}),t5.accessor("total_attendance",{header:()=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(k.J,{name:"icon-checkmark-circle-outline-16"}),(0,E.Z)("Total n\xe4rvaro")]}),cell:e=>{let{getValue:t,row:a}=e;return(0,d.jsx)(t6,{status:"success",value:t(),row:a})}})]})];var t3=a(74889),t7=a.n(t3),t4=e=>{let{name:t,identityNumber:a,onCopyToClipboard:r,showChevron:n=!0}=e;return(0,d.jsxs)("div",{className:S()(t7().identityNumberCell,{[t7()["identityNumberCell--showChevron"]]:n}),children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:j.X.Label_SM_Regular,children:t}),(0,d.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),r(a)},children:(0,d.jsx)(eR.Z,{variant:"outlined",size:"xs",endIcon:(0,d.jsx)(k.J,{name:"icon-copy-duplicate-16"}),children:a||(0,E.Z)("Personnummer saknas")})})]}),n?(0,d.jsx)("div",{className:t7().identityNumberCell__action,children:(0,d.jsx)(O.Z,{size:"xs","aria-label":(0,E.Z)("G\xe5 till profil"),variant:"tertiary",children:(0,d.jsx)(k.J,{name:"icon-chevron-right-24"})})}):null]})};let t9=(e,t)=>t===l.Minutes?e.total_attendance:e.total_attendance+e.absence_partial,t8=(e,t)=>{let a=e.absence_reported+e.absence_unreported;return t===l.Minutes?a+e.absence_partial:a},ae=()=>{let{pathname:e}=(0,eh.TH)();return e.startsWith("/student-overview")?"student-overview":"admin"};var at=a(69806),aa=a.n(at),ar=e=>{let{userPreviews:t,userID:a}=e,r=ae(),n=(0,eh.s0)(),s=t?.find(e=>e.id===a),l=s?.identity_number??(0,E.Z)("Personnummer saknas");return"student-overview"===r?(0,d.jsxs)("div",{className:S()(aa()["studentCell--mentor"]),children:[(0,d.jsx)("p",{className:j.X.Label_SM_Regular,children:s?.full_name??(0,E.Z)("Namn saknas")}),(0,d.jsx)(O.Z,{"aria-label":(0,E.Z)("Visa kontaktuppgifter"),size:"xs",variant:"tertiary",onClick:e=>{e.stopPropagation(),n(`?preview=${a}`)},children:(0,d.jsx)(k.J,{name:"icon-chevron-right-24"})})]}):(0,d.jsx)(t4,{name:s?.full_name??(0,E.Z)("Namn saknas"),identityNumber:l,onCopyToClipboard:()=>{tQ(l)},showChevron:!0})},an=a(86793),as=a.n(an);let al=(0,eg.Cl)();var ai=e=>{let{userPreviews:t,representBy:a,usePercentage:r}=e,{eventAbsenceTypes:n}=D();return{columns:[al.accessor("userID",{header:e=>{let{table:t}=e;return t.options.meta?.t(Z.ZT.Roles.Student)},size:202,meta:{pinned:"desktop"},cell:e=>{let{row:a}=e;return(0,d.jsx)(ar,{userPreviews:t,userID:a.original.userID})}}),...t2,al.group({id:"absence_type",header:e=>{let{table:t}=e;return t.options.meta?.t(Z.ZT.Attendance.AbsenceTypes)},columns:n.map(e=>al.accessor(t=>{let a=t.absenceTypeStats.find(t=>t.event_absence_type_id===e.id);return a?.total_absence},{id:e.id,header:t=>{let{table:a}=t;return a.options.meta?.t({key:e.title??""})},cell:e=>{let{getValue:t,row:n}=e,s=n.original.absenceTypeStats.reduce((e,t)=>e+t.total_absence,0),l=tX({value:t(),total:s,representBy:a,usePercentage:r});return""===l?"-":(0,d.jsx)(eR.Z,{variant:"filled",size:"xs",startIcon:(0,d.jsx)(k.J,{name:"icon-exclamation-circle-outline-16"}),className:S()([as()["attendanceStatisticsTable__chip--warning"]]),children:l})}}))})]}},ao=a(13470),ad=a.n(ao),ac=e=>{let{attendanceStatsData:t,attendanceStatsGroupedByAbsenceTypeData:a}=e,r=(0,T.useRef)(null),{filter:n}=es(),{pagination:s,setPage:l,setSize:i}=(0,eP.Z)(),o=(0,eh.s0)(),c=(0,T.useMemo)(()=>Object.keys(t),[t]),{data:u}=w.Ck.useListUserPlacementsQuery({query:{params:{in:{id:c}}},include_archived_students:!1}),_=Object.entries(t).map(e=>{let t,[r,s]=e;switch(n.representBy){case"Minutes":t=s.absence_reported+s.absence_unreported+s.absence_partial;break;case"Lessons":t=s.absence_reported+s.absence_unreported;break;default:t=0}return{userID:r,absenceTypeStats:a[r]??[],...s,total_absence:t}}),m=tY({page:s.page,pageSize:s.size,users:_}),{columns:h}=ai({userPreviews:u?.user_placements??[],representBy:n.representBy,usePercentage:n.showPercentage});return 0===m.length?(0,d.jsx)("div",{className:ad().attendanceStatisticsTable__empty,children:(0,d.jsx)(tv.Z,{icon:(0,d.jsx)(k.J,{name:"icon-clipboard-24"}),text:(0,E.Z)("Ingen n\xe4rvarostatisk finns att visa f\xf6r valda filter, justera din filtrering.")})}):(0,d.jsx)(eu.Z,{className:ad().attendanceStatisticsTable,data:m,pagination:s,paginationResponse:{total_count:_.length},onRowClick:e=>{o(`../absence-type/${e.userID}`)},onChangePage:l,onChangeSize:i,ref:r,isLoading:0===m.length,columns:h,fullHeight:!0})},au=e=>{let{groupID:t,app:a}=e,{filter:r,isFilterActive:n}=es(),s="Admin"===a,{data:l}=w.Jb.useListEventAttendanceReportStatsQuery({group_id:t??void 0,from_date:r.fromDate,to_date:r.toDate,represent_by:r.representBy,minimum_absence_ratio:s?r.percentage:0,status:r.status}),{data:i}=w.Jb.useListEventAttendanceReportStatsGroupedByAbsenceTypeQuery({group_id:t??void 0,from_date:r.fromDate,to_date:r.toDate,represent_by:r.representBy,minimum_absence_ratio:s?r.percentage:0,status:r.status});return l&&i?n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eh.j3,{}),(0,d.jsx)(ac,{attendanceStatsData:l?.event_attendance_report_stats_mapped_by_user_id,attendanceStatsGroupedByAbsenceTypeData:i?.event_attendance_report_stats_grouped_by_absence_type_mapped_by_user_id})]}):(0,d.jsx)(tz,{app:a}):void 0},a_=a(72608),am=a.n(a_);let ah=(0,eg.Cl)();var ap=e=>{let{userPreviews:t,courseIDs:a}=e,r=(0,ti.w1)(a.filter(e$.Z.isNotNullish)),{filter:n}=es();return{columns:[ah.accessor("userID",{header:e=>{let{table:t}=e;return t.options.meta?.t(Z.ZT.Roles.Student)},size:202,meta:{pinned:"desktop"},cell:e=>{let{row:a}=e;return(0,d.jsx)(ar,{userPreviews:t,userID:a.original.userID})}}),...t2,...a.map(e=>ah.group({id:e??"without",header:t=>{let{table:a}=t;return r[e??""]?.code??a.options.meta?.t(Z.ZT.Attendance.WithoutCourse)},columns:[ah.accessor(t=>{let a=t.courseStats.find(t=>t.course_id===e);return a?t9(a,n.representBy):0},{id:`${e??"without"}-attendance`,header:e=>{let{table:t}=e;return t.options.meta?.t(Z.ZT.Attendance.Attendance)},size:160,cell:t=>{let{getValue:a,row:r}=t;if(0===a())return"-";let s=r.original.courseStats.find(t=>t.course_id===e),l=s?t8(s,n.representBy):0;return(0,d.jsx)(eR.Z,{size:"xs",variant:"filled",startIcon:(0,d.jsx)(k.J,{name:"icon-checkmark-16"}),className:S()([am()["attendanceStatisticsTable__chip--success"]]),children:tX({value:a(),total:a()+l,representBy:n.representBy,usePercentage:n.showPercentage})})}}),ah.accessor(t=>{let a=t.courseStats.find(t=>t.course_id===e);return a?t8(a,n.representBy):0},{id:`${e??"without"}-absence`,header:e=>{let{table:t}=e;return t.options.meta?.t(Z.ZT.Attendance.Absence)},size:160,cell:t=>{let{getValue:a,row:r}=t;if(0===a())return"-";let s=r.original.courseStats.find(t=>t.course_id===e),l=s?t9(s,n.representBy):0;return(0,d.jsx)(eR.Z,{variant:"filled",size:"xs",startIcon:(0,d.jsx)(k.J,{name:"icon-exclamation-circle-outline-16"}),className:S()([am()["attendanceStatisticsTable__chip--warning"]]),children:tX({value:a(),total:a()+l,representBy:n.representBy,usePercentage:n.showPercentage})})}})]}))]}},ag=a(5697),ay=a.n(ag),ax=e=>{let{attendanceStatsData:t,attendanceStatsGroupedByCourseData:a}=e,r=(0,T.useRef)(null),{filter:n}=es(),{pagination:s,setPage:l,setSize:i}=(0,eP.Z)(),o=(0,eh.s0)(),c=(0,T.useMemo)(()=>Array.from(new Set(Object.values(a).flatMap(e=>e.map(e=>e.course_id)))),[a]),u=(0,T.useMemo)(()=>Object.keys(t),[t]),{data:_}=w.Ck.useListUserPlacementsQuery({query:{params:{in:{id:u}}},include_archived_students:!1}),m=Object.entries(t).map(e=>{let t,[r,s]=e;switch(n.representBy){case"Minutes":t=s.absence_reported+s.absence_unreported+s.absence_partial;break;case"Lessons":t=s.absence_reported+s.absence_unreported;break;default:t=0}return{userID:r,courseStats:a[r]??[],...s,total_absence:t}}),h=tY({page:s.page,pageSize:s.size,users:m}),{columns:p}=ap({userPreviews:_?.user_placements??[],courseIDs:c});return 0===h.length?(0,d.jsx)("div",{className:ay().attendanceStatisticsTable__empty,children:(0,d.jsx)(tv.Z,{icon:(0,d.jsx)(k.J,{name:"icon-clipboard-24"}),text:(0,E.Z)("Ingen n\xe4rvarostatisk finns att visa f\xf6r valda filter, justera din filtrering.")})}):(0,d.jsx)(eu.Z,{className:ay().attendanceStatisticsTable,data:h,pagination:s,paginationResponse:{total_count:h.length},onRowClick:e=>{o(`../course/${e.userID}`)},onChangePage:l,onChangeSize:i,ref:r,isLoading:0===h.length,columns:p,fullHeight:!0})},af=e=>{let{groupID:t,app:a}=e,{filter:r,isFilterActive:n}=es(),s="Admin"===a,{data:l}=w.Jb.useListEventAttendanceReportStatsQuery({group_id:t??void 0,from_date:r.fromDate,to_date:r.toDate,represent_by:r.representBy,minimum_absence_ratio:s?r.percentage:0,status:r.status}),{data:i}=w.Jb.useListEventAttendanceReportStatsGroupedByCourseQuery({group_id:t??void 0,from_date:r.fromDate,to_date:r.toDate,represent_by:r.representBy,minimum_absence_ratio:s?r.percentage:0,status:r.status});return l&&i?n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eh.j3,{}),(0,d.jsx)(ax,{attendanceStatsData:l?.event_attendance_report_stats_mapped_by_user_id,attendanceStatsGroupedByCourseData:i?.event_attendance_report_stats_grouped_by_course_mapped_by_user_id})]}):(0,d.jsx)(tz,{app:a}):void 0},ab=a(27285),av=a(81052),ak=a(33643),aZ=a.n(ak),aj=(0,T.memo)(e=>{let{legendItems:t,columns:a}=e,{t:r}=(0,Z.T_)();return(0,d.jsx)("div",{className:S()(aZ().legends,{[aZ()["legends--twoColumns"]]:2===a}),children:t.map((e,t)=>(0,d.jsxs)("div",{className:aZ().legend__container,children:[(0,d.jsx)("div",{className:S()(aZ().legend__icon,{[aZ()["legend--danger"]]:"danger"===e.status,[aZ()["legend--warning"]]:"warning"===e.status,[aZ()["legend--success"]]:"success"===e.status,[aZ()["legend--neutral"]]:"neutral"===e.status,[aZ()["legend--primary"]]:"primary"===e.status,[aZ()["legend--primary-border"]]:"primary-border"===e.status}),children:e.icon}),(0,d.jsx)("p",{className:j.X.Label_XS_Regular,children:r(e.translation)})]},t))})});let aC=[{translation:Z.ZT.Attendance.Attending,icon:(0,d.jsx)(k.J,{name:"icon-checkmark-16"}),status:"success"},{translation:Z.ZT.Attendance.ReportedAbsence,icon:(0,d.jsx)(k.J,{name:"icon-xmark-16"}),status:"warning"},{translation:Z.ZT.Attendance.UnreportedAbsence,icon:(0,d.jsx)(k.J,{name:"icon-xmark-16"}),status:"danger"},{translation:Z.ZT.Attendance.PartialAbsence,icon:(0,d.jsx)(k.J,{name:"icon-clock-circle-outline-16"}),status:"warning"},{translation:Z.ZT.Attendance.NotReported,icon:(0,d.jsx)(k.J,{name:"icon-minus-16"}),status:"neutral"},{translation:Z.ZT.Attendance.WithComment,icon:void 0,status:"primary-border"}];var aS=a(87987),aT=a.n(aS),aw=()=>{let e=(0,eh.s0)(),{t}=(0,Z.T_)(),a=(0,ab.Z)({defaultOpen:!0,afterClose:()=>{e(-1)}}),{userGroupID:r,week:n,userID:s}=(0,eh.UO)();if(!s)throw Error("userID is undefined");let l=(0,ex.dl)(s??void 0);return(0,d.jsx)(av.Z,{open:a.isOpen,onClose:a.close,"aria-label":(0,E.Z)("Katalog"),className:aT().attendanceModal,children:n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Z,{gap:5,align:"center",style:{borderBottom:"1px solid var(--color-border-neutral-container-light)",padding:5},children:[(0,d.jsx)(O.Z,{"aria-label":t(Z.ZT.Common.Back),variant:"tertiary",size:"sm",pill:!0,onClick:()=>{e(-1)},children:(0,d.jsx)(k.J,{name:"icon-chevron-left-24"})}),(0,d.jsxs)("p",{children:[l?.full_name," - ",t(Z.ZT.Common.WeekNumber({week:f.Z.getWeek(f.Z.parseISOWeek(n))}))]})]}),(0,d.jsx)(tb,{week:n,userID:s,userGroupID:r,editable:!0})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(g.Z,{align:"center",justify:"space-between",style:{borderBottom:"1px solid var(--color-border-neutral-container-light)",padding:5},children:[(0,d.jsxs)(g.Z,{align:"center",gap:5,children:[(0,d.jsx)(O.Z,{"aria-label":t(Z.ZT.Common.Back),variant:"tertiary",size:"sm",pill:!0,onClick:()=>{a.close()},children:(0,d.jsx)(k.J,{name:"icon-chevron-left-24"})}),(0,d.jsx)("p",{children:l?.full_name})]}),(0,d.jsx)(aj,{legendItems:aC})]}),(0,d.jsx)(tB,{userGroupID:r,userID:s,onSelectWeek:t=>{e(`./${t}`)},editable:!0})]})})},aD=a(69203),aN=a(84287),aI=e=>{let{phoneNumber:t,...a}=e;return(0,d.jsx)(x.Z,{...a,style:{textDecoration:"underline",...a?.style},to:`tel:${t}`,children:t})},aA=a(38095),aW=a.n(aA),aO=e=>{let{attendeeNotification:t,onConfirm:a,onUpdate:r,children:n}=e,{t:s}=(0,Z.T_)(),[l,i]=(0,T.useState)(!1),o=(0,ex.dl)(t.student_user_id),c=(0,T.useMemo)(()=>o?[...o.guardian_user_ids,t.confirmed_by_guardian_user_id,t.confirmed_by_employee_user_id].filter(e$.Z.isNotNullish):[],[o,t]),u=(0,ex.b1)(c),_=u[t.confirmed_by_guardian_user_id??""],m=u[t.confirmed_by_employee_user_id??""],h=o?.guardian_user_ids??[];return(0,d.jsxs)($.ZP.Root,{open:l,onChangeOpen:i,placement:"right-start",enableTransition:!0,children:[(0,d.jsx)($.ZP.Target,{children:(0,d.jsx)(x.Z,{options:{type:"element"},children:n})}),(0,d.jsx)($.ZP.Element,{children:(0,d.jsxs)("div",{className:aW().popup,children:[_?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eN.Z,{color:"secondary",variant:"h5",weight:500,children:s(Z.ZT.Attendance.ConfirmedByGuardian)}),(0,d.jsxs)(g.Z,{align:"center",gap:10,children:[(0,d.jsx)(ex.Yt,{size:"xs",user:_}),(0,d.jsx)("p",{children:_.full_name})]})]}):null,m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eN.Z,{color:"secondary",variant:"h5",weight:500,children:s(Z.ZT.Attendance.ConfirmedByPersonnel)}),(0,d.jsxs)(g.Z,{align:"center",gap:10,children:[(0,d.jsx)(ex.Yt,{size:"xs",user:m}),(0,d.jsx)("p",{children:m.full_name})]})]}):null,a&&!_?(0,d.jsxs)(d.Fragment,{children:[h?.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eN.Z,{color:"secondary",variant:"h5",weight:500,children:s(Z.ZT.Common.Guardians)}),h.map(e=>{let t=u[e];return t?(0,d.jsxs)(g.Z,{gap:5,children:[(0,d.jsx)(ex.Yt,{user:t,size:"sm"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{style:{lineHeight:1.2},children:t.full_name}),(0,d.jsx)(eN.Z,{size:12,color:"secondary",style:{lineHeight:1.2},children:t.phone_number1?(0,d.jsx)(aI,{phoneNumber:t.phone_number1}):s(Z.ZT.Common.MissingPhoneNumber)})]})]},e):null})]}):null,(0,d.jsx)(y.Z,{variant:"primary",fullWidth:!0,size:"sm",onClick:()=>{a(),i(!1)},children:s(Z.ZT.Attendance.GuardiansNoteAbsence)})]}):null,r?(0,d.jsx)(y.Z,{variant:"secondary",fullWidth:!0,size:"sm",onClick:()=>{r(),i(!1)},children:s(Z.ZT.Attendance.CorrectReportedAbsence)}):null]})})]})},aF=a(7373),aE=a.n(aF);let aB=(0,T.memo)(e=>{let{attendeeNotification:t,event:a,attendee:r,absenceReports:n,onConfirm:s,onUpdate:l}=e,i=(0,ti.Kt)(e=>e.courses),o=a.course_id?i[a.course_id]:void 0,c=t.confirmed_by_guardian_user_id||t.confirmed_by_employee_user_id||t.sent_email||t.sent_sms?"handled":"unhandled",u=0!==n.length;return(0,d.jsx)(aO,{attendeeNotification:t,onConfirm:"unhandled"===c?()=>{s(t.id)}:void 0,onUpdate:u?()=>{n[0]&&l(t.id,r,n[0])}:void 0,children:(0,d.jsxs)("div",{className:S()(aE().attendeeNotification,{[aE()["attendeeNotification--handled"]]:"handled"===c}),children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{children:a?.title||o?.title}),(0,d.jsxs)("p",{children:[f.Z.getISOHour(a.start_at),"-",f.Z.getISOHour(a.end_at)]})]}),(0,d.jsxs)(g.Z,{gap:5,children:[t.sent_email?(0,d.jsx)(k.J,{name:"icon-envelope-16"}):null,t.sent_sms?(0,d.jsx)(k.J,{name:"icon-comment-lines-outline-16"}):null,t.sent_notification?(0,d.jsx)(k.J,{name:"icon-megaphone-16"}):null,t.confirmed_by_guardian_user_id?(0,d.jsx)(k.J,{name:"icon-checkmark-16"}):null,t.confirmed_by_employee_user_id?(0,d.jsx)(k.J,{name:"icon-checkmark-double-16"}):null]})]})})}),aR=[{translation:Z.ZT.Attendance.ReceivedSms,status:"primary",icon:(0,d.jsx)(k.J,{name:"icon-comment-lines-outline-16"})},{translation:Z.ZT.Attendance.ReceivedEmail,status:"primary",icon:(0,d.jsx)(k.J,{name:"icon-envelope-16"})},{translation:Z.ZT.Attendance.ReceivedNotice,status:"primary",icon:(0,d.jsx)(k.J,{name:"icon-bell-outline-16"})},{translation:Z.ZT.Attendance.ConfirmedByGuardian,status:"primary",icon:(0,d.jsx)(k.J,{name:"icon-checkmark-16"})},{translation:Z.ZT.Attendance.ConfirmedByPersonnel,status:"primary",icon:(0,d.jsx)(k.J,{name:"icon-checkmark-double-16"})}];var aH=a(67806),aP=a.n(aH);let aM=new eA.PO;var aL=e=>{let{onFetchAttendeeNotifications:t,onFetchEventAttendees:a,onFetchAbsenceReports:r,onConfirmNotificationManually:n,onUpdateEventAttendee:s}=e,{t:l}=(0,Z.T_)(),i=(0,aD.Z)(),{userID:o}=(0,b.Tt)(),[c,u]=(0,T.useState)(f.Z.getISOWeek()),[_,m]=(0,T.useState)([]),[h,p]=(0,T.useState)({}),[y,x]=(0,T.useState)([]),[v,k]=(0,T.useState)([]);(0,T.useEffect)(()=>{t(f.Z.getISO(f.Z.startOfWeek(f.Z.parseISOWeek(c))),f.Z.getISO(f.Z.endOfWeek(f.Z.parseISOWeek(c)))).then(e=>{m(e)})},[t,c]),(0,T.useEffect)(()=>{a(f.Z.getISO(f.Z.startOfWeek(f.Z.parseISOWeek(c))),f.Z.getISO(f.Z.endOfWeek(f.Z.parseISOWeek(c)))).then(e=>{x(e)})},[a,c]),(0,T.useEffect)(()=>{r(f.Z.getISO(f.Z.startOfWeek(f.Z.parseISOWeek(c))),f.Z.getISO(f.Z.endOfWeek(f.Z.parseISOWeek(c)))).then(e=>{k(e)})},[r,c]);let j=(0,T.useMemo)(()=>Array.from(new Set(_.map(e=>e.student_user_id))),[_]),C=(0,ex.b1)(j),S=(0,T.useMemo)(()=>Array.from(new Set(_.map(e=>e.event_id))),[_]);(0,T.useEffect)(()=>{let e=S.filter(e=>!h[e]);0!==e.length&&aM.listEventsByIDs({ids:e}).then(e=>{p(t=>({...t,...e$.Z.convertToRecord(e.events,"id")}))})},[S,h]);let w=(0,T.useMemo)(()=>Array.from(new Set(Object.values(h).map(e=>e.course_id))).filter(e$.Z.isNotNullish),[h]);(0,ti.w1)(w);let D=(0,T.useCallback)(e=>{n(e).then(()=>{m(t=>t.map(t=>t.id===e?{...t,confirmed_by_employee_user_id:o}:t))})},[n,o]),N=(0,T.useCallback)((e,t,a)=>{s(t,a).then(()=>{m(t=>t.filter(t=>t.id!==e))})},[s]),I=(0,T.useMemo)(()=>(0,ex.nY)(j.map(e=>C[e]).filter(e$.Z.isNotNullish)).map(e=>e?.id)??[],[j,C]);return(0,d.jsxs)("div",{className:aP().attendeeNotifications,children:[(0,d.jsxs)("div",{className:aP().attendeeNotifications__header,children:[(0,d.jsx)("div",{children:(0,d.jsx)(eN.Z,{variant:"h4",weight:400,children:l(Z.ZT.Common.WeekNumber({week:f.Z.getWeek(f.Z.parseISOWeek(c))}))})}),(0,d.jsx)("div",{children:(0,d.jsx)(eV.Z,{onDecrement:()=>{u(f.Z.decrementISOWeek(c))},onToday:()=>{u(f.Z.getISOWeek())},onIncrement:()=>{u(f.Z.incrementISOWeek(c))},decrementTooltip:l(Z.ZT.Date.PreviousWeek),incrementTooltip:l(Z.ZT.Date.NextWeek)})}),(0,d.jsx)("div",{children:(0,d.jsx)(aj,{columns:i?2:3,legendItems:aR})})]}),0===_.length?(0,d.jsx)(g.Z,{center:!0,style:{paddingBlock:20},children:(0,d.jsx)(aN.Z,{})}):(0,d.jsx)(tk.Z,{custom:!0,children:(0,d.jsxs)("table",{className:aP().attendeeNotifications__table,children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{}),[,,,,,].fill(null).map((e,t)=>{let a=f.Z.setDay(f.Z.parseISOWeek(c),t);return(0,d.jsxs)("td",{style:{color:f.Z.sameDay(a)?"var(--color-text-brand-enabled)":void 0},children:[ef.Z.capitalize(f.Z.getDayname(a))," ",f.Z.getDay(a),"/",f.Z.getMonth(a)]},t)})]})}),(0,d.jsx)("tbody",{children:I.map(e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:(0,d.jsxs)("div",{className:aP().userCard,children:[(0,d.jsx)(ex.Yt,{user:C[e],size:"sm"}),(0,d.jsx)("p",{children:C[e]?.full_name})]})}),[,,,,,].fill(null).map((t,a)=>{let r=f.Z.setDay(f.Z.parseISOWeek(c),a),n=_.filter(t=>{let a=h[t.event_id];return t.student_user_id===e&&a&&f.Z.sameDay(a.start_at,r)});return(0,d.jsx)("td",{children:(0,d.jsx)(g.Z,{direction:"column",gap:5,children:n.map(t=>{let a=h[t.event_id],r=y.find(e=>e.id===t.event_attendance_report_id);return a&&r?(0,d.jsx)(aB,{attendeeNotification:t,attendee:r,absenceReports:v.filter(t=>f.Z.intervalsOverlapping(t.start_at,t.end_at,r.start_at,r.end_at)&&t.student_user_id===e),event:a,onConfirm:D,onUpdate:N},t.id):null})})},a)})]},e))})]})})]})}},18591:function(e,t,a){"use strict";a.d(t,{i:function(){return d},u$:function(){return z},$M:function(){return ek},Co:function(){return ej},E_:function(){return eD},Im:function(){return eC},WR:function(){return eT},Y$:function(){return eN},Gq:function(){return n},ki:function(){return eS}});var r=a(57748);let n=()=>{let e=r.Jb.useListEventTypesQuery({query:{}},{staleTime:1/0});return{eventTypes:e.data?.event_types??[],isLoading:e.isPending}};var s=a(12157),l=a(92575),i=a(74934);let o=["var(--color-surface-userselect-category1-lighter)","var(--color-surface-userselect-category2-lighter)","var(--color-surface-userselect-category3-lighter)","var(--color-surface-userselect-category4-lighter)","var(--color-surface-userselect-category5-lighter)","var(--color-surface-userselect-category6-lighter)","var(--color-surface-userselect-category7-lighter)","var(--color-surface-userselect-category8-lighter)"];class d{static getCalendarHours(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,a=[];for(let r=e;r<t;r++){let e=r<10?`0${r}:00`:`${r}:00`;a.push(e)}return a}static getEventHeight(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getCalendarHours().length,r=Number(s.Z.getMillisecondTimestamp(e));return 100/a/60*(Number(s.Z.getMillisecondTimestamp(t))-r)/6e4}static getEventTopOffset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getCalendarHours().length,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=100/t;return r*(Number(s.Z.getHour(e))-a)+Number(s.Z.getMinute(e))*(r/60)}static #e=this.getEventStatus=(e,t)=>{if(!e)return 0;let a=s.Z.withinSpan(e.start_at,e.end_at,t),r=s.Z.before(t,e.start_at);return a?1:r?0:2};static #t=this.getEventProgress=(e,t)=>{let a=new Date(e),r=new Date(t),n=new Date;if(n>r)return 100;if(n>a){let a=s.Z.getMinutesBetweenDates(e,t);return s.Z.getMinutesBetweenDates(e,n)/a*100}return 0};static #a=this.isEventFullDay=e=>e.duration>=1439;static #r=this.getDayNameFromDate=e=>{switch(e.getDay()){case 0:return"sunday";case 1:return"monday";case 2:return"tuesday";case 3:return"wednesday";case 4:return"thursday";case 5:return"friday";case 6:return"saturday";default:throw Error("Invalid day")}};static #n=this.getDayNameTranslation=e=>{switch(e){case"monday":return l.ZT.Weekdays.Monday;case"tuesday":return l.ZT.Weekdays.Tuesday;case"wednesday":return l.ZT.Weekdays.Wednesday;case"thursday":return l.ZT.Weekdays.Thursday;case"friday":return l.ZT.Weekdays.Friday;case"saturday":return l.ZT.Weekdays.Saturday;case"sunday":return l.ZT.Weekdays.Sunday}};static #s=this.getDayNameTranslationShort=e=>{switch(e){case"monday":return l.ZT.Weekdays.MondayShort;case"tuesday":return l.ZT.Weekdays.TuesdayShort;case"wednesday":return l.ZT.Weekdays.WednesdayShort;case"thursday":return l.ZT.Weekdays.ThursdayShort;case"friday":return l.ZT.Weekdays.FridayShort;case"saturday":return l.ZT.Weekdays.SaturdayShort;case"sunday":return l.ZT.Weekdays.SundayShort}};static #l=this.getDayNameFromIndex=e=>{switch(e){case 0:return"monday";case 1:return"tuesday";case 2:return"wednesday";case 3:return"thursday";case 4:return"friday";case 5:return"saturday";case 6:return"sunday";default:throw Error("Invalid day")}};static #i=this.getEndTimeFromDuration=(e,t)=>{let a=`${s.Z.getISO()}T${e}`,r=s.Z.incrementMinutes(a,t);return s.Z.formatHelper(r,"HH:mm")};static #o=this.getColorForEntry=e=>i.Z.getIndexByUUID(o,e)}var c=a(27573),u=a(839),_=a(96669),m=a(45531),h=a.n(m),p=a(7653);let g=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],y=(e,t)=>{let a=Math.floor(e/t.stepsPerHour),r=e%t.stepsPerHour*(60/t.stepsPerHour);return`${a<10?"0":""}${a}:${r<10?"0":""}${r}`};var x=a(76824),f=a.n(x);let b=(0,p.memo)(e=>{let{options:t,onCreate:a}=e,r=(0,p.useRef)(0),n=(0,p.useRef)(!1),[s,l]=(0,p.useState)([]),[i,o]=(0,p.useState)(0),d=(0,p.useCallback)((e,t)=>{n.current=!0,o(e),r.current=t},[]),u=(0,p.useCallback)((e,s)=>{if(n.current){if(s>r.current){let n=y(r.current,t),l=y(s,t),i=g[e];void 0!==i&&a(i,n,l)}n.current=!1,r.current=0,l([])}},[a,t]),_=(0,p.useCallback)(e=>{if(!n.current)return;let a=e.currentTarget.getBoundingClientRect(),s=Math.floor((e.clientY-a.top)/(60/t.stepsPerHour));if(s<=r.current){l([r.current]);return}l(Array(s-r.current).fill(r.current).map((e,t)=>e+t))},[t.stepsPerHour]),m=(0,p.useCallback)(()=>{n.current=!1,r.current=0,l([])},[]);return(0,c.jsx)("div",{className:f().dragSection,onMouseMove:_,onMouseLeave:m,children:Array(t.enabledDays.length).fill(0).map((e,a)=>(0,c.jsx)(v,{dayIndex:a,onDragStart:d,onDragEnd:u,activeIndexes:i===a?s:[],settings:t},a))})}),v=(0,p.memo)(e=>{let{dayIndex:t,onDragStart:a,onDragEnd:r,activeIndexes:n,settings:s}=e,l=(0,p.useMemo)(()=>Array((s.endHour-s.startHour)*s.stepsPerHour).fill(0),[s.endHour,s.startHour,s.stepsPerHour]);return(0,c.jsx)("div",{className:f().dragSection__day,children:l.map((e,s)=>(0,c.jsx)(k,{active:n.includes(s),dayIndex:t,segmentIndex:s,onDragStart:a,onDragEnd:r},s))})}),k=(0,p.memo)(e=>{let{active:t,dayIndex:a,segmentIndex:r,onDragStart:n,onDragEnd:s}=e;return(0,c.jsx)("div",{className:h()(f().dragSection__step,{[f()["dragSection__step--active"]]:t}),onDragStart:e=>{e.preventDefault()},onMouseDown:()=>{n(a,r)},onMouseUp:()=>{s(a,r)}})});var Z=a(80056),j=a.n(Z),C=e=>{let{options:t}=e,a=(0,p.useMemo)(()=>{let e=t.endHour-t.startHour-1,a=[];for(let r=t.startHour+1;r<=t.startHour+e;r++)a.push(`${r<10?"0":""}${r}:00`);return a},[t.startHour,t.endHour]);return(0,c.jsxs)("div",{className:j().timeline,children:[(0,c.jsx)("div",{className:j().timeline__spacer}),a.map(e=>(0,c.jsx)("div",{className:j().timeline__hour,children:(0,c.jsx)("p",{children:e})},e)),(0,c.jsx)("div",{className:j().timeline__spacer})]})},S=a(69702),T=a(59373),w=a(6663),D=a.n(w);let N=(0,p.memo)(e=>{let{scrollableRef:t,elementRef:a,direction:r,options:n,onResize:s}=e,l=(0,p.useRef)(0),i=(0,p.useRef)(0),o=(0,p.useRef)(0),d=(0,p.useCallback)(e=>{if(!t.current?.element||!a.current)return;let s=Math.floor((e.clientY+t.current.element.scrollTop-t.current.element.getBoundingClientRect().top-50)/(60/n.stepsPerHour))*(60/n.stepsPerHour);if("up"===r){let e=l.current+-(s-i.current);if(e<=0)return;a.current.style.height=`${e}px`,a.current.style.top="unset",a.current.style.bottom=`${o.current}px`}else{let e=s-i.current+60/n.stepsPerHour;if(e<=0)return;a.current.style.height=`${e}px`,a.current.style.bottom="unset",a.current.style.top=`${i.current}px`}},[a,t,r,n.stepsPerHour]),u=(0,p.useCallback)(()=>{if(!t.current?.element||(t.current.element.removeEventListener("mousemove",d),t.current.element.removeEventListener("mouseup",u),!a.current))return;let e=a.current.offsetTop/(60/n.stepsPerHour),r=a.current.offsetHeight/(60/n.stepsPerHour);s(y(e,n),y(e+r,n))},[d,t,a,n,s]),_=(0,p.useCallback)(()=>{t.current?.element&&a.current&&(l.current=a.current.offsetHeight,i.current=a.current.offsetTop,o.current=t.current.element.scrollHeight-a.current.offsetTop-a.current.offsetHeight-50,t.current.element.addEventListener("mousemove",d),t.current.element.addEventListener("mouseup",u))},[d,u,t,a]);return(0,c.jsx)("div",{className:h()(D().resizeHandle,{[D()["resizeHandle--direction-up"]]:"up"===r,[D()["resizeHandle--direction-down"]]:"down"===r}),onMouseDown:_,onDragStart:e=>{e.preventDefault()}})});var I=a(71550),A=a.n(I);let W=e=>{let t=new Date,[a,r]=e.split(":");return t.setHours(Number(a),Number(r)),t},O=(e,t)=>e.filter(e=>s.Z.intervalsOverlapping(W(t.startTime),W(t.endTime),W(e.startTime),W(e.endTime))),F=(0,p.memo)(e=>{let{event:t,events:a,dayIndex:r,options:n,renderEvent:l,onClick:i,onMove:o,onResize:u,dayRef:_,scrollableRef:m}=e,h=(0,p.useRef)(null),g=(0,p.useRef)(!1),x=(0,p.useRef)(0),f=(0,p.useRef)(0),b=(0,p.useRef)(null),v=d.getEventTopOffset(W(t.startTime),n.endHour-n.startHour,n.startHour),k=d.getEventHeight(s.Z.getUnix(W(t.startTime)),s.Z.getUnix(W(t.endTime)),n.endHour-n.startHour),Z=(0,p.useCallback)(e=>{if(null===b.current||!g.current&&10>Math.abs(e.clientX-b.current.x)&&10>Math.abs(e.clientY-b.current.y)||!h.current||!_.current||!m.current?.element)return;let t=e.clientY+m.current.element.scrollTop;g.current=!0;let a=Math.floor((t-b.current.y)/(60/n.stepsPerHour))*(60/n.stepsPerHour);h.current.style.top=`${f.current+a}px`;let s=m.current.element.getBoundingClientRect(),l=_.current.offsetWidth,i=m.current.element.offsetWidth-l*n.enabledDays.length,o=e.clientX-s.left-i;if(o<0||o>m.current.element.offsetWidth-i)return;let d=Math.floor(o/l),c=d-r;x.current=d,h.current.style.transform=`translateX(${c*l}px)`},[n.stepsPerHour,_,m,r,n.enabledDays.length]),j=(0,p.useCallback)(()=>{if(!m.current?.element||(m.current.element.removeEventListener("mousemove",Z),m.current.element.removeEventListener("mouseup",j),!g.current||!h.current||!o))return;let e=h.current.offsetTop/(60/n.stepsPerHour),a=h.current.offsetHeight/(60/n.stepsPerHour),r=y(e,n),s=y(e+a,n),l=d.getDayNameFromIndex(x.current);o(t.id,l,r,s),b.current=null},[t,o,n,h,m,Z]),C=(0,p.useCallback)(e=>{if(!m.current?.element||!h.current||0!==e.button)return;let t=e.clientX,a=e.clientY+m.current.element.scrollTop;b.current={x:t,y:a},f.current=h.current.offsetTop,o&&m.current.element.addEventListener("mousemove",Z),m.current.element.addEventListener("mouseup",j)},[m,o,j,Z]),S=()=>{if(g.current){g.current=!1;return}i?.(t.id)},T=(0,p.useCallback)(()=>{let e=O(a.sort((e,t)=>s.Z.getMinutesBetweenDates(W(e.startTime),W(e.endTime))-s.Z.getMinutesBetweenDates(W(t.startTime),W(t.endTime))),t),r=e.filter(e=>e.id!==t.id),n=[];for(let t of r){let a=O(e,t);a.length>n.length&&(n=a)}return 0===n.length?{width:100,left:0}:{width:100/n.length,left:100*n.indexOf(t)/n.length}},[a,t])();return(0,c.jsxs)("div",{className:A().eventItem,ref:h,style:{zIndex:g.current?2:void 0,top:`${v}%`,height:`${k}%`,left:`${T.left}%`,width:`${T.width}%`},children:[l?l(t,(0,c.jsx)(E,{event:t,onMouseDown:C,onClick:S})):(0,c.jsx)(E,{event:t,onMouseDown:C,onClick:S}),u?(0,c.jsx)(N,{elementRef:h,scrollableRef:m,direction:"down",options:n,onResize:(e,a)=>{u(t.id,t.day,e,a)}}):null]})}),E=(0,p.memo)(e=>{let{event:t,onMouseDown:a,onClick:r}=e,n=s.Z.getMinutesBetweenDates(W(t.startTime),W(t.endTime)),l=t.color??"var(--color-surface-brand-lighter)",i=t.stripeColor??"var(--color-surface-opacity-midlight)";return(0,c.jsx)(S.Z,{onMouseDown:a,onClick:r,options:{type:"element"},className:A().eventItem__inner,children:(0,c.jsxs)("div",{className:A().itemWrapper,style:{flexDirection:n<30?"row":"column",alignItems:n<30?"center":"flex-start",gap:n<30?5:0,backgroundColor:l},children:[(0,c.jsx)("div",{className:A().itemStripe,style:{backgroundColor:i}}),(0,c.jsx)(T.Z,{style:{fontSize:"0.75em"},weight:500,ellipsis:!0,children:t.title}),(0,c.jsxs)(T.Z,{style:{fontSize:"0.75em"},ellipsis:!0,children:[t.startTime," - ",t.endTime]})]})})});var B=a(16568),R=a.n(B);let H=(0,p.memo)(e=>{let{active:t,index:a,options:r,style:n,events:s,renderEvent:l,onClick:i,onMove:o,onResize:d,scrollableRef:u}=e,_=(0,p.useRef)(null),m=Array(r.endHour-r.startHour).fill(0),g=Array(r.slotsPerHour).fill(0);return(0,c.jsxs)("div",{ref:_,className:h()(R().weekDay,{[R()["weekDay--today"]]:t}),style:n,children:[(0,c.jsx)("div",{className:R().slots,children:m.map((e,t)=>(0,c.jsx)("div",{className:R().slots__slotGroup,style:"auto"===r.hourHeight?void 0:{blockSize:r.hourHeight,flex:"unset"},children:g.map((e,t)=>(0,c.jsx)("div",{className:R().slots__slot},t))},t))}),(0,c.jsx)("div",{className:R().events,children:s.map(e=>(0,c.jsx)(F,{event:e,events:s,dayIndex:a,options:r,renderEvent:l,onClick:i,onMove:o,onResize:d,dayRef:_,scrollableRef:u},e.id))})]})});var P=a(15491),M=a.n(P),L=e=>{let{day:t,active:a}=e,{t:r}=(0,l.T_)();return(0,c.jsx)("div",{className:h()(M().header,{[M()["header--today"]]:a}),children:(0,c.jsx)("p",{children:r(d.getDayNameTranslation(t))})})},$=a(83469),U=a.n($),z=(0,p.memo)(e=>{let{weekNumber:t,activeDay:a,events:r=[],onCreate:n,renderEvent:s,onClick:i,onMove:o,onResize:d,className:m,...y}=e,{t:x}=(0,l.T_)(),f=(0,p.useRef)(null),v={startHour:y.options?.startHour??0,endHour:y.options?.endHour??24,stepsPerHour:y.options?.stepsPerHour??4,slotsPerHour:y.options?.slotsPerHour??1,enabledDays:y.options?.enabledDays??[0,1,2,3,4,5,6],hourHeight:y.options?.hourHeight??60},k={gridTemplateColumns:`50px repeat(${v.enabledDays.length}, 1fr)`};return(0,c.jsxs)(u.Z,{ref:f,draggable:!1,className:h()(U().calendarWeek,m),children:[(0,c.jsxs)("div",{className:U().calendarWeek__header,style:k,children:[(0,c.jsx)(_.Z,{center:!0,children:void 0!==t?(0,c.jsx)("p",{children:x(l.ZT.Common.WeekNumberAlt({week:String(t)}))}):null}),g.map((e,t)=>v.enabledDays.includes(t)?(0,c.jsx)(L,{day:e,active:a===e},e):null)]}),(0,c.jsxs)("div",{className:U().calendarWeek__body,style:k,children:[(0,c.jsx)(C,{options:v}),g.map((e,t)=>v.enabledDays.includes(t)?(0,c.jsx)(H,{index:t,active:a===e,scrollableRef:f,options:v,events:r.filter(t=>t.day===e),renderEvent:s,onClick:i,onMove:o,onResize:d},e):null),n?(0,c.jsx)(b,{options:v,onCreate:n}):null]})]})}),V=a(72142),G=a(14207),J=a(60960),q=a(86660),X=a(21009),Y=a(26165),Q=a(99210),K=a(35725),ee=a(63583);let et=e=>{let t=(0,r.gr)(),a=r.Ck.useListUserPreviewsByIDsQuery({ids:e},{staleTime:1/0,enabled:e.length>0}),n=(0,p.useCallback)(r=>{t.setListUserPreviewsByIDsQueryData({ids:[...e,r.id]},{users:[...a.data?.users??[],r]})},[t,e,a.data?.users]),s=(0,p.useCallback)(r=>{t.setListUserPreviewsByIDsQueryData({ids:e.filter(e=>e!==r)},{users:a.data?.users.filter(e=>e.id!==r)??[]})},[t,e,a.data?.users]);return{users:a.data?.users??[],prefetchWithUser:n,prefetchWithoutUser:s}},ea=e=>{let{categories:t,onlyUserIDs:a,selectedUserIDs:n}=e,{setSearchValue:s,debouncedSearchValue:l}=(0,Q.Z)(),i=r.Ck.useListUserPreviewsQuery({query:{nested:[{nested:t?.map(e=>({params:{equals:{category:e}}})),or_condition:!0}],params:{in:{id:a},not_in:{id:n},like:{full_name:l}},limit:10},include_archived_students:!1},{staleTime:1/0,placeholderData:ee.Wk});return{users:i.data?.users??[],setSearchValue:s}};var er=e=>{let{label:t,categories:a,onlyUserIDs:r,userIDs:n,setUserIDs:s,currentUserIsLocked:i=!1}=e,{t:o}=(0,l.T_)(),{userID:d}=(0,X.Tt)(),{users:u,prefetchWithUser:m,prefetchWithoutUser:h}=et(n),{users:p,setSearchValue:g}=ea({categories:a,onlyUserIDs:r,selectedUserIDs:n});return(0,c.jsxs)("div",{children:[(0,c.jsx)(J.Z,{label:t,emptyText:(0,K.Z)("Inga anv\xe4ndare hittades."),onSearch:g,onSelect:e=>{let t=p.find(t=>t.id===e);t&&(m(t),s(e=>[...e,t.id]))},children:p.map(e=>(0,c.jsx)(J.Z.Item,{value:e.id,children:(0,c.jsxs)(_.Z,{align:"center",gap:10,children:[(0,c.jsx)(Y.Yt,{user:e,size:"sm"}),(0,c.jsxs)(_.Z,{direction:"column",justify:"center",children:[(0,c.jsx)("h5",{style:{fontWeight:500},children:e.full_name}),(0,c.jsxs)(_.Z,{gap:5,style:{marginBlockStart:2},children:[(0,c.jsx)(q.Z,{variant:"outlined",size:"xs",pill:!0,children:o(Y.p5.getCategoryTranslation(e.category))}),e.class_user_group_title?(0,c.jsx)(q.Z,{variant:"outlined",size:"xs",pill:!0,children:e.class_user_group_title}):null]})]})]})},e.id))}),u.length>0?(0,c.jsx)(_.Z,{gap:5,wrap:"wrap",style:{marginBlockStart:5},children:u.map(e=>{let t=i&&e.id===d;return(0,c.jsx)(q.Z,{variant:"outlined",size:"md",onDelete:t?void 0:()=>{h(e.id),s(t=>t.filter(t=>t!==e.id))},children:e.full_name},e.id)})}):null]})},en=a(8230),es=a(79505),el=a(78195),ei=a(50078),eo=a.n(ei);let ed=e=>{let t=(0,r.gr)(),a=r.T4.useListOrganizationRoomsQuery({query:{params:{in:{id:e}}}},{enabled:0!==e.length}),n=(0,p.useCallback)(a=>{t.setListOrganizationRoomsQueryData({query:{params:{in:{id:[...e,a.id]}}}},e=>({organization_rooms:[...e?.organization_rooms??[],a],total_count:e?.total_count??1}))},[t,e]),s=(0,p.useCallback)(a=>{t.setListOrganizationRoomsQueryData({query:{params:{in:{id:e.filter(e=>e!==a)}}}},e=>({organization_rooms:e?.organization_rooms?.filter(e=>e.id!==a)??[],total_count:(e?.total_count??1)-1}))},[t,e]);return{rooms:a.data?.organization_rooms??[],prefetchWithRoom:n,prefetchWithoutRoom:s}},ec=e=>{let{setSearchValue:t,debouncedSearchValue:a}=(0,Q.Z)(),n=r.T4.useListOrganizationRoomsQuery({query:{params:{like:{title:a},not_in:{id:e}},limit:10}},{staleTime:1/0,placeholderData:ee.Wk});return{rooms:n.data?.organization_rooms??[],setSearchValue:t}};var eu=a(98138),e_=a(49660),em=a(27767),eh=a(80580),ep=a(69203),eg=a(55637),ey=a.n(eg),ex=a(37878);let ef=e=>{let t=(0,r.gr)(),a=r.Ck.useListUserGroupsByIDsQuery({ids:e},{staleTime:1/0,enabled:e.length>0}),n=(0,p.useCallback)(r=>{t.setListUserGroupsByIDsQueryData({ids:[...e,r.id]},{user_groups:[...a.data?.user_groups??[],r]})},[t,e,a.data?.user_groups]),s=(0,p.useCallback)(r=>{t.setListUserGroupsByIDsQueryData({ids:e.filter(e=>e!==r)},{user_groups:a.data?.user_groups.filter(e=>e.id!==r)??[]})},[t,e,a.data?.user_groups]);return{userGroups:a.data?.user_groups??[],prefetchWithUserGroup:n,prefetchWithoutUserGroup:s}},eb=(e,t)=>{let{setSearchValue:a,debouncedSearchValue:n}=(0,Q.Z)(),s=r.Ck.useSearchUserGroupsTitleQuery({title_search_term:n,limit:10,ids:e,ids_not_in:t},{staleTime:1/0,placeholderData:ee.Wk});return{userGroups:s.data?.user_groups??[],setSearchValue:a}},ev=(e,t)=>e.category===V.b.UserGroupCategory.Other?t(l.ZT.Common.Group):e.is_class&&e.is_childcare?(0,K.Z)("F\xf6rskoleklass"):!e.is_class&&e.is_childcare?(0,K.Z)("Fritidsgrupp"):t(e.is_mentor?l.ZT.Group.MentorGroup:e.is_class?l.ZT.Common.Class:l.ZT.Common.Group);var ek={TitleDescriptionController:()=>{let{t:e}=(0,l.T_)(),t=(0,ep.Z)(),{form:a}=(0,G.Gc)();return(0,c.jsxs)(eu.Z.Column,{children:[(0,c.jsxs)(_.Z,{direction:t?"column":"row",gap:16,children:[(0,c.jsx)(e_.Z,{className:ey().textInput,label:e(l.ZT.Common.Title),required:!0,...a.register("Title")}),(0,c.jsx)(G.Qr,{name:"Color",render:t=>{let{field:{value:a,onChange:r},fieldState:n}=t;return(0,c.jsx)(em.Z,{color:a,onChange:r,label:e(l.ZT.Common.BackgroundColor),required:!0,error:n.error?.message})}})]}),(0,c.jsx)(G.Qr,{name:"Description",render:t=>{let{field:{onChange:a},fieldState:{error:r},formState:n}=t;return(0,c.jsx)(eh.Z,{label:e(l.ZT.Common.Description),defaultValue:n.defaultValues?.Description?.content,onChange:a,error:r?.message})}})]})},DateTimeController:()=>{let{t:e}=(0,l.T_)(),{form:t}=(0,G.Gc)(),a=t.watch("IsFullday");return(0,c.jsxs)("div",{className:eo().dateTimeController,children:[(0,c.jsxs)("div",{className:eo().dateTimeController__inputs,children:[(0,c.jsx)(es.Z,{...t.register("Date"),label:e(l.ZT.Common.Date),required:!0}),(0,c.jsxs)("div",{children:[(0,c.jsx)(el.Z,{...t.register("StartTime"),label:e(l.ZT.Common.StartTime),required:!0,disabled:a}),(0,c.jsx)(el.Z,{...t.register("EndTime"),label:e(l.ZT.Common.EndTime),required:!0,disabled:a})]})]}),(0,c.jsx)(en.Z,{...t.register("IsFullday"),label:e(l.ZT.Event.FullDay)})]})},RoomController:()=>{let{t:e}=(0,l.T_)(),{form:t}=(0,G.Gc)(),a=t.watch("RoomIDs")??[],{rooms:r,prefetchWithRoom:n,prefetchWithoutRoom:s}=ed(a),{rooms:i,setSearchValue:o}=ec(a);return(0,c.jsxs)("div",{children:[(0,c.jsx)(J.Z,{label:e(l.ZT.Room.Rooms),emptyText:(0,K.Z)("Inga rum hittades."),onSearch:o,onSelect:e=>{let a=i.find(t=>t.id===e);a&&(n(a),t.setValue("RoomIDs",[...t.getValues("RoomIDs")??[],a.id]))},children:i.map(e=>(0,c.jsx)(J.Z.Item,{value:e.id,children:e.title},e.id))}),r.length>0?(0,c.jsx)(_.Z,{gap:5,wrap:"wrap",style:{marginBlockStart:5},children:r.map(e=>(0,c.jsx)(q.Z,{variant:"outlined",size:"md",onDelete:()=>{s(e.id),t.setValue("RoomIDs",(t.getValues("RoomIDs")??[]).filter(t=>t!==e.id))},children:e.title},e.id))}):null]})},UserGroupController:e=>{let{onlyUserGroupIDs:t}=e,{t:a}=(0,l.T_)(),{form:r}=(0,G.Gc)(),n=r.watch("UserGroupIDs")??[],{userGroups:s,prefetchWithUserGroup:i,prefetchWithoutUserGroup:o}=ef(n),{userGroups:d,setSearchValue:u}=eb(t,n);return(0,c.jsxs)("div",{children:[(0,c.jsx)(J.Z,{label:a(l.ZT.Common.Groups),emptyText:(0,K.Z)("Det finns inga grupper att visa"),onSearch:u,onSelect:e=>{let t=d.find(t=>t.user_group.id===e);t&&(i(t.user_group),r.setValue("UserGroupIDs",[...r.getValues("UserGroupIDs")??[],t.user_group.id]))},children:d.map(e=>{let t=ev(e.user_group,a);return(0,c.jsx)(J.Z.Item,{value:e.user_group.id,children:(0,c.jsx)(_.Z,{align:"center",gap:10,children:(0,c.jsxs)(_.Z,{direction:"column",justify:"center",children:[(0,c.jsx)(ex.Z,{content:e.highlighted_match}),(0,c.jsx)(_.Z,{style:{marginBlockStart:5},children:(0,c.jsx)(q.Z,{variant:"outlined",size:"xs",pill:!0,children:t})})]})})},e.user_group.id)})}),s.length>0?(0,c.jsx)(_.Z,{gap:5,wrap:"wrap",style:{marginBlockStart:5},children:s.map(e=>(0,c.jsx)(q.Z,{variant:"outlined",size:"md",onDelete:()=>{o(e.id),r.setValue("UserGroupIDs",(r.getValues("UserGroupIDs")??[]).filter(t=>t!==e.id))},children:e.title},e.id))}):null]})},ModeratorUserController:e=>{let{currentUserIsSelectedByDefault:t}=e,{userID:a}=(0,X.Tt)(),{form:r}=(0,G.Gc)(),n=r.watch("ModeratorUserIDs")??[];return(0,c.jsx)(er,{label:(0,K.Z)("Ansvarig (Personal)"),categories:[V.b.UserCategory.Employee],userIDs:[...n,...t?[a]:[]],setUserIDs:e=>{r.setValue("ModeratorUserIDs",e(r.getValues("ModeratorUserIDs")??[]))},currentUserIsLocked:t})},AttendeeUserController:e=>{let{onlyUserIDs:t,onlyStudentAttendees:a}=e,{t:r}=(0,l.T_)(),{form:n}=(0,G.Gc)(),s=n.watch("AttendeeUserIDs")??[];return(0,c.jsx)(er,{label:r(l.ZT.Common.Attendees),categories:a?[V.b.UserCategory.Student]:[V.b.UserCategory.Student,V.b.UserCategory.Employee],onlyUserIDs:t,userIDs:s,setUserIDs:e=>{n.setValue("AttendeeUserIDs",e(n.getValues("AttendeeUserIDs")??[]))}})}};let eZ=G.wh.object({content:G.wh.string(),text:G.wh.string()}),ej=G.wh.object({Title:G.wh.string(),Description:eZ.or(G.wh.undefined()),Date:G.wh.string(),StartTime:G.wh.string(),EndTime:G.wh.string(),AttendeeUserIDs:G.wh.string().array().or(G.wh.undefined()),ModeratorUserIDs:G.wh.string().array().or(G.wh.undefined()),UserGroupIDs:G.wh.string().array().or(G.wh.undefined()),RoomIDs:G.wh.string().array().or(G.wh.undefined()),FileIDs:G.wh.string().array().or(G.wh.undefined()),EventTypeID:G.wh.string(),Color:G.wh.string(),IsFullday:G.wh.boolean(),CourseID:G.wh.string().or(G.wh.undefined())}),eC=ej.required({CourseID:!0}),eS=(e,t)=>(e.StartTime||e.IsFullday||t.addIssue({code:G.wh.ZodIssueCode.custom,path:["StartTime"],message:(0,K.Z)("Starttid kr\xe4vs")}),e.EndTime||e.IsFullday||t.addIssue({code:G.wh.ZodIssueCode.custom,path:["EndTime"],message:(0,K.Z)("Sluttid kr\xe4vs")}),!e.IsFullday&&s.Z.before(s.Z.combine(e.Date,e.EndTime),s.Z.combine(e.Date,e.StartTime))&&t.addIssue({code:G.wh.ZodIssueCode.custom,path:["EndTime"],message:(0,K.Z)("Sluttid m\xe5ste vara efter starttid")}),G.wh.NEVER),eT=ej.superRefine(eS);eC.superRefine(eS);let ew=(e,t)=>{let a=s.Z.getUTC(s.Z.startOfDay(e)),r=s.Z.getUTC(s.Z.endOfDay(e));return a===e&&r===t},eD=(e,t)=>{let a=s.Z.getISOHour(s.Z.roundMinutes(new Date,15)),r=s.Z.getISOHour(s.Z.incrementHours(s.Z.roundMinutes(new Date,15),1));return{Title:e?.title??"",Description:e?.description??void 0,Date:e?s.Z.getISO(e?.start_at):t||s.Z.getISO(),StartTime:e?s.Z.getISOHour(e?.start_at):a,EndTime:e?s.Z.getISOHour(e?.end_at):r,AttendeeUserIDs:e?.attendee_user_ids??[],ModeratorUserIDs:e?.moderator_user_ids??[],UserGroupIDs:e?.user_group_ids??[],RoomIDs:e?.room_ids??[],FileIDs:e?.file_ids??[],EventTypeID:e?.event_type_id??"",Color:e?.color??"#e5e5ff",IsFullday:!!e&&ew(e.start_at,e.end_at)}},eN=e=>({title:e.Title,description:e.Description??{content:"",text:""},start_at:e.IsFullday?s.Z.getUTC(s.Z.startOfDay(e.Date)):s.Z.getUTC(s.Z.combine(e.Date,e.StartTime)),end_at:e.IsFullday?s.Z.getUTC(s.Z.endOfDay(e.Date)):s.Z.getUTC(s.Z.combine(e.Date,e.EndTime)),attendee_user_ids:e.AttendeeUserIDs??[],moderator_user_ids:e.ModeratorUserIDs??[],user_group_ids:e.UserGroupIDs??[],room_ids:e.RoomIDs??[],file_ids:e.FileIDs??[],event_type_id:e.EventTypeID,color:e.Color||null})},20886:function(e,t,a){"use strict";a.d(t,{OX:function(){return rR},Mb:function(){return h},Ve:function(){return tl},QS:function(){return $},Dm:function(){return tc},wy:function(){return tC},Zd:function(){return tD},yK:function(){return tE},NW:function(){return p},Fz:function(){return U},Us:function(){return eg},g:function(){return z},jz:function(){return ic},yZ:function(){return eu},SH:function(){return ey},PC:function(){return ea},H9:function(){return eC},Rf:function(){return et},p5:function(){return eI},lO:function(){return eF},o2:function(){return eB},Jf:function(){return eP},Pz:function(){return eU},c1:function(){return P}});var r,n,s,l,i,o,d,c,u,_,m,h,p,g,y,x,f,b,v,k,Z,j,C=a(12157),S=a(66641),T=a(72791);let w=(0,S.Ue)()((0,T.tJ)(e=>({selectedGroups:{},setSelectedGroups:(t,a)=>{e(e=>({selectedGroups:{...e.selectedGroups,[a]:t}}))},date:C.Z.getISOWeek(),setDate:t=>{e(()=>({date:t}))},overviewStatus:void 0,setOverviewStatus:t=>{e(()=>({overviewStatus:t}))}}),{name:"childcare-storage",storage:(0,T.FL)(()=>localStorage)}));var D=a(57748),N=a(26821),I=a(7653),A=a(92575),W=a(53206),O=a(40550),F=a(43640),E=a(55613),B=a(28179);(r=h||(h={})).StartTimeField="starts_at",r.EndTimeField="ends_at",r.ExplicitField="explicit_user_calendar_required",r.GraceDaysField="grace_days",r.GraceWeeksField="grace_weeks",r.CommentField="comment",r.UserCalendarUrl="child-schedule",r.CheckedOutColor="#4AC7FF",r.PendingColor="#7200D7",(n=p||(p={})).All="all",n.Odd="odd",n.Even="even",(s=g||(g={})).ShowAll="ShowAll",s.Expected="Expected",s.CheckedIn="Checkedin",s.CheckedOut="Checkedout",s.NonCheckedIn="Noncheckedin",s.ReportedAbsent="Reportedabsent",s.NotComing="Notcoming",s.NotConfirmed="Notconfirmed";let R=(e,t)=>{if(!t)return!0;let a=!1,r=Number(e.split(":")[0]),n=Number(e.split(":")[1]),s=t?Number(t.split(":")[0]):0,l=t?Number(t.split(":")[1]):0;return t&&s===r&&l<=n?a=!0:t&&r>=s&&s!==r&&(a=!0),a},H=(e,t)=>{if(!t)return!0;let a=!1,r=Number(e.split(":")[0]),n=Number(e.split(":")[1]),s=t?Number(t.split(":")[0]):0,l=t?Number(t.split(":")[1]):0;return t&&s===r&&l>=n?a=!0:t&&r<=s&&s!==r&&(a=!0),a};var P=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],M=void 0;class L{static get careHoursDays(){return P.reduce((e,t)=>{let a={[t]:{starts_at:`${t}_${h.StartTimeField}`,ends_at:`${t}_${h.EndTimeField}`,comment:`${t}_${h.CommentField}`}};return{...e,...a}},{})}static #e=this.childcareCalendarToISOWeek=e=>`${e.year}-W${e.week>=10?e.week:`0${e.week}`}`;static #t=this.extractChildcareCalendarHours=e=>P.reduce((t,a)=>{let r={[`${a}_${h.StartTimeField}`]:e[`${a}_${h.StartTimeField}`]||null,[`${a}_${h.EndTimeField}`]:e[`${a}_${h.EndTimeField}`]||null};return{...t,...r}},{});static #a=this.childcareCalendarToUpdate=e=>{let t=this.extractChildcareCalendarHours(e);return{id:e.id,explicit_user_calendar_required:e.explicit_user_calendar_required,year:e.year,week:e.week,...t,grace_days:e.grace_days??null,grace_weeks:e.grace_weeks??null,break_period:e.break_period}};static #r=this.childcareCalendarToCreate=e=>{let t=this.extractChildcareCalendarHours(e);return{explicit_user_calendar_required:e.explicit_user_calendar_required,year:e.year,week:e.week,grace_days:e.grace_days,grace_weeks:e.grace_weeks,group_id:e.group_id,break_period:e.break_period,comment:e.comment,...t}};static #n=this.extractChildcareCalendarUserHours=e=>P.reduce((t,a)=>{let r={[`${a}_${h.StartTimeField}`]:e[`${a}_${h.StartTimeField}`]||null,[`${a}_${h.EndTimeField}`]:e[`${a}_${h.EndTimeField}`]||null,[`${a}_${h.CommentField}`]:e[`${a}_${h.CommentField}`]||null};return{...t,...r}},{});static #s=this.childcareCalendarUserToUpdateRequest=e=>{let t=this.extractChildcareCalendarUserHours(e);return{id:e.id,user_id:e.user_id,year:e.year,week:e.week,...t}};static #l=this.childcareCalendarUserToCreateRequest=e=>{let t=this.extractChildcareCalendarUserHours(e);return{user_id:e.user_id,year:e.year,week:e.week,label:e.label,...t}};static #i=this.getChildcareWeekdays=(e,t,a)=>{let r=e?this.childcareCalendarToISOWeek(e):a;if(!r)return[];let n=C.Z.getISOWeekdays(r),s=this.careHoursDays;return P.map((a,r)=>{let l=s[a],i=l.starts_at,o=l.ends_at,d=e?.id?e[i]:t?.[i]||null,c=e?.id?e[o]:t?.[o]||null,u=n[r]??"",_=e&&`${a}_${h.CommentField}` in e?this.getCommentFromDay(e,a):null;return{isoDate:u,startsAt:d||null,endsAt:c||null,dayName:a,startsAtField:i,endsAtField:o,comment:_}})};static #o=this.getCommentFromDay=(e,t)=>e[`${t}_${h.CommentField}`];static #d=this.getChildcareWeekday=(e,t,a,r)=>this.getChildcareWeekdays(e,a,r).find(e=>e.dayName===t);static #c=this.getDefaultValueFromSelectedDays=(e,t)=>{let a=L.careHoursDays,r=e.find(e=>{let t=a[e.basicSelectedDay?.weekDay];return e.calendarWeek[t.starts_at]&&e.calendarWeek[t.ends_at]}),n=r?a[r.basicSelectedDay?.weekDay]:void 0,s=r?r.calendarWeek:void 0,l="",i="",o="",d="";n&&t&&t.locked&&(l=t[n.starts_at]??"",o=t[n.ends_at]??"",i=t[n.starts_at]??"",d=t[n.ends_at]??"");let c=e.find(e=>{let t=a[e.basicSelectedDay?.weekDay];return t.comment&&e.calendarWeek[t.comment]}),u=c?a[c.basicSelectedDay.weekDay].comment:null,_=c&&u?c.calendarWeek[u]:null;return{starts_at:n&&s?s[n.starts_at]:null,ends_at:n&&s?s[n.ends_at]:null,comment:_,startsAtMinimumTime:l,startsAtMaximumTime:o,endsAtMinimumTime:i,endsAtMaximumTime:d}};static #u=this.getSelectedAdminDaysWithoutGracePeriod=e=>e.filter(e=>!e?.basicSelectedDay.gracePeriodSelected).map(e=>({...e,basicSelectedDay:e?.basicSelectedDay}));static #_=this.getDefaultValueFromAdminSelectedDays=e=>{let t,a;let r=null,n=null,s=this.careHoursDays,l=this.getSelectedAdminDaysWithoutGracePeriod(e).find(e=>{let t=s[e.basicSelectedDay?.weekDay];return e.calendarWeek[t?.starts_at]&&e.calendarWeek[t?.ends_at]});if(l){let e=s[l.basicSelectedDay.weekDay],t=l.calendarWeek;r=t[e.starts_at],n=t[e.ends_at]}let i=e.find(e=>{let{calendarWeek:t}=e;return t.grace_weeks??t.grace_days});if(i){let e=i.calendarWeek;t=e.grace_weeks,a=e.grace_days}return{starts_at:r,ends_at:n,graceDays:a,graceWeeks:t,break_period:e.every(e=>e.calendarWeek.break_period),closed:e.every(e=>{let t=e.basicSelectedDay.weekDay?s[e.basicSelectedDay.weekDay]:null,a=e.calendarWeek,r=t?a[t.starts_at]:null,n=t?a[t.ends_at]:null;return null===r&&null===n})}};static #m=this.getDeadlinesFromCalendarWeek=(e,t)=>{let a={lastDayToTurnIn:void 0,daysLeft:0};if(!e||!t?.grace_weeks)return a;let r=this.getChildcareWeekdays(e)[0];if(!r)return a;let n=r.isoDate,s=C.Z.decrementDay(n,7*t.grace_weeks),l=C.Z.getDiffDays(C.Z.getISO(),s);return{lastDayToTurnIn:s,daysLeft:l}};static #h=this.getDeadlinesInIsoWeek=(e,t,a)=>{if(!e||!t||!a)return[];let r=C.Z.getISOWeekdays(t);return e.map(e=>{let t=this.getDeadlinesFromCalendarWeek(e,e),n=a.find(t=>t.week===e.week),s=!!n&&!!n.id;return t.lastDayToTurnIn&&r.includes(t.lastDayToTurnIn)&&!s?{...t,week:e.week,calendarWeek:n??{}}:{lastDayToTurnIn:void 0,daysLeft:0,week:e.week,calendarWeek:{}}}).filter(e=>e.lastDayToTurnIn)??[]};static #p=this.addAdminDaysToSelected=(e,t)=>{let a=this.updateSelectedDays(e.map(e=>e.basicSelectedDay),t.map(e=>e.basicSelectedDay));return this.basicDayToAdminSelectedDay(a,[...e,...t])};static #g=this.canEditCalendarDay=e=>{let{calendarWeek:t,isoDate:a,dayName:r,openingHours:n,overrideDisabled:s}=e;if(!a||!n||!t||!r||this.isClosed(r,n))return!1;if(s)return!0;let l=C.Z.getDiffDays(C.Z.getISO(),a),i=!!n?.grace_days&&l<n?.grace_days,o=C.Z.before(a,C.Z.getISO());if(i||o)return!1;let d=this.getDeadlinesFromCalendarWeek(t,n);return!d.lastDayToTurnIn||!(d.daysLeft<0)};static #y=this.updateOrCreateChildcareCalendars=async e=>{let t=new O.u,a=e.filter(e=>!e.id),r=e.filter(e=>e.id),n=a.map(e=>({week:this.childcareCalendarUserToCreateRequest(e),id:(0,B.Z)()})),s=r.map(e=>({week:this.childcareCalendarUserToUpdateRequest(e),id:(0,B.Z)()}));if(n)for(let e of n)t.addCreateChildcareCalendarUserRequest(e.week,e.id);if(s?.length)for(let e of s)t.addUpdateChildcareCalendarUserRequest(e.week,e.id);if(r?.length||n?.length){let e=await t.execute();if(s?.length>0)for(let t of s){let a=e.updateChildcareCalendarUserResponse(t.id);if(a?.status!==200){let e=(0,F.e$)(a);E.FN.error(e)}}else if(n?.length>0)for(let t of n){let a=e.createChildcareCalendarUserResponse(t.id);if(a?.status!==200){let e=(0,F.e$)(a);E.FN.error(e)}}}};static #x=this.filterOutDisabledDays=(e,t,a)=>e.filter(e=>{let r=!0;if(!a&&e.basicSelectedDay.isoDate&&t){let n=this.getOpeningHoursForWeek(e.calendarWeek,t);r=L.canEditCalendarDay({calendarWeek:e.calendarWeek,isoDate:e.basicSelectedDay.isoDate,dayName:e.basicSelectedDay.weekDay,openingHours:n,overrideDisabled:a})}return r});static #f=this.getOpeningHoursForWeek=(e,t)=>t.find(t=>e.year===t.year&&e.week===t.week);static #b=this.getEditableWeekdays=(e,t,a,r)=>(e?.flatMap(e=>{let n=L.getChildcareWeekdays(e),s=this.getOpeningHoursForWeek(e,t)??a;return n.filter(t=>L.canEditCalendarDay({calendarWeek:e,isoDate:t.isoDate,dayName:t.dayName,openingHours:s,overrideDisabled:r}))})).length;static #v=this.basicDayToSelectedDay=(e,t)=>{let a=e.map(e=>e.basicSelectedDay),r=t.map(e=>e.basicSelectedDay),n=[...e,...t];return this.updateSelectedDays(a,r).reduce((e,t)=>{let a=n.find(e=>e.basicSelectedDay.isoDate===t.isoDate);return a&&e.push(a),e},[])};static #k=this.basicDayToAdminSelectedDay=(e,t)=>e.reduce((e,a)=>{let r=t.find(e=>e?.basicSelectedDay.gracePeriodSelected&&!a.isoDate?e.basicSelectedDay.weekNumber===a.weekNumber:e.basicSelectedDay.isoDate===a.isoDate);return r&&e.push(r),e},[]);static #Z=this.updateSelectedDays=(e,t)=>{let a=[],r=new Set(e.map(e=>`${e.weekNumber}-${e.weekDay??""}`)),n=t.some(e=>r.has(`${e.weekNumber}-${e.weekDay??""}`));return t.forEach(t=>{let r=e.findIndex(e=>t.weekNumber===e.weekNumber&&t.weekDay===e.weekDay);r>-1?e.splice(r,1):n||a.push(t)}),[...e,...a]};static #j=this.isSelected=(e,t)=>t.filter(e=>!e.gracePeriodSelected).some(t=>t.isoDate===e.isoDate);static #C=this.isClosed=(e,t)=>!t||!t[this.careHoursDays[e].starts_at];static #S=this.getWeekMaxMinTimes=(e,t)=>{let a=e??t;return P.reduce((e,t)=>{let r=this.careHoursDays[t],n={[t]:{minimumTime:a?.[r.starts_at]??"",maximumTime:a?.[r.ends_at]??""}};return{...e,...n}},{})};static #T=this.weekDayOutsideOpeningHours=e=>{let{startsAt:t,endsAt:a,dayName:r,openingHours:n,baseOpeningHours:s}=e;if(!t||!a){if(s||n){let{maximumTime:e,minimumTime:t}=this.getWeekMaxMinTimes(n,s)[r];return{startsAtValid:!0,endsAtValid:!0,maximumTime:e,minimumTime:t}}return{startsAtValid:!0,endsAtValid:!0}}let{maximumTime:l,minimumTime:i}=this.getWeekMaxMinTimes(n,s)[r],o=H(t,l),d=R(t,i),c=R(a,i),u=H(a,l);return{startsAtValid:d&&o,endsAtValid:c&&u,minimumTime:i,maximumTime:l}};static #w=this.shouldToggleWeek=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.All;return!!(p.All===t||p.Odd===t&&M.isWeekOdd(e)||p.Even===t&&M.isWeekEven(e))};static #D=this.isWeekOdd=e=>e%2==1;static #N=this.isWeekEven=e=>e%2==0;static getSelectedWeekText(e){let t=Array.from(new Set(e.map(e=>{let{week:t}=C.Z.isoWeekToYearAndWeek(e);return t})));if(t.sort((e,t)=>e-t),t.length>1){let e=t.pop();return e?`${t.join(", ")} ${A.ag.t(A.ZT.Common.And)} ${e}`:""}let a=t[0];return a?`${a}`:""}static formatWeekSpanGrammar(e){let t=C.Z.getISOWeekdays(e),a=t[0],r=t[t.length-1],n=C.Z.getDay(a),s=C.Z.getDay(r),l=C.Z.getMonthnameShort(a),i=C.Z.getMonthnameShort(r),o=C.Z.getFullYear(a),d=C.Z.getFullYear(r);return l===i&&o===d?`${n} - ${s} ${l} ${o}`:o===d?`${n} ${l} - ${s} ${i} ${o}`:`${n} ${l} ${o} - ${s} ${i} ${d}`}}var $=L,U={childcareCalendars:(e,t,a,r)=>["getChildcareCalendarUserWeeks",e,t,a,r],baseChildcareCalendars:e=>["getSchoolBasedChildcareCalendarWeeks",e]},z=e=>new Date(e??"").toLocaleDateString("en-US",{weekday:"long"}).toLowerCase();(l=y||(y={})).OnSchedule="on-schedule",l.Absent="absent",l.Empty="empty",l.DayGone="day-gone",l.Locked="locked",l.LockedGuardian="locked-guardian",l.Closed="closed",l.Free="free",l.OutsideHours="outside-hours",l.NoCalendar="no-calendar",l.HasDeviation="has-deviation",l.DeviantOpeningHours="deviant-opening-hours";let V=e=>{let{dayName:t,formattedCareHoursWeek:a,deviation:r}=e,n=a.user_week_data[t],s=a.organization_week_data?.[t],l=r?.starts_at??n.starts_at??"",i=r?.ends_at??n.ends_at??"",o=H(l,s.ends_at),d=R(l,s.starts_at),c=R(i,s.starts_at),u=H(i,s.ends_at);return{userDayData:{...n,starts_at:l,ends_at:i},orgDayData:s,dayValidation:{startsAtMaximumValid:o,startsAtMinimumValid:d,endsAtMinimumValid:c,endsAtMaximumValid:u}}},G=e=>{let{graceDays:t,graceWeeks:a,isoDate:r,lastISODateOfWeek:n}=e;if(C.Z.before(r,C.Z.getISO()))return!1;let s=C.Z.getDiffDays(C.Z.getISO(),r);if(t&&s<t)return!0;if(!a)return!1;let l=C.Z.decrementDay(n,7*a);return 0>C.Z.getDiffDays(C.Z.getISO(),l)},J=e=>{let{isoDate:t,formattedCareHoursWeek:a,deviation:r,lastISODateOfWeek:n,baseOpeningHours:s}=e,l=z(t),{userDayData:i,orgDayData:o,dayValidation:d}=V({dayName:l,formattedCareHoursWeek:a,deviation:r}),{startsAtMaximumValid:c,startsAtMinimumValid:u,endsAtMinimumValid:_,endsAtMaximumValid:m}=d,h=!C.Z.sameDay(t)&&C.Z.before(t),p=!a.childcare_calendar_user,g=!(o.starts_at&&o.ends_at)||o.closed,x=!!(!i.starts_at&&!i.ends_at&&!g),f=a.childcare_calendar_user,b=a.childcare_calendar.grace_days??s?.grace_days,v=a.childcare_calendar.grace_weeks??s?.grace_weeks,k=r?.id?!r.absence&&!(r?.starts_at&&r.ends_at):!!f.id&&!(i.starts_at&&i.ends_at);return[{[y.Free]:()=>k},{[y.Closed]:()=>g},{[y.Locked]:()=>G({graceDays:b,graceWeeks:v,isoDate:t,lastISODateOfWeek:n})},{[y.Absent]:()=>r?.absence??!1},{[y.HasDeviation]:()=>!!r?.id},{[y.DayGone]:()=>h},{[y.LockedGuardian]:()=>!h&&!!a.childcare_calendar_user_base.locked},{[y.OutsideHours]:()=>!(g||p||r?.absence)&&!k&&!x&&!h&&!p&&(!c||!u||!m||!_)},{[y.Empty]:()=>x},{[y.OnSchedule]:()=>!!(i.starts_at&&i.ends_at)},{[y.DeviantOpeningHours]:()=>{if(g||!s)return!1;let e=s[`${l}_starts_at`],t=s[`${l}_ends_at`],{starts_at:a,ends_at:r}=o;return e!==a||t!==r}},{[y.NoCalendar]:()=>p}].filter(e=>{let t=Object.keys(e)[0];return e[t]?.()}).map(e=>Object.keys(e)[0])},q=(e,t)=>e.filter(e=>null!==e.grace_weeks&&t===e.week-e.grace_weeks).map(e=>({currentWeek:t,finalWeekToEnterDataFor:e.week})),X=(e,t)=>{let a=C.Z.getMonthnameShort(e),r=W.Z.capitalize(C.Z.getDayname(e)),n=C.Z.getDay(e);"4"===C.Z.getMonth(e)&&(a=A.ag.t(A.ZT.Months.April).toLowerCase());let s=`${r}, ${n} ${a}`;return t&&C.Z.sameDay(e)&&(s=A.ag.t(A.ZT.Common.Today)),s};var Y=a(35176),Q=e=>{let{isoWeek:t}=e,{settings:a}=(0,Y.rV)();return(0,I.useMemo)(()=>C.Z.getISOWeekdays(t).filter(e=>{if(a.ChildcareCalendarShowWeekend)return!0;let t=z(e);return"saturday"!==t&&"sunday"!==t}).map(e=>({isoDate:e,dayName:z(e)})),[t,a.ChildcareCalendarShowWeekend])},K=e=>{let{userID:t}=e,a={user_id:t,query:{params:{equals:{user_id:t}}},include_archived_students:!0},r=D.gl.useListChildcareCalendarUserBasesQuery(a),n=r.data?.childcare_calendar_user_bases?.[0],s=(0,D.ge)();return{childcareUserBase:n,isPending:r.isPending,invalidateQuery:()=>{s.invalidateListChildcareCalendarUserBasesQuery(a)}}};let ee=e=>{let{isoDates:t,deviations:a,formattedCareHoursWeek:r,userID:n,baseOpeningHours:s}=e;if(!r)return[];let l=[],i=C.Z.getISOWeek(t?.[0]?.isoDate??""),o=C.Z.getISOWeekdays(i),d=o[o.length-1]??C.Z.getISO();for(let e of t){let{dayName:t,isoDate:i}=e,o=a?.find(e=>e.date===i),{userDayData:c,orgDayData:u}=V({dayName:t,formattedCareHoursWeek:r,deviation:o}),_=J({isoDate:i,formattedCareHoursWeek:r,deviation:o,lastISODateOfWeek:d,baseOpeningHours:s}),m=!!(r.organization_week_data&&("friday"===t||"sunday"===t)),h=_.includes(y.Closed)||_.includes(y.DayGone),p={orgDayData:u,userDayData:c,isoDate:i,deviation:o,statuses:_,dayName:t,userID:n,showDeadline:m,childcareCalendarUser:r.childcare_calendar_user,childcareCalendarUserBase:r.childcare_calendar_user_base,isReadOnly:h};l.push(p)}return l};var et=e=>{let{isoWeek:t,userID:a,enabled:r}=e,n=Number(C.Z.getWeek(t)),s=Number(C.Z.getISOYear(t)),l=(0,N.NL)(),i=(0,D.gr)(),o=D.gl.useListChildcareCalendarsForWeeksQuery({year:0,start_week:0,end_week:0,user_id:a},{enabled:r}),d=o.data?.childcare_calendars?.[0],c={user_id:a,week:n,year:s},u=D.gl.useGetFormattedChildcareWeekQuery(c,{enabled:r}),_=Q({isoWeek:t}),m=D.gl.useListChildcareDeviationsForWeekAsGuardianQuery({user_id:a,week:n,year:s},{enabled:r}),h=m.data?.childcare_deviations,p=u.data,g=(0,I.useMemo)(()=>ee({isoDates:_,formattedCareHoursWeek:p,deviations:h,userID:a,baseOpeningHours:d}),[d,h,p,_,a]),{childcareUserBase:y}=K({userID:a});return{careHoursDaysData:g,invalidateQuery:()=>{l.invalidateQueries({queryKey:u.queryKey}),l.invalidateQueries({queryKey:m.queryKey})},isoDates:_,isLocked:y?.locked??!1,childcareCalendar:p?.childcare_calendar,isPending:u.isPending,maximumHours:y?.maximum_hours,childcareCalendarUser:p?.childcare_calendar_user,childcareQueryOptimisticUpdater:e=>{i.setGetFormattedChildcareWeekQueryData(c,e)}}},ea=(e,t)=>({checkedInData:D.gl.useListChildcareCheckinsQuery({user_id:e,query:{params:{equals:{date:t}}}})}),er=a(23618),en=a(27573),es=a(29435),el=a(70785),ei=a.n(el);(i=x||(x={})).overview="Overview",i.checkin="Checkin",i.absence="Absence";let eo=Object.values(x);var ed=()=>{let{t:e}=(0,A.T_)();return(0,en.jsx)("div",{className:ei().childcareTabsWrapper,children:(0,en.jsx)(es.Z,{variant:"brand",children:eo.map(t=>(0,en.jsx)(es.Z.Tab,{value:t.toLowerCase(),label:e(A.ZT.Childcare.OverviewSections[t])},t))})})},ec=()=>{let e=(0,er.bS)("/childcare/:activeTab/:date"),t=(0,er.bS)("/school/childcare/:activeTab/:date"),a=e?.params.activeTab??t?.params.activeTab??x.overview;return W.Z.capitalize(a)},eu=e=>{let{isoWeek:t=C.Z.getISOWeek()}=e,{settings:a}=(0,Y.rV)(),r=C.Z.getISOWeekdays(t||C.Z.getISOWeek());return(a.ChildcareCalendarShowWeekend?r:r.filter(e=>!C.Z.isSunday(e)&&!C.Z.isSaturday(e))).map((e,t)=>({isoDate:e,dayName:P[t]??"monday"}))},e_=a(83499),em=a(2560);let eh="childcareCalendarUserBase",ep=new e_.Nl,eg=async e=>(await ep.listChildcareCalendarUserBases({user_id:e,query:{params:{equals:{user_id:e}}},include_archived_students:!0})).childcare_calendar_user_bases;var ey=e=>{let{data:t,isPending:a}=(0,em.a)({queryFn:async()=>eg(e),queryKey:[eh,e]});return{childcareCalendarUserBase:t?.[0],isLoading:a}},ex=a(21009),ef=a(26165);let eb=new e_.Nl,ev=async(e,t,a)=>{if(e)return eb.listChildcareCheckins({user_id:e,query:{params:{smaller_or_equal:{date:a},greater_or_equal:{date:t},equals:{user_id:e}}}})},ek=async e=>{let{userID:t,checkin:a,date:r,guardian_comment:n,absence:s,comment:l,isGuardian:i=!1}=e;return t?a?.id?eb[i?"updateChildcareCheckinAsGuardian":"updateChildcareCheckin"]({id:a.id,checked_in_at:a.checked_in_at,checked_out_at:a.checked_out_at,comment:l??a.comment,guardian_comment:n??a.guardian_comment,absence:s??a.absence,user_id:t}):eb[i?"createChildcareCheckinAsGuardian":"createChildcareCheckin"]({user_id:t,absence:s??!1,date:r,checked_in_at:null,comment:l||null,guardian_comment:n||null,checked_out_at:null}):Promise.reject("No user ID")},eZ=(e,t,a,r)=>{let n=["absencesFromUser",e,t,a],{data:s}=(0,em.a)({queryFn:async()=>ev(e,t,a),queryKey:n,enabled:!r&&void 0!==e});return{data:s,queryKeys:n}},ej=e=>{let t=D.Ck.useGetUserPlacementQuery({user_id:e??""},{enabled:void 0!==e});return{user:t.data?.user_placement}},eC=(e,t,a)=>{let r=(0,ex.zP)(),n=r?.type_of_schooling,{user:s}=ej(e),l="Preschool"===n,i=l&&s?.category==="Student",o=ef.p5.hasChildcare(s)||i,d=("Elementary"===n||l)&&o,c=(0,N.NL)(),{data:u,queryKeys:_}=eZ(e,t,a,!d),m=u?.childcare_checkins.find(e=>e.date===t),{isGuardianModeActive:h}=(0,ex.Tt)(),p=async(a,r)=>{let n=m;return r&&r!==t&&u?.childcare_checkins&&(n=u.childcare_checkins.find(e=>e.date===r)),ek({checkin:n,userID:e,date:r||t,absence:a,isGuardian:h}).finally(()=>{c.invalidateQueries({queryKey:_})})},g=async(a,r)=>{let n=m;return r&&r!==t&&u?.childcare_checkins&&(n=u.childcare_checkins.find(e=>e.date===r)),ek({checkin:n,userID:e,date:r||t,guardian_comment:a,isGuardian:h}).finally(()=>{c.invalidateQueries({queryKey:_})})},y=m?.absence,x=(0,I.useCallback)(e=>u?.childcare_checkins?u?.childcare_checkins.find(t=>t.date===e&&(t.guardian_comment||t.comment)):void 0,[u]);return{checkinAbsenceEnabled:d,checkins:u?.childcare_checkins??[],setCheckinAbsence:p,hasCheckinAbsence:y,updateCheckin:ek,updateCommment:g,hasDateCheckinAbsence:e=>!!u?.childcare_checkins&&u?.childcare_checkins.some(t=>t.date===e&&t.absence),getCheckinCommentFromDay:x}},eS=new e_.Nl,eT=async e=>{let{userID:t,fromWeek:a,toWeek:r,year:n}=e;return await eS.listChildcareCalendarsForWeeks({user_id:t,year:n,start_week:a,end_week:r})},ew=async e=>{let{userID:t,fromWeek:a,toWeek:r,year:n}=e;return(await eS.listChildcareCalendarUsersForWeeks({user_id:t,year:n,start_week:a,end_week:r})).childcare_calendar_users},eD=e=>{let{userID:t}=e,{data:a}=(0,em.a)({queryFn:async()=>eT({userID:t,fromWeek:0,toWeek:0,year:0}),queryKey:["getChildcareCalendarWeeks",t],enabled:!!t});return a},eN=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((e,t)=>e.week-t.week)};var eI=e=>{let{userID:t,fromWeek:a,toWeek:r,year:n}=e,{data:s,isLoading:l}=(0,em.a)({queryFn:async()=>eT({userID:t,fromWeek:a,toWeek:r,year:n}),queryKey:["getChildcareCalendarWeeks",a,r,n,t]}),i=eD({userID:t}),{childcareCalendarUserBase:o}=ey(t),{data:d}=(0,em.a)({queryFn:async()=>ew({userID:t,fromWeek:a,toWeek:r,year:n}),queryKey:U.childcareCalendars(a,r,n,t),enabled:!!t}),c=(0,N.NL)(),u=(0,I.useCallback)(()=>{c.invalidateQueries({queryKey:U.childcareCalendars(a,r,n,t)})},[a,r,n,t,c]);return{childcareCalendars:s?.childcare_calendars,childcareCalendarBase:i?.childcare_calendars[i?.childcare_calendars?.length-1],childcareCalendarUsers:eN(d),updateChildcareCalendarUsers:$.updateOrCreateChildcareCalendars,childcareCalendarUserBase:o,invalidateCurrentQuery:u,resetWeek:e=>{e&&eS.deleteChildcareCalendarUser({id:e.id,user_id:e.user_id}).then(()=>{u()})},confirmWeekTimes:e=>{let s=d?.find(t=>t.week===e);if(s?.id||!o)return;let l=$.extractChildcareCalendarUserHours({...o,monday_comment:null,tuesday_comment:null,wednesday_comment:null,thursday_comment:null,friday_comment:null,saturday_comment:null,sunday_comment:null});eS.createChildcareCalendarUser({...l,user_id:t,week:e,year:n,label:null}).then(s=>{c.setQueryData(U.childcareCalendars(a,r,n,t),t=>t?t.map(t=>t.week===e?s.created:t):[s.created])})},isLoading:l}},eA=a(73822);let eW=new e_.Nl,eO=e=>({monday_starts_at:e?.monday_starts_at||null,monday_ends_at:e?.monday_ends_at||null,tuesday_starts_at:e?.tuesday_starts_at||null,tuesday_ends_at:e?.tuesday_ends_at||null,wednesday_starts_at:e?.wednesday_starts_at||null,wednesday_ends_at:e?.wednesday_ends_at||null,thursday_starts_at:e?.thursday_starts_at||null,thursday_ends_at:e?.thursday_ends_at||null,friday_starts_at:e?.friday_starts_at||null,friday_ends_at:e?.friday_ends_at||null,saturday_starts_at:e?.saturday_starts_at||null,saturday_ends_at:e?.saturday_ends_at||null,sunday_starts_at:e?.sunday_starts_at||null,sunday_ends_at:e?.sunday_ends_at||null,locked:e?.locked||!1,maximum_hours:e?.maximum_hours,daily_max_hours:e?.daily_max_hours});var eF=e=>{let{userID:t,onSuccess:a}=e,r=async e=>{let a=eW.createChildcareCalendarUserBase({...eO(e),user_id:t,start_date:null,end_date:null});return E.FN.promise(a,"Sparade vanliga omsorgstider!"),a},n=(0,N.NL)();return{mutation:(0,eA.D)({mutationFn:r,onSuccess:()=>{a?.(),n.invalidateQueries({queryKey:[eh]})}})}},eE=a(69203),eB=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,eE.Z)(),a=(0,eE.Z)("(max-width: 1340px)"),r=(0,eE.Z)("(max-width: 1000px)");return t?1:r?3:a?4:e?7:5};let eR=new e_.Nl,eH=async e=>{let t=(await eR.listChildcareCalendarsForWeeks({start_week:0,end_week:0,user_id:e,year:0})).childcare_calendars[0];return void 0!==t?t:null};var eP=e=>{let{data:t,isPending:a}=(0,em.a)({queryKey:U.baseChildcareCalendars(e),queryFn:async()=>eH(e),enabled:!!e});return{baseWeek:void 0!==t?t:null,isLoading:a,keys:U.baseChildcareCalendars(e)}},eM=()=>{let{selectedGroups:e}=w(),{activeOrganizationID:t}=(0,ex.Tt)();return(0,I.useMemo)(()=>e[t]??[],[t,e])},eL=()=>{let e=eM(),t=D.Ck.useListUserGroupsQuery({query:{params:{equals:{is_childcare:!0}}}});return(0,I.useMemo)(()=>{let a=t.data?.user_groups??[];return[...new Set((e.length>0?a.filter(t=>e.includes(t.id)):a).flatMap(e=>e.member_user_ids)??[])]},[t.data?.user_groups,e])};let e$=new e_.Nl;var eU=e=>{let{id:t,invalidateCurrentQuery:a}=e,r=async e=>{let a=e$.updateChildcareCalendarUserBase({id:t,user_id:e.user_id,...eO(e)});return E.FN.promise(a,"Uppdaterade vanliga omsorgstider!"),a},n=(0,N.NL)();return{mutation:(0,eA.D)({mutationFn:r,onSuccess:()=>{n.invalidateQueries({queryKey:[eh]}),a?.()}})}},ez=a(79162),eV=a(59245),eG=a(45531),eJ=a.n(eG),eq=a(50602),eX=a.n(eq),eY=e=>{let{text:t,startIcon:a,endIcon:r}=e;return(0,en.jsxs)("span",{className:eX().careHoursLabel,children:[a,(0,en.jsx)("p",{className:eJ()(eV.X.Label_SM_Regular),children:t}),r]})},eQ=a(66303);let eK=e=>{switch(e){case y.OnSchedule:return"success";case y.DeviantOpeningHours:case y.OutsideHours:return"error";case y.HasDeviation:return"information";case y.DayGone:default:return"neutral"}};var e0=e=>{let{status:t}=e;return(0,en.jsx)(eQ.Z,{status:eK(t),orientation:"vertical",size:"full"})},e1=a(35725),e6=a(76711),e5=a.n(e6),e2=e=>{let{careHoursDayData:t}=e,{userDayData:a,statuses:r,deviation:n}=t,{t:s}=(0,A.T_)(),l=r.some(e=>e===y.Closed),i=[a.comment,n?.comment,n?.guardian_comment].filter(Boolean);return(0,en.jsxs)("div",{className:e5().careHoursDayFlexRow,children:[r.includes(y.Absent)?(0,en.jsx)(eY,{text:s(A.ZT.Childcare.OverviewStatus.Reportedabsent),startIcon:(0,en.jsx)(ez.J,{name:"icon-flag-outline-16"})}):null,!l&&r.includes(y.Free)?(0,en.jsx)(eY,{text:s(A.ZT.Childcare.Free),startIcon:(0,en.jsx)(ez.J,{name:"icon-user-xmark-16"})}):null,(()=>{let e=t.checkedIn?.checked_in_at,a=t.checkedIn?.checked_out_at;return e&&!a?(0,en.jsx)(eY,{text:`${(0,e1.Z)("L\xe4mnad")} ${e}`,startIcon:(0,en.jsx)(ez.J,{name:"icon-arrow-in-16"})}):e&&a?(0,en.jsx)(eY,{text:`${(0,e1.Z)("H\xe4mtad")} ${a}`,startIcon:(0,en.jsx)(ez.J,{name:"icon-arrow-out-16"})}):null})(),l?(0,en.jsx)(eY,{text:s(A.ZT.Childcare.Closed),startIcon:(0,en.jsx)(ez.J,{name:"icon-block-16"})}):null,!l&&i.length?(0,en.jsx)(eY,{text:i.length,startIcon:(0,en.jsx)(ez.J,{name:"icon-comment-lines-outline-16"})}):null]})},e3=a(86660),e7=a(76798),e4=a.n(e7),e9=e=>{let{status:t,text:a,icon:r}=e;return(0,en.jsx)(e3.Z,{className:eJ()(e4().careHoursDayStatusBox,e4()[`careHoursDayStatusBox--${t}`]),variant:"filled",size:"md",startIcon:r,children:a})},e8=a(83835),te=a.n(e8);let tt=(e,t)=>e.some(e=>t.includes(e)),ta=e=>{let{orgDayData:t,statuses:a}=e,{t:r}=(0,A.T_)();return[{status:y.DeviantOpeningHours,enabled:tt([y.DeviantOpeningHours],a)&&!tt([y.Absent],a),text:r(A.ZT.Childcare.DeviantOpeningHours({startsAt:t.starts_at,endsAt:t.ends_at}))},{status:y.OutsideHours,enabled:tt([y.OutsideHours],a),text:r(A.ZT.Childcare.OutsideOfOpeningHoursStatus),icon:(0,en.jsx)(ez.J,{name:"icon-exclamation-circle-outline-16"})},{status:y.HasDeviation,enabled:tt([y.HasDeviation],a)&&!tt([y.Absent,y.Free,y.DayGone],a),text:r(A.ZT.Childcare.Deviation)}].filter(e=>e.enabled)};var tr=e=>{let{careHoursDayData:t}=e,a=ta(t);return 0===a.length?null:(0,en.jsx)("div",{className:te().careHoursDayStatusRow,children:a.map(e=>(0,en.jsx)(e9,{status:e.status,text:e.text,icon:e.icon},e.status))})},tn=a(3141),ts=a.n(tn),tl=(0,I.memo)(e=>{let{careHoursDayData:t,onClick:a,isoDate:r,isInHub:n}=e,{t:s}=(0,A.T_)(),{isEmployee:l}=(0,ex.ih)(),i=C.Z.sameWeek(r,C.Z.getISO()),o=X(r,n);if(!t)return(0,en.jsx)("div",{className:ts().container,children:(0,en.jsxs)("div",{className:ts().careHoursDay,children:[(0,en.jsx)(e0,{status:y.NoCalendar}),(0,en.jsx)("div",{className:eJ()(ts().careHoursDay__info),children:(0,en.jsx)("div",{className:ts().careHoursDayFlexRow,children:(0,en.jsx)("p",{className:eJ()(eV.X.Label_SM_Semibold,ts().careHoursDayText),children:o})})})]})});let{userDayData:d,statuses:c}=t,u=e=>c.some(t=>e.includes(t)),_=u([y.Empty]),m=u([y.Free]),h=c[0]??y.Empty,p=u([y.Closed]),g=p?"icon-block-24":u([y.DayGone])&&!l?"icon-eye-24":"icon-pencil-24",x=u([y.Locked,y.LockedGuardian]),f=u([y.Empty,y.OnSchedule])&&!u([y.Free,y.Closed,y.Absent]),b=!(!p&&(!_||i||m||u([y.Absent])));return(0,en.jsx)("div",{className:ts().container,children:(0,en.jsxs)("button",{onClick:a,className:eJ()(ts().careHoursDay,{[ts()["careHoursDay--empty"]]:_&&!m,[ts()["careHoursDay--currentWeek"]]:i,[ts()["careHoursDay--closed"]]:p}),disabled:b,type:"button",children:[(0,en.jsx)(e0,{status:h}),(0,en.jsxs)("div",{className:ts().careHoursDay__info,children:[(0,en.jsxs)("div",{className:ts().careHoursDayFlexRow,children:[(0,en.jsx)("p",{className:eJ()(eV.X.Label_SM_Semibold,ts().careHoursDayText),children:o}),f?(0,en.jsx)(eY,{text:_?s(A.ZT.Childcare.NoTimes):`${d.starts_at} - ${d.ends_at}`,startIcon:x?(0,en.jsx)(ez.J,{name:"icon-clock-padlock-closed-circle-16"}):(0,en.jsx)(ez.J,{name:"icon-clock-circle-outline-16"})}):null]}),(0,en.jsx)(tr,{careHoursDayData:t}),(0,en.jsx)(e2,{careHoursDayData:t})]}),(0,en.jsx)("div",{className:ts().iconPlaceholder,children:g&&(0,en.jsx)(ez.J,{name:g})})]})})}),ti=a(839),to=a(31617),td=a.n(to),tc=e=>{let{tableHeader:t,header:a,containerStyle:r,calendarWeeks:n,renderWeek:s}=e;return(0,en.jsx)("div",{className:td().selectedOverlay,children:(0,en.jsxs)("div",{style:r,children:[a,(0,en.jsx)(ti.Z,{className:td().childcareCalendarTableWrapper,role:"grid",children:(0,en.jsxs)("table",{className:td().childcareCalendarTable,children:[t,(0,en.jsx)("tbody",{children:n?n.map((e,t)=>s(e,t)):null})]})})]})})},tu=a(8230),t_=a(69702),tm=a(42274),th=a(96669),tp=a(66221),tg=a(59373),ty=a(96501),tx=a.n(ty),tf=e=>{let{disabled:t,backgroundColor:a,color:r,...n}=e;return(0,en.jsx)("td",{...n,className:eJ()(tx().childcareTableData,n.className),"data-disabled":t,style:{...n.style,backgroundColor:a,borderColor:r}})},tb=a(77277),tv=a.n(tb),tk=(0,I.memo)(e=>{let{day:t,selected:a,differentFromBase:r,isClosed:n,onClickDay:s,openingHours:l,openingHoursIsDifferentFromBase:i,canEditDay:o,backgroundColor:d,deadlineBadge:c}=e,{comment:u}=t,_=!o||n,m=(0,e1.Z)(n?"Skolan \xe4r st\xe4ngd":"F\xf6r sent f\xf6r att redigera denna dags tider"),h=!e.overrideDisabledCheck&&(n||_),p=i&&l&&!n;return(0,en.jsxs)(tf,{style:{cursor:h?void 0:"pointer",overflow:"hidden",maxInlineSize:200},"data-selected":a,disabled:h,className:"childcare-day",color:d,backgroundColor:d?`${d}33`:void 0,children:[c?.(t),(0,en.jsxs)(t_.Z,{onClick:()=>{!h&&s&&s()},className:tv().childcareTableDataClickable,children:[r&&!n&&(0,en.jsx)(tm.Z,{title:(0,e1.Z)("Avviker fr\xe5n ordinarie \xf6ppettider"),children:(0,en.jsx)("div",{className:tv().alternativeDayBadge})}),(0,en.jsxs)(th.Z,{justify:"space-between",gap:5,align:"center",children:[(0,en.jsx)("h3",{style:{color:d,userSelect:"none",fontWeight:"bold"},children:C.Z.getDay(t.isoDate)}),(0,en.jsxs)(th.Z,{gap:10,align:"center",style:{backgroundColor:d||"var(--color-surface-brand-lighter)",borderRadius:8,paddingInline:10,paddingBlock:8},children:[(0,en.jsx)("p",{style:{color:d?"white":"var(--color-text-brand-enabled)",userSelect:"none",fontWeight:600},children:e?.renderHour(t)}),(!h||n)&&(0,en.jsx)(tp.Z,{variant:"solid",color:d?"white":"theme",fontAwesomeIcon:n?"do-not-enter":"pencil"})]})]}),u&&(0,en.jsx)("div",{className:tv().childcareCommentBox,children:(0,en.jsx)(tg.Z,{ellipsis:!0,children:u})}),n||!o||p?(0,en.jsxs)(th.Z,{justify:"space-between",align:"center",style:{marginBlockStart:5},children:[(0,en.jsx)("div",{children:p?(0,en.jsx)(tm.Z,{title:(0,e1.Z)("Dagens \xf6ppettider avviker fr\xe5n ordinarie"),children:(0,en.jsxs)(th.Z,{gap:5,align:"center",style:{backgroundColor:"var(--color-surface-base-container)",borderRadius:8,paddingInline:8,paddingBlock:3},children:[(0,en.jsx)(tp.Z,{fontAwesomeIcon:"school",variant:"regular"}),(0,en.jsxs)(tg.Z,{color:"secondary",size:11,children:[l[t.startsAtField]," -"," ",l[t.endsAtField]]})]})}):null}),o||n?null:(0,en.jsx)(th.Z,{justify:"flex-end",children:(0,en.jsx)(tm.Z,{title:m,children:(0,en.jsx)(th.Z,{align:"center",gap:5,style:{paddingBlockStart:5},children:(0,en.jsx)(tp.Z,{fontAwesomeIcon:"lock",variant:"duotone"})})})})]}):null]})]})}),tZ=a(58408),tj=a.n(tZ),tC=(0,I.memo)(e=>{let{settings:t}=(0,Y.rV)(),{calendarWeek:a,userBaseCalendar:r}=e,n=a.week,s=$.childcareCalendarToISOWeek(a),l=C.Z.startOfWeek(C.Z.parseISOWeek(s)),i=$.getChildcareWeekdays(a,r).filter(e=>t.ChildcareCalendarShowWeekend||"saturday"!==e.dayName&&"sunday"!==e.dayName),o=(0,I.useMemo)(()=>C.Z.getISOMonth(l),[l]),d=(0,I.useMemo)(()=>W.Z.capitalize(C.Z.getMonthname(o)),[o]),c=(0,I.useMemo)(()=>C.Z.getMonthWeeksWithoutDuplicates(o)[0]===s,[s,o]),u=a?.id?void 0:"#545eb626";return(0,en.jsxs)(en.Fragment,{children:[c&&(0,en.jsx)("tr",{style:{backgroundColor:"var(--color-surface-neutral-container-lighter)"},children:(0,en.jsx)("td",{colSpan:8,children:(0,en.jsx)("p",{style:{userSelect:"none",paddingInline:20},children:d})})}),e?.renderTop?e.renderTop:null,(0,en.jsxs)("tr",{style:{backgroundColor:u},children:[(0,en.jsx)("td",{className:tj().childcareWeekColumn,children:(0,en.jsxs)("button",{type:"button",onClick:()=>{e.onClickWeek()},className:tj().childcareWeekColumn__toggle,children:[(0,en.jsx)("p",{style:{userSelect:"none"},children:n}),(0,en.jsx)("div",{children:(0,en.jsx)(tu.Z,{checked:e.weekSelected,readOnly:!0})})]})}),i.map(t=>{let r=e.daySelected(t),n=!!e?.differentFromBase&&e.differentFromBase(t),s=e.openingHoursIsDifferentFromBase?.(t)||!1,l=!0;e.openingHours&&(l=$.canEditCalendarDay({calendarWeek:a,isoDate:t.isoDate,dayName:t.dayName,openingHours:e.openingHours,overrideDisabled:e.overrideDisabledCheck}));let i=e.isClosed?.(t)||!1;return(0,en.jsx)(tk,{onClickDay:()=>{e.onDayClick(t)},day:t,isClosed:i,openingHoursIsDifferentFromBase:s,deadlineBadge:t=>e.deadlineBadge?e?.deadlineBadge?.(t):void 0,backgroundColor:e.dayBackgroundColor?.(t),renderHour:t=>e.renderHour(t),canEditDay:!!e.overrideDisabledCheck||l,openingHours:e?.openingHours,overrideDisabledCheck:e.overrideDisabledCheck,selected:r,differentFromBase:n},t.isoDate)}),e?.renderRight?e.renderRight:null]})]})}),tS=a(83135),tT=a(18591),tw=e=>{let{day:t,openingHours:a,onSelect:r}=e,{t:n}=(0,A.T_)(),s=a?a[`${t}_${h.StartTimeField}`]:null,l=a?a[`${t}_${h.EndTimeField}`]:null,i=s?`${s??""} - ${l??""}`:"";return(0,en.jsx)("th",{children:(0,en.jsxs)(th.Z,{justify:"space-between",align:"center",gap:15,style:{paddingInline:10},children:[(0,en.jsxs)(th.Z,{direction:"column",justify:"flex-start",children:[(0,en.jsx)("p",{style:{textAlign:"start",fontWeight:600},children:n(tT.i.getDayNameTranslation(t))}),i?(0,en.jsx)(tm.Z,{title:(0,e1.Z)("Ordinarie \xf6ppettider"),children:(0,en.jsxs)(th.Z,{align:"center",children:[(0,en.jsx)(tp.Z,{fontAwesomeIcon:"school",color:"secondary",variant:"regular",style:{marginInlineEnd:5}}),(0,en.jsx)(tg.Z,{size:13,color:"secondary",children:i})]})}):null]}),(0,en.jsxs)(tS.Z,{children:[(0,en.jsx)(tS.Z.Target,{}),(0,en.jsxs)(tS.Z.Content,{children:[(0,en.jsx)(tS.Z.Item,{onClick:()=>{r(p.All,t)},children:(0,e1.Z)("V\xe4lj alla veckor")}),(0,en.jsx)(tS.Z.Item,{onClick:()=>{r(p.Odd,t)},children:(0,e1.Z)("V\xe4lj udda veckor")}),(0,en.jsx)(tS.Z.Item,{onClick:()=>{r(p.Even,t)},children:(0,e1.Z)("V\xe4lj j\xe4mna veckor")})]})]})]})})},tD=(0,I.memo)(e=>{let{openingHours:t,onSelect:a}=e,r=eu({});return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("th",{style:{paddingInline:20},children:(0,en.jsx)(th.Z,{center:!0,children:(0,en.jsxs)(tS.Z,{children:[(0,en.jsx)(tS.Z.Target,{}),(0,en.jsxs)(tS.Z.Content,{children:[(0,en.jsx)(tS.Z.Item,{onClick:()=>{a(p.All,null)},children:(0,e1.Z)("V\xe4lj alla veckor")}),(0,en.jsx)(tS.Z.Item,{onClick:()=>{a(p.Odd,null)},children:(0,e1.Z)("V\xe4lj udda veckor")}),(0,en.jsx)(tS.Z.Item,{onClick:()=>{a(p.Even,null)},children:(0,e1.Z)("V\xe4lj j\xe4mna veckor")})]})]})})}),r.map(e=>{let{dayName:r}=e;return(0,en.jsx)(tw,{day:r,openingHours:t,onSelect:a},r)})]})}),tN=a(45957),tI=a(98138),tA=a(80549),tW=a(91138),tO=a(78195),tF=a(15709),tE=e=>{let{onSave:t,startsAtLabel:a=(0,e1.Z)("\xd6ppnas"),endsAtLabel:r=(0,e1.Z)("St\xe4nger"),defaultValues:n}=e,{t:s}=(0,A.T_)(),[l,i]=(0,I.useState)(n?.starts_at??""),[o,d]=(0,I.useState)(n.ends_at??""),[c,u]=(0,I.useState)(n?.comment??""),[_,m]=(0,I.useState)(!1),h=()=>{tF.Y.trackEvent(tF.Y.Event.SpecificCaretimeChanged),t({starts_at:l,ends_at:o,comment:c,shouldUpdateComment:_}),e.closePopper?.()},p=(0,I.useRef)(null);return(0,I.useEffect)(()=>{e.expanded&&p?.current?.focus()},[e.expanded]),(0,en.jsx)(tN.Z,{padded:!0,rounded:!0,border:!0,children:(0,en.jsxs)(tI.Z,{onSubmit:h,children:[(0,en.jsxs)(th.Z,{gap:5,children:[(0,en.jsx)(tO.Z,{label:a,ref:p,value:l,onChangeValue:e=>{i(e)},defaultValue:n.starts_at??"",minTime:n.startsAtMinimumTime||"00:00",maxTime:n.startsAtMaximumTime||o}),(0,en.jsx)(tO.Z,{label:r,value:o,onChangeValue:e=>{d(e)},defaultValue:n.ends_at??"",minTime:n.endsAtMinimumTime||l,maxTime:n.endsAtMaximumTime||"23:59"})]}),e.showCommentBox&&(0,en.jsx)(tA.Z,{value:c,minRows:2,onSubmitValue:h,onChangeValue:e=>{u(e),m(!0)},label:s(A.ZT.Common.Comment)}),(0,en.jsx)(tW.Z,{type:"submit",variant:"primary",size:"md",fullWidth:!0,disabled:l?!o:!!o&&!l,loading:e.saving,style:{marginBlockStart:10},children:s(A.ZT.Common.Save)})]})})},tB=e=>{let{userID:t}=e,a=D.gl.useListChildcareCalendarsForWeeksQuery({year:0,start_week:0,end_week:0,user_id:t});return a.data?.childcare_calendars?.[0]},tR=a(25913),tH=e=>{let t=C.Z.parse(e),a=C.Z.getISO(C.Z.startOfYear(t)),r=C.Z.getISO(C.Z.endOfYear(t)),n=D.gl.useListChildcareCalendarSummariesQuery({from_date:a,to_date:r});return{summaries:n.data?.summaries??[],isPending:n.isPending}},tP=a(28650);(o=f||(f={})).Locked="locked",o.Deviating="deviating";let tM=(e,t)=>{let a=C.Z.isoWeekToYearAndWeek(e).year,r=C.Z.isoWeekToYearAndWeek(e).week,n=t.find(e=>e.year===a&&e.week===r);return n?n.locked?{iconName:"icon-clock-padlock-closed-circle-16",status:"locked",tooltip:(0,e1.Z)("Den h\xe4r veckan \xe4r sp\xe4rrad och kan inte redigeras.")}:n.break_period&&C.Z.after(C.Z.parseISOWeek(e))?{iconName:"icon-exclamation-circle-outline-16",status:"deviating",tooltip:(0,e1.Z)("Lovperiod")}:null:null};var tL=a(59536),t$=a.n(tL),tU=e=>{let{isoWeek:t,summaries:a,onChangeTo:r,value:n,onKeyDown:s,onFocus:l,activeWeek:i}=e,o=C.Z.parseISOWeek(t),d=!C.Z.sameWeek(t)&&C.Z.before(C.Z.parseISOWeek(t),new Date),c=r(t),u=C.Z.getWeek(o),_=t.split("-")[0],m=t===n,h=_===C.Z.getISOYear(),p=C.Z.sameWeek(t),g=h?tM(t,a):void 0,y=g?.status?t$()[`week_status--${g.status}`]:"";return(0,en.jsxs)("div",{className:t$().weekWrapper,children:["1"===u&&(0,en.jsx)(e3.Z,{size:"md",pill:!0,variant:"filled",className:t$().yearChip,children:_}),(0,en.jsx)(tm.Z,{title:g?.tooltip??"",disabled:!g?.tooltip,children:(0,en.jsxs)(tP.Z,{onKeyDown:e=>{s&&i&&s(e)},onFocus:e=>{l&&l(e)},tabIndex:m?void 0:-1,id:t,href:c,className:eJ()(t$().week,y,{[t$()["week--active"]]:m,[t$()["week--inactive"]]:d,[t$()["week--current"]]:p}),children:[(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:u}),g?.iconName&&!m&&(0,en.jsx)(ez.J,{name:g.iconName}),p?(0,en.jsx)("div",{className:t$().currentWeekIndicator}):null]},t)})]},t)},tz=a(60655),tV=a.n(tz),tG=(0,I.memo)(e=>{let{value:t,onChangeTo:a,className:r}=e,n=(0,I.useRef)(!1),{summaries:s}=tH(C.Z.getISOYear(t)),[l,i]=(0,I.useState)(t),o=(0,er.s0)(),{t:d}=(0,A.T_)(),c=[...new Set(C.Z.getWeeksWithinSpan(C.Z.startOfYear(C.Z.decrementYear()),C.Z.endOfYear(C.Z.incrementYear(new Date,2))))];(0,I.useEffect)(()=>{if(!t)return;let e=document.getElementById(t);e&&(e.scrollIntoView({behavior:n.current?"smooth":"instant",block:"nearest",inline:"center"}),n.current||(n.current=!0))},[t]);let u=a(C.Z.decrementISOWeek(t)),_=a(C.Z.incrementISOWeek(t)),m=e=>{if(l){if("ArrowLeft"===e.key){let e=c.indexOf(l),t=c[e-1];if(!t)return;let a=document.getElementById(t);i(t),a?.focus();return}if("ArrowRight"===e.key){let e=c.indexOf(l),t=c[e+1];if(!t)return;let a=document.getElementById(t);i(t),a?.focus()}}};return(0,en.jsxs)("div",{className:eJ()(tV().weekSelector,r),children:[(0,en.jsx)(tR.Z,{variant:"secondary",size:"sm","aria-label":d(A.ZT.Common.Remove),onClick:()=>{o(u,{replace:!0})},children:(0,en.jsx)(ez.J,{name:"icon-chevron-left-24"})}),(0,en.jsx)("div",{className:tV().startFade}),(0,en.jsx)("div",{className:tV().weekSelectorWrapper,children:c.map(e=>(0,en.jsx)(tU,{isoWeek:e,summaries:s,value:t,activeWeek:l,onKeyDown:m,onFocus:()=>{i(e)},onChangeTo:a},e))}),(0,en.jsx)("div",{className:tV().endFade}),(0,en.jsx)(tR.Z,{variant:"secondary",size:"sm","aria-label":d(A.ZT.Common.Remove),onClick:()=>{o(_,{replace:!0})},children:(0,en.jsx)(ez.J,{name:"icon-chevron-right-24"})})]})}),tJ=a(76480),tq=a.n(tJ),tX={Mobile:(0,I.memo)(e=>{let{value:t,onChangeTo:a}=e,r=(0,I.useRef)(!1),n=[...new Set(C.Z.getWeeksWithinSpan(C.Z.startOfYear(C.Z.decrementYear()),C.Z.endOfYear(C.Z.incrementYear(new Date,2))))],{summaries:s}=tH(C.Z.getISOYear(t));return(0,I.useEffect)(()=>{if(!t)return;let e=document.getElementById(t);e&&(e.scrollIntoView({behavior:r.current?"smooth":"instant",block:"nearest",inline:"center"}),r.current||(r.current=!0))},[t]),(0,en.jsx)("div",{className:tq().weekSelectorWrapper,children:n.map(e=>(0,en.jsx)(tU,{isoWeek:e,summaries:s,value:t,onChangeTo:a},e))})}),Desktop:tG},tY=a(63456),tQ=a.n(tY),tK=a(71024),t0=a.n(tK);let t1=e=>{let t="saturday"===z(C.Z.getISO())||"sunday"===z(C.Z.getISO());return{isoWeekToShow:e||!t?C.Z.getISOWeek():C.Z.incrementISOWeek(C.Z.getISOWeek(),1),dayToShow:e||!t?z(C.Z.getISO()):"monday",dayToShowAsIsoDate:e||!t?C.Z.getISO():C.Z.incrementISOWeek(C.Z.getISO(),1)}};var t6=a(14207);t6.wh.object({id:t6.wh.string().nullable(),user_id:t6.wh.string().nullable(),label:t6.wh.string().nullable(),year:t6.wh.number(),week:t6.wh.number(),monday_comment:t6.wh.string().nullable(),monday_starts_at:t6.wh.string().nullable(),monday_ends_at:t6.wh.string().nullable(),tuesday_comment:t6.wh.string().nullable(),tuesday_starts_at:t6.wh.string().nullable(),tuesday_ends_at:t6.wh.string().nullable(),wednesday_comment:t6.wh.string().nullable(),wednesday_starts_at:t6.wh.string().nullable(),wednesday_ends_at:t6.wh.string().nullable(),thursday_comment:t6.wh.string().nullable(),thursday_starts_at:t6.wh.string().nullable(),thursday_ends_at:t6.wh.string().nullable(),friday_comment:t6.wh.string().nullable(),friday_starts_at:t6.wh.string().nullable(),friday_ends_at:t6.wh.string().nullable(),saturday_comment:t6.wh.string().nullable(),saturday_starts_at:t6.wh.string().nullable(),saturday_ends_at:t6.wh.string().nullable(),sunday_comment:t6.wh.string().nullable(),sunday_starts_at:t6.wh.string().nullable(),sunday_ends_at:t6.wh.string().nullable(),sametime_starts_at:t6.wh.string().nullable(),sametime_ends_at:t6.wh.string().nullable(),deviation_guardian_comment:t6.wh.string().nullable(),absence:t6.wh.boolean().nullable(),deviation_comment:t6.wh.string().nullable(),deviation_starts_at:t6.wh.string().nullable(),deviation_ends_at:t6.wh.string().nullable(),report_free:t6.wh.boolean(),report_absence:t6.wh.boolean(),monday_report_free:t6.wh.boolean(),tuesday_report_free:t6.wh.boolean(),wednesday_report_free:t6.wh.boolean(),thursday_report_free:t6.wh.boolean(),friday_report_free:t6.wh.boolean(),saturday_report_free:t6.wh.boolean(),sunday_report_free:t6.wh.boolean()}),(d=b||(b={})).EveryWeek="EveryWeek",d.OddWeeks="OddWeeks",d.EvenWeeks="EvenWeeks",d.EveryThirdWeek="EveryThirdWeek";let t5=(0,I.createContext)({editSameTimes:!0,setEditSameTimes:()=>{},isoWeek:C.Z.getISOWeek(),userID:"",onClose:()=>{},baseOpeningHours:void 0,recurrence:{mode:"single",recurrenceType:b.EveryWeek,specificWeeks:[],amountOfWeeks:0},setRecurrence:()=>{},activeTab:"edit",setActiveTab:()=>{},isTabsVisible:!1,careHoursDaysData:[],isoDates:[],childcareCalendar:void 0,invalidateQuery:()=>{},maximumHours:null,overrideDisableRules:!1,formIsDirty:!1,setFormIsDirty:()=>{},hasTimesInBase:!1}),t2=()=>(0,I.useContext)(t5);var t3=a(20941),t7=a(79100),t4=a(88205),t9=a(71761),t8=a.n(t9),ae=e=>{let{careHoursDayData:t,isDisabled:a}=e,{userDayData:r,dayName:n,childcareCalendarUserBase:s}=t,{form:l}=(0,t6.Gc)(),[i,o]=(0,I.useState)(!1),{t:d}=(0,A.T_)(),{overrideDisableRules:c}=t2(),u=s?.[`${n}_starts_at`],_=s?.[`${n}_ends_at`],m=!!s?.daily_max_hours&&!u&&!_,h=d(c?A.ZT.Childcare.QuickMessageFromEmployee:A.ZT.Childcare.Message);return(0,en.jsxs)("div",{children:[(0,en.jsxs)("div",{className:t8().actionRow,children:[(0,en.jsxs)("div",{className:t8()["actionRow--inner"],children:[(0,en.jsx)(ez.J,{name:"icon-flag-outline-24"}),(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:d(A.ZT.Childcare.Free)})]}),(0,en.jsx)(t4.Z,{"aria-label":"Ledig",...l.register(`${n}_report_free`),disabled:a||m})]}),(0,en.jsxs)("div",{className:eJ()(t8().absenceBox,t8().commentBox),children:[(0,en.jsxs)("div",{className:t8().absenceBox__row,children:[(0,en.jsxs)("div",{className:t8()["actionRow--inner"],children:[(0,en.jsx)(ez.J,{name:"icon-comment-plus-24"}),(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:h})]}),(0,en.jsx)(tW.Z,{variant:"tertiary",size:"md",onClick:()=>{o(e=>!e)},children:d(i?A.ZT.Common.Close:a?A.ZT.Common.View:r?.comment?A.ZT.Common.Edit:A.ZT.Common.Add)})]}),i&&(0,en.jsx)("div",{className:t8().textAreaBox,children:(0,en.jsx)(tA.Z,{...l.register(`${n}_comment`),disabled:a,placeholder:h,minRows:3,label:""})})]})]})},at=a(79367);let aa=(e,t)=>{if(!e||!t)return 0;let a=C.Z.isoHourToMinutes(e);return C.Z.isoHourToMinutes(t)-a},ar=e=>{let t=Math.floor(e/60),a=e%60,r="";return t>0&&(r+=`${t}h`),a>0&&(r+=` ${a}m`),r.trim()};var an=(0,I.memo)(e=>{let{mode:t,dayName:a,closed:r}=e,{t:n}=(0,A.T_)(),{form:s}=(0,t6.Gc)(),l=s.watch("report_absence"),i=s.watch("deviation"===t?"report_free":`${a}_report_free`),o=ar(aa(s.watch("deviation"===t?"deviation_starts_at":`${a}_starts_at`)??"",s.watch("deviation"===t?"deviation_ends_at":`${a}_ends_at`)??""));return r||i||l?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(at.Z,{orientation:"vertical",margin:5,size:16}),(0,en.jsx)("p",{className:eV.X.Label_SM_Semibold,children:n(r?A.ZT.Childcare.Closed:l?A.ZT.Attendance.Absent:A.ZT.Childcare.Free)})]}):o&&0!==o.length?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(at.Z,{orientation:"vertical",margin:5,size:16}),(0,en.jsx)("p",{className:eV.X.Label_XS_Regular,children:(0,en.jsx)(A.vN,{translation:A.ZT.Childcare.BookedTime({hours:o})})})]}):null}),as=a(15630),al=a.n(as);let ai=e=>{let{careHoursDayData:t,recurrence:a,baseOpeningHours:r}=e,{orgDayData:n,dayName:s}=t,l=n?.starts_at,i=n?.ends_at;if(a?.mode!=="single"&&(!l||!i)){let e=r?.[`${s}_starts_at`],t=r?.[`${s}_ends_at`];return e&&t?{startsAt:e,endsAt:t}:{startsAt:"",endsAt:""}}return{startsAt:l,endsAt:i}};var ao=e=>{let{startsAt:t,endsAt:a,careHoursDayData:r,mode:n,disabled:s}=e,{baseOpeningHours:l,recurrence:i}=t2(),{t:o}=(0,A.T_)(),{dayName:d,childcareCalendarUser:c,childcareCalendarUserBase:u}=r,{startsAt:_,endsAt:m}=ai({careHoursDayData:r,recurrence:i,baseOpeningHours:l}),h=c?.[`${d}_starts_at`],p=c?.[`${d}_ends_at`],g=u?.[`${d}_starts_at`],y=u?.[`${d}_ends_at`],x=t?.length!==5,f=a?.length!==5,b=()=>{let e=R(t,_),r=H(a,m);return!e||!r},v=()=>!("deviation"!==n||b())&&!!h&&!!p,k=()=>!(!u?.daily_max_hours||b()||!y||!g),Z=()=>v()&&h?h:k()&&g?g:_,j=()=>k()&&y?y:v()&&p?p:m;return{startsAtValid:!!s||!!x||(v()?R(t,h):k()?R(t,g):R(t,_)),endsAtValid:!!s||!!f||(v()?H(a,p):k()?H(a,y):H(a,m)),startsAtErrorText:v()&&h?(0,e1.Z)(`Boka tidigast ${h}`):k()&&g?(0,e1.Z)(`Du f\xe5r bara boka efter ${g}.`):o(A.ZT.Childcare.OpensAt({hour:_})),endsAtErrorText:v()&&p?(0,e1.Z)(`Boka senast ${p}`):k()&&y?(0,e1.Z)(`Du f\xe5r bara boka innan ${y}.`):o(A.ZT.Childcare.ClosesAt({hour:m})),minTime:Z(),maxTime:j(),startsAtMaxTime:f?j():a,endsAtMinTime:x?Z():t}},ad=(0,I.memo)(e=>{let{careHoursDayData:t,mode:a,disabled:r}=e,{t:n}=(0,A.T_)(),{form:s}=(0,t6.Gc)(),{baseOpeningHours:l,recurrence:i}=t2(),{dayName:o}=t,{startsAtValid:d,endsAtValid:c,startsAtErrorText:u,endsAtErrorText:_,minTime:m,maxTime:p,startsAtMaxTime:g,endsAtMinTime:y}=ao({startsAt:s.watch("deviation"===a?"deviation_starts_at":`${o}_${h.StartTimeField}`)??"",endsAt:s.watch("deviation"===a?"deviation_ends_at":`${o}_${h.EndTimeField}`)??"",careHoursDayData:t,mode:a,disabled:r}),{startsAt:x,endsAt:f}=ai({careHoursDayData:t,recurrence:i,baseOpeningHours:l});return(0,en.jsxs)("div",{className:al().lowerRow,children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("p",{className:eV.X.Inputlabel_SM_Semibold,children:n(A.ZT.Childcare.CheckInLabel)}),(0,en.jsx)("p",{className:eJ()(eV.X.Label_XS_Regular,al().openingHourLabel),children:n(A.ZT.Childcare.OpensAt({hour:x}))}),(0,en.jsx)(tO.Z,{...s.register("deviation"===a?"deviation_starts_at":`${o}_${h.StartTimeField}`),minTime:m,maxTime:g,disabled:r,error:d?void 0:u})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("p",{className:eV.X.Inputlabel_SM_Semibold,children:n(A.ZT.Childcare.CheckOutLabel)}),(0,en.jsx)("p",{className:eJ()(eV.X.Label_XS_Regular,al().openingHourLabel),children:n(A.ZT.Childcare.ClosesAt({hour:f}))}),(0,en.jsx)(tO.Z,{...s.register("deviation"===a?"deviation_ends_at":`${o}_${h.EndTimeField}`),minTime:y,maxTime:p,disabled:r,error:c?void 0:_})]})]})}),ac=a(16538),au=a(2393),a_=a(39473),am=a.n(a_);let ah=e=>{let{comment:t}=e,{fromGuardian:a,createdBy:r,createdAt:n}=t,s=(0,ef.dl)(r??"");return(0,en.jsxs)("div",{className:eJ()(am().displayComment,{[am()["displayComment--guardian"]]:a}),children:[(0,en.jsxs)("div",{className:am()["displayComment--header"],children:[s&&(0,en.jsx)(ef.Yt,{size:"sm",user:s}),(0,en.jsxs)("div",{children:[s&&(0,en.jsx)("p",{className:eV.X.Label_XS_Semibold,children:s.full_name}),n&&(0,en.jsxs)("p",{className:eV.X.Label_XS_Regular,children:[C.Z.getISO(n)," •"," ",C.Z.getISOHour(n)]})]})]}),(0,en.jsx)("div",{className:am()["displayComment--comment"],children:(0,en.jsx)("p",{className:eJ()(eV.X.Label_XS_Regular,am().comment),children:t.comment})})]})};var ap=(0,I.memo)(e=>{let{careHoursDayData:t,isDisabled:a}=e,{t:r}=(0,A.T_)(),{form:n}=(0,t6.Gc)(),{userDayData:s,deviation:l,childcareCalendarUser:i,dayName:o}=t,{overrideDisableRules:d}=t2(),c=ex.zP()?.type_of_schooling,u=n.watch("report_absence"),_=n.watch("report_free"),[m,h]=(0,I.useState)(u||_),p=i?i[`${o}_comment_by`]:"",g=[{createdAt:i?i[`${o}_comment_at`]:"",createdBy:p,comment:s?.comment??"",fromGuardian:!0},{createdAt:l?.guardian_comment_at,createdBy:l?.guardian_comment_by,comment:l?.guardian_comment??"",fromGuardian:!0}].filter(e=>e.comment),y=g.length+(l?.comment?1:0),[x,f]=(0,I.useState)(!0),[b,v]=(0,I.useState)(g.length>0||(l?.comment?.length??0)>0),k=r(d?A.ZT.Childcare.QuickMessageFromEmployee:A.ZT.Childcare.QuickMessage);return(0,en.jsxs)("div",{children:[a?null:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("div",{className:am().absenceBox,children:[(0,en.jsxs)("div",{className:am().absenceBox__row,children:[(0,en.jsxs)("div",{className:am().commentSectionRow,children:[(0,en.jsx)(ez.J,{name:"icon-flag-outline-24"}),(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:r(A.ZT.Attendance.ReportAbsence)})]}),(0,en.jsx)(t4.Z,{"aria-label":r(A.ZT.Attendance.ReportAbsence),checked:m,onChange:()=>{h(e=>(e?n.setValue("report_absence",!1,{shouldDirty:!0}):n.setValue("report_absence",!0,{shouldDirty:!0}),n.setValue("report_free",!1,{shouldDirty:!0}),!e))},disabled:a})]}),(0,en.jsx)("div",{children:m&&(0,en.jsxs)("div",{className:am().radioButtonsWrapper,children:["Elementary"===c&&u?(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:r(A.ZT.Childcare.ReportAbsenceAlert)})}):null,(0,en.jsxs)(ac.Z.Group,{className:am().radioButtons,disabled:a,"aria-label":r(A.ZT.Attendance.ReportAbsence),children:[(0,en.jsx)(ac.Z,{label:r(A.ZT.Childcare.OverviewStatus.Reportedabsent),checked:u,onChange:e=>{let{checked:t}=e.target;t&&n.setValue("report_free",!1),n.setValue("report_absence",t,{shouldDirty:!0})}}),(0,en.jsx)(ac.Z,{label:r(A.ZT.Childcare.Free),checked:_,onChange:e=>{let{checked:t}=e.target;t&&n.setValue("report_absence",!1),n.setValue("report_free",t,{shouldDirty:!0})}})]})]})})]}),(0,en.jsxs)("div",{className:eJ()(am().absenceBox,am().commentBox),children:[(0,en.jsxs)("div",{className:am().absenceBox__row,children:[(0,en.jsxs)("div",{className:am().commentSectionRow,children:[(0,en.jsx)(ez.J,{name:"icon-comment-plus-24"}),(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:k})]}),(0,en.jsx)(tW.Z,{variant:"tertiary",size:"md",onClick:()=>{f(e=>!e)},children:r(x?A.ZT.Common.Close:d?l?.comment?A.ZT.Common.Edit:A.ZT.Common.Add:l?.guardian_comment?A.ZT.Common.Edit:A.ZT.Common.Add)})]}),x&&(0,en.jsx)("div",{className:am().textAreaBox,children:(0,en.jsx)(tA.Z,{...n.register(d?"deviation_comment":"deviation_guardian_comment"),placeholder:d?r(A.ZT.Childcare.CommentPlaceholder):k,minRows:3,label:""})})]})]}),(0,en.jsxs)("div",{className:am().absenceBox,children:[(0,en.jsxs)("button",{type:"button",disabled:0===y,className:am().absenceBox__row,onClick:()=>{v(!b)},children:[(0,en.jsxs)("div",{className:am().commentSectionRow,children:[(0,en.jsx)(ez.J,{name:"icon-comment-lines-outline-24"}),(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:r(A.ZT.Childcare.DayCommunication)}),(0,en.jsx)(au.Z,{variant:"neutral-lighter",count:y})]}),y>0&&(0,en.jsx)(tp.Z,{fontAwesomeIcon:"chevron-down",variant:"regular",rotate:b?180:0})]}),b&&(0,en.jsxs)("div",{className:am().commentsWrapper,children:[g.length>0&&(0,en.jsxs)("div",{className:am().commentSection,children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:r(A.ZT.Childcare.CommentToSchool)}),g.map(e=>(0,en.jsx)(ah,{comment:e},e.createdAt))]}),l?.comment?(0,en.jsxs)("div",{className:am().commentSection,children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:r(A.ZT.Childcare.CommentFromSchool)}),(0,en.jsx)("p",{className:eV.X.Label_XS_Regular,children:r(A.ZT.Childcare.CommentFromSchoolDescription)}),(0,en.jsx)(ah,{comment:{comment:l.comment,createdAt:l.comment_at,fromGuardian:!1,createdBy:l.comment_by}})]}):null]})]})]})});let ag=e=>{let{careHoursDayData:t,mode:a,disabledWeekdays:r}=e,{t:n}=(0,A.T_)(),{settings:s}=(0,Y.rV)(),{isReadOnly:l,statuses:i,dayName:o,childcareCalendarUser:d,childcareCalendarUserBase:c}=t,{editSameTimes:u,recurrence:_,overrideDisableRules:m,isoWeek:h}=t2(),p=C.Z.getWeek(h),g=W.Z.capitalize(C.Z.getDayname(t.isoDate)),x=d?.[`${o}_starts_at`],f=d?.[`${o}_ends_at`],{form:b}=(0,t6.Gc)(),v=b.watch("report_absence"),k=b.watch("deviation"===a?"report_free":`${o}_report_free`),Z=()=>!m&&"single"===_.mode&&!!("childcare-user"===a&&(l||i.includes(y.Locked)||i.includes(y.LockedGuardian))||i.includes(y.DayGone)),j=c?.daily_max_hours,S=c?.[`${o}_starts_at`],T=c?.[`${o}_ends_at`];return{isDisabled:Z,getHeaderTitle:()=>{if("childcare-user"===a&&u){if(s.ChildcareCalendarShowWeekend){if("single"!==_.mode||m)return`${n(A.ZT.Weekdays.Monday)} - ${n(A.ZT.Weekdays.Sunday)}`;if("sunday"===o)return g;let e=n(A.ZT.Weekdays.Sunday).toLowerCase();return`${g} - ${e}`}let e=n(A.ZT.Weekdays.Friday).toLowerCase();return"single"!==_.mode||m?`${n(A.ZT.Weekdays.Monday)} - ${e}`:"friday"===o?g:`${g} - ${e}`}return g},showDisabledDaysAlert:()=>!m&&"single"!==_.mode&&("specific"!==_.mode||!!_.specificWeeks.includes(h))&&!!(u&&r&&r.length>0||l||i.includes(y.Locked)),disabledDayText:()=>{if(r){let e=g.toLowerCase();return u&&(e=r.join(", ")),`Dina tider kommer inte sparas f\xf6r ${e} vecka ${p} f\xf6r att dagen redan passerat eller \xe4r l\xe5sta av sp\xe4rrtider.`}return""},isTimePickersDisabled:()=>!!k||!!v||!!j&&(!S||!T)||Z(),showDeviationTimeAlert:()=>"deviation"===a&&!!x&&!!f,calendarStartsAt:x,calendarEndsAt:f,showDeviantOpeningHoursAlert:()=>!!(i.includes(y.DeviantOpeningHours)&&"recurring"!==_.mode&&("specific"!==_.mode||!(_.specificWeeks.length>0)||_.specificWeeks.includes(h))),showOutsideHoursAlert:()=>!!(i.includes(y.OutsideHours)&&("specific"!==_.mode||!(_.specificWeeks.length>0)||_.specificWeeks.includes(h))),getBaseText:()=>j?!j||S&&T?S&&T?(0,e1.Z)(`Du kan boka mellan ${S} till ${T}`):null:(0,e1.Z)("Du kan inte boka tider idag."):null,hasBase:"deviation"===a&&j?i.includes(y.Empty):j}};var ay=a(38749),ax=a.n(ay),af=(0,I.memo)(e=>{let{careHoursDayData:t,mode:a="childcare-user",disabledWeekdays:r}=e,{t:n}=(0,A.T_)(),{dayName:s,orgDayData:{closed:l,starts_at:i,ends_at:o}}=t,{isDisabled:d,getHeaderTitle:c,showDisabledDaysAlert:u,disabledDayText:_,isTimePickersDisabled:m,calendarStartsAt:h,calendarEndsAt:p,showDeviationTimeAlert:g,showDeviantOpeningHoursAlert:y,showOutsideHoursAlert:x,hasBase:f,getBaseText:b}=ag({careHoursDayData:t,mode:a,disabledWeekdays:r});return(0,en.jsx)("div",{className:ax().editCareHoursDayCard,children:(0,en.jsxs)("div",{className:ax().innerWrapper,children:[(0,en.jsx)("div",{className:ax().upperRow,children:(0,en.jsxs)("div",{className:ax()["upperRow--inner"],children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:c()}),(0,en.jsx)(an,{mode:a,dayName:s,closed:l})]})}),g()&&h&&p&&(0,en.jsx)("div",{className:ax().upperRow,children:(0,en.jsx)(t7.Z,{type:"warning",children:(0,en.jsx)(t7.Z.Text,{children:(0,e1.Z)(`Du kan boka tider fr\xe5n kl ${h} till ${p}.`)})})}),u()&&(0,en.jsx)("div",{className:ax().upperRow,children:(0,en.jsx)(t7.Z,{type:"warning",children:(0,en.jsx)(t7.Z.Text,{children:_()})})}),y()&&(0,en.jsx)("div",{className:ax().upperRow,children:(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:n(A.ZT.Childcare.DeviantOpeningHours({startsAt:i,endsAt:o}))})})}),x()&&(0,en.jsx)("div",{className:ax().upperRow,children:(0,en.jsx)(t7.Z,{type:"warning",children:(0,en.jsx)(t7.Z.Text,{children:n(A.ZT.Childcare.OutsideOfOpeningHoursStatus)})})}),f&&(0,en.jsx)("div",{className:ax().upperRow,children:(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:b()})})}),(0,en.jsx)(ad,{careHoursDayData:t,mode:a,disabled:m()}),"childcare-user"===a&&(0,en.jsx)(ae,{isDisabled:d(),careHoursDayData:t}),"deviation"===a&&(0,en.jsx)(ap,{isDisabled:d(),careHoursDayData:t})]})})}),ab=a(95684),av=a(60872),ak=a.n(av),aZ=e=>{let{data:t}=e,{isoWeek:a}=(0,er.UO)(),{t:r}=(0,A.T_)(),n=Number(C.Z.getWeek(a));return(0,en.jsxs)("div",{className:ak().lowerHeaderWrapper,children:[(0,en.jsx)("p",{className:eV.X.Paragraph_SM_Semibold,children:r(A.ZT.Common.WeekNumber({week:String(n)}))}),(0,en.jsxs)("div",{className:ak().progressBarWrapper,children:[(0,en.jsxs)("p",{className:eV.X.Paragraph_XS_Regular,children:[t.amountOfHours,"h ",t.remainingMinutes,"m av"," ",t.maximumHours,"h"]}),(0,en.jsx)(ab.Z,{progress:t.progressIsInvalid?void 0:t.progressValue}),(0,en.jsxs)("p",{className:eV.X.Paragraph_XS_Semibold,children:[100===t.progressValue?`+ ${t.amountOfSurplusHours}`:`- ${t.amountOfHoursLeft}`,"h ",t.remainingMinutesLeft,"m"]})]})]})},aj=()=>{let{editSameTimes:e,careHoursDaysData:t,recurrence:a,maximumHours:r,activeTab:n,overrideDisableRules:s}=t2(),{form:l}=(0,t6.Gc)(),i=l.watch("maximum_hours")??r??0,o=t.filter(e=>!e.isReadOnly)[0],[d,c]=(0,I.useState)(0),u=t=>!!e&&(!!a&&"single"!==a.mode||!!s||!t),_=t.map(e=>{let{dayName:t,isReadOnly:a}=e;return l.watch(u(a)&&o?`${o.dayName}_starts_at`:`${t}_starts_at`)}),m=t.map(e=>{let{dayName:t,isReadOnly:a}=e;return l.watch(u(a)&&o?`${o.dayName}_ends_at`:`${t}_ends_at`)}),h=t.map(e=>{let{dayName:t,isReadOnly:a}=e;return l.watch(u(a)&&o?`${o.dayName}_report_free`:`${t}_report_free`)}),p=(0,I.useCallback)(e=>{let{acc:t,index:a,userDayData:r,watchedFree:n,watchedStartTimes:s,watchedEndTimes:l}=e,i=s[a],o=l[a],d=n[a],c=i?.length===5,u=o?.length===5,_=r?.starts_at?.length===5,m=r?.ends_at?.length===5;return(!c&&_&&(i=r?.starts_at),!u&&m&&(o=r?.ends_at),!d&&i&&o)?t+aa(i,o):t},[]);(0,I.useEffect)(()=>{c(t.reduce((e,t,a)=>{let{userDayData:r}=t;return p({acc:e,index:a,userDayData:r,watchedFree:h,watchedStartTimes:_,watchedEndTimes:m})},0))},[_,m,e,t,n,h,p]);let g=60*i,y=d/g*100,x=g-d;return{progressValue:y>100?100:y,progressIsInvalid:d>g,totalMinutes:d,amountOfHours:Math.floor(d/60),remainingMinutes:d%60,amountOfHoursLeft:Math.floor(x/60),remainingMinutesLeft:x%60,amountOfSurplusHours:Math.floor(d/60)-i,maximumHours:i}},aC=a(13975),aS=a.n(aC),aT=a(49660),aw=(e,t)=>{let a=D.gl.useListChildcareCalendarSummariesQuery({from_date:e,to_date:t});return{summaries:a.data?.summaries??[],isPending:a.isPending}},aD=a(41608),aN=a(13380),aI=a.n(aN);(c=v||(v={})).Locked="locked",c.Deviating="deviating";var aA=e=>{let{weeksToShow:t,selectedWeeks:a,setWeeks:r,close:n,addWeekToSave:s}=e,l=(e,t)=>{!e&&s&&s(t)};return(0,en.jsxs)("div",{className:aI().weekPicker,children:[(0,en.jsx)("div",{className:aI().weekPicker__content,children:t.map(e=>(0,en.jsxs)("div",{className:aI().weekPicker__weekContainer,children:[(0,en.jsx)("div",{className:aI().weekContainer__title,children:e.year}),(0,en.jsx)("div",{className:aI().weekContainer__list,children:e.weeks.map(e=>{let t=C.Z.sameWeek(e.week),r=e.status?.status?aI()[`weekContainer__listItem--${e.status.status}`]:"";return(0,en.jsx)(tm.Z,{title:e.status?.tooltip??"",disabled:!e.status?.tooltip,children:(0,en.jsxs)("button",{type:"button",className:eJ()(aI().weekContainer__listItem,r,{[aI()["weekContainer__listItem--selected"]]:a.includes(e.week),[aI()["weekContainer__listItem--disabled"]]:e.isDisabled}),disabled:e.isDisabled,onClick:()=>{l(!!(e.isDisabled||e.status?.status==="locked"),e.week)},children:[C.Z.getWeek(e.week),e.status?.iconName&&(0,en.jsx)(ez.J,{name:e.status.iconName}),t?(0,en.jsx)("div",{className:eJ()({[aI()["weekContainer__listItem--currentWeek"]]:t})}):null]},e.week)},e.week)})})]},e.year))}),r&&n&&(0,en.jsxs)("div",{className:aI().weekPicker__footer,children:[(0,en.jsxs)("div",{className:aI().weekPicker__info,children:[(0,en.jsx)("span",{className:eV.X.Label_SM_Semibold,children:(0,e1.Z)("Antal veckor valda")}),(0,en.jsx)("span",{className:eV.X.Label_SM_Regular,children:a.length})]}),(0,en.jsxs)("div",{className:aI().weekPicker__buttons,children:[(0,en.jsx)(tW.Z,{variant:"secondary",size:"sm",onClick:()=>{n(!1)},children:(0,e1.Z)("Avbryt")}),(0,en.jsx)(tW.Z,{variant:"primary",size:"sm",onClick:()=>{n(!1),r(a)},children:(0,e1.Z)("Klar")})]})]})]})},aW=e=>{let{weeksToShow:t,selectedWeeks:a,noSelectedWeeks:r,setWeeks:n,addWeekToSave:s}=e,{t:l}=(0,A.T_)(),[i,o]=(0,I.useState)(!1);return(0,en.jsxs)(aD.ZP.Root,{open:i,onChangeOpen:o,offsetOptions:{mainAxis:16,crossAxis:126},middleware:["shift","autoPlacement","autoUpdate","offset","preventOverflow"],preventOverflowOptions:{padding:10},children:[(0,en.jsx)(aD.ZP.Target,{children:(0,en.jsx)(tW.Z,{variant:"tertiary",size:"lg",tabIndex:i?void 0:-1,onClick:()=>{o(!i)},children:l(r?A.ZT.Common.Choose:A.ZT.Common.Change)})}),(0,en.jsx)(aD.ZP.Element,{children:(0,en.jsx)(aA,{weeksToShow:t,selectedWeeks:a,setWeeks:n,addWeekToSave:s,close:o})})]})},aO=a(67014),aF=a(93193),aE=e=>{let{weeksToShow:t,selectedWeeks:a,noSelectedWeeks:r,setWeeks:n,addWeekToSave:s}=e,{isOpen:l,open:i,close:o}=(0,aO.Z)(),{t:d}=(0,A.T_)();return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(tW.Z,{variant:"tertiary",size:"lg",tabIndex:l?void 0:-1,onClick:()=>{i()},children:d(r?A.ZT.Common.Choose:A.ZT.Common.Change)}),(0,en.jsx)(aF.Z,{open:l,onOpenChange:()=>{o()},children:(0,en.jsxs)(aF.Z.Content,{children:[(0,en.jsx)(aF.Z.Header,{children:(0,en.jsx)(aF.Z.Title,{children:(0,e1.Z)("V\xe4lj veckor")})}),(0,en.jsx)(aF.Z.Body,{children:(0,en.jsx)(aA,{weeksToShow:t,selectedWeeks:a,addWeekToSave:s,setWeeks:n})}),(0,en.jsx)(aF.Z.Footer,{children:(0,en.jsx)(tW.Z,{size:"lg",fullWidth:!0,variant:"secondary",onClick:()=>{o(),setTimeout(()=>{n(a)},350)},children:d(A.ZT.Common.Apply)})})]})})]})};let aB=(e,t,a)=>{let r=[];for(let n=e;n<=t;n++){let e=new Date(n,0,1),t=[];for(let r=0;r<52;r++){let r=C.Z.getISOWeek(e),n=tM(r,a),s=52>C.Z.getDifferenceInCalenderWeeks(C.Z.getISOWeek(),r)&&0>C.Z.getDifferenceInCalenderWeeks(C.Z.getISOWeek(),r);t.push({week:r,isDisabled:s,status:n}),e.setDate(e.getDate()+7)}r.push({year:n,weeks:t})}return r};var aR=e=>{let{specificWeeks:t,noSelectedWeeks:a}=e,{setRecurrence:r}=t2(),n=(0,eE.Z)(),{summaries:s}=aw(C.Z.getISO(),String(C.Z.getISO(C.Z.incrementYear(C.Z.getISO(),1)))),l=aB(2024,2025,s),i=e=>{r(t=>({...t,specificWeeks:e}))},[o,d]=(0,I.useState)(t),c=e=>{o.includes(e)?d(o.filter(t=>t!==e)):d([...o,e])};return(0,en.jsxs)(en.Fragment,{children:[n&&(0,en.jsx)(aE,{weeksToShow:l,selectedWeeks:o,noSelectedWeeks:a,setWeeks:i,addWeekToSave:c}),!n&&(0,en.jsx)(aW,{weeksToShow:l,selectedWeeks:o,noSelectedWeeks:a,setWeeks:i,addWeekToSave:c})]})},aH=a(33452),aP=a.n(aH);let aM=e=>e.reduce((e,t)=>{let a=Number(C.Z.getWeek(C.Z.parseISOWeek(t))),r=C.Z.getFullYear(t);return(e[r]||=[]).push(a),e},{}),aL=e=>String(Object.entries(aM(e)).map(e=>{let[t,a]=e;return`${t}: ${a.join(", ")} `}));var a$=()=>{let{recurrence:e}=t2(),{specificWeeks:t}=e,a=0===t.length,r=t.sort((e,t)=>e.localeCompare(t));return(0,en.jsx)("div",{className:aP().specificWeekTriggerWrapper,children:(0,en.jsxs)("div",{className:aP().specificWeekPickerButton,children:[(0,en.jsxs)("div",{className:eJ()(aP().specificWeekPickerButton__text,eV.X.Label_SM_Regular,{[aP()["specificWeekPickerButton__text--empty"]]:a}),children:[(0,en.jsx)(ez.J,{name:"icon-calendar-24"}),(0,en.jsx)("div",{className:aP().specificWeekPickerButton__label,children:a?(0,e1.Z)("Inga veckor valda"):(0,en.jsx)(tm.Z,{title:aL(r),children:(0,en.jsx)("div",{children:Object.entries(aM(r)).map(e=>{let[t,a]=e;return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)("span",{className:eV.X.Label_SM_Semibold,children:["(",t,")"]}),(0,en.jsx)("span",{className:eV.X.Label_SM_Regular,children:a.join(", ")})]})})})})})]}),(0,en.jsx)(aR,{specificWeeks:t,noSelectedWeeks:a})]})})},aU=a(23650),az=a.n(aU);let aV=e=>{let{value:t,children:a}=e,{recurrence:r,setRecurrence:n}=t2(),{recurrenceType:s}=r,l=t===s;return(0,en.jsx)("button",{type:"button",onClick:()=>{n(e=>({...e,recurrenceType:t}))},className:az().selectorButton,children:(0,en.jsx)(e3.Z,{variant:"filled",size:"md",className:eJ()(az().selector,{[az()["selector--inactive"]]:!l}),clickable:!0,endIcon:l?(0,en.jsx)(ez.J,{name:"icon-checkmark-24"}):void 0,children:a})})};var aG={Day:af,Header:e=>{let{hideMaximumHoursBar:t=!1,mode:a="week"}=e,{t:r}=(0,A.T_)(),{maximumHours:n,onClose:s,userID:l}=t2(),{form:i}=(0,t6.Gc)(),o=i.watch("maximum_hours")??n,d=(0,ef.dl)(l),{progressValue:c,progressIsInvalid:u,amountOfHours:_,remainingMinutes:m,amountOfHoursLeft:h,remainingMinutesLeft:p,amountOfSurplusHours:g,maximumHours:y}=aj();return(0,en.jsx)(en.Fragment,{children:(0,en.jsxs)("div",{className:aS().wrapper,children:[(0,en.jsxs)("div",{className:aS().headerWrapper,children:[(0,en.jsxs)("div",{className:aS().headerInfo,children:[(0,en.jsx)(t3.Z.Title,{children:r("deviation"===a?A.ZT.Childcare.ManageUserDeviation:A.ZT.Childcare.ManageUserWeek)}),(0,en.jsx)(t3.Z.Subtitle,{children:d?.full_name??""})]}),(0,en.jsx)(tW.Z,{"aria-label":"Close",variant:"tertiary",size:"md",onClick:()=>{s()},className:aS().closeButtonMobile,children:r(A.ZT.Common.Cancel)}),(0,en.jsx)(tR.Z,{size:"sm",variant:"secondary",pill:!0,"aria-label":r(A.ZT.Common.Close),onClick:()=>{s()},className:aS().closeButtonDesktop,type:"button",children:(0,en.jsx)(ez.J,{name:"icon-xmark-16"})})]}),!t&&null!==o&&o>0&&(0,en.jsx)(aZ,{data:{progressValue:c,progressIsInvalid:u,amountOfHours:_,remainingMinutes:m,amountOfHoursLeft:h,remainingMinutesLeft:p,amountOfSurplusHours:g,maximumHours:y}})]})})},Recurrence:(0,I.memo)(()=>{let{t:e}=(0,A.T_)(),{recurrence:{mode:t,amountOfWeeks:a},setRecurrence:r,overrideDisableRules:n,isoWeek:s}=t2(),l=!C.Z.sameWeek(s)&&C.Z.before(C.Z.parseISOWeek(s),new Date),i="single"===t,o=C.Z.getISOWeek()===s,{week:d}=C.Z.isoWeekToYearAndWeek(s);return(0,en.jsxs)("div",{className:az().recurrenceWrapper,children:[(0,en.jsxs)("div",{className:az().recurrenceRow,children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:e(A.ZT.Childcare.ChooseRecurrenceModeTitle)}),(0,en.jsx)("p",{className:eJ()(eV.X.Paragraph_SM_Regular,az().recurrenceRow__description),children:(0,e1.Z)("Genom att \xe4ndra fr\xe5n 'Denna vecka' kan du enkelt l\xe4gga tider f\xf6r fler veckor fram\xe5t i tiden.")})]}),(0,en.jsxs)("div",{className:az().rowWrapper,children:[(0,en.jsxs)(ac.Z.Group,{className:az().horizontalPadding,disabled:l&&!n,"aria-label":e(A.ZT.Childcare.ChooseRecurrenceModeTitle),children:[(0,en.jsx)(ac.Z,{label:e(o?A.ZT.Childcare.CurrentWeek({weekNumber:String(d)}):A.ZT.Childcare.ChosenWeek({weekNumber:String(d)})),checked:"single"===t,onChange:()=>{r(e=>({...e,mode:i?"recurring":"single"}))}}),(0,en.jsx)(ac.Z,{label:e(A.ZT.Childcare.Recurrence.Recurring),checked:"recurring"===t,onChange:()=>{r(e=>({...e,mode:"recurring"}))}}),(0,en.jsx)(ac.Z,{label:e(A.ZT.Childcare.Recurrence.Specific),checked:"specific"===t,onChange:()=>{r(e=>({...e,mode:"specific"}))}})]}),"recurring"===t&&(0,en.jsxs)("div",{className:az().blockMargin,children:[(0,en.jsxs)("div",{className:az().selectorWrapper,children:[(0,en.jsx)(aV,{value:b.EveryWeek,children:e(A.ZT.Childcare.Recurrence.EveryWeek)}),(0,en.jsx)(aV,{value:b.OddWeeks,children:e(A.ZT.Childcare.Recurrence.OddWeeks)}),(0,en.jsx)(aV,{value:b.EvenWeeks,children:e(A.ZT.Childcare.Recurrence.EvenWeeks)}),(0,en.jsx)(aV,{value:b.EveryThirdWeek,children:e(A.ZT.Childcare.Recurrence.EveryThirdWeek)})]}),(0,en.jsx)(aT.Z,{label:e(A.ZT.Childcare.Recurrence.AmountOfWeeksDescription),description:"Ett intervall kan vara mellan 2 till 52 veckor l\xe5ngt.",className:eJ()(az().blockMargin,az().horizontalPadding),value:a,onChangeValue:e=>{isNaN(Number(e))||r(t=>({...t,amountOfWeeks:Number(e)}))},error:a<2||a>52?(0,e1.Z)("Du m\xe5ste ange ett v\xe4rde mellan 2 och 52 veckor."):void 0,inputMode:"numeric"})]}),"specific"===t&&(0,en.jsx)(a$,{})]})]})})},aJ=a(34046),aq=a.n(aJ),aX=()=>{let{onClose:e,invalidateQuery:t}=t2(),a=()=>{e({force:!0}),t()},r=D.F6.useUpdateChildcareDeviationAsGuardianMutation({onSuccess:()=>{a(),E.FN.success(A.ag.t(A.ZT.Childcare.SavedChanges))}}),n=D.F6.useCreateChildcareDeviationMutation({onSuccess:()=>{a(),E.FN.success(A.ag.t(A.ZT.Childcare.CreatedDeviationToast))}}),s=D.F6.useUpdateChildcareDeviationMutation({onSuccess:()=>{a(),E.FN.success(A.ag.t(A.ZT.Childcare.SavedChanges))}}),l=D.F6.useDeleteChildcareDeviationMutation({onSuccess:()=>{a(),E.FN.success(A.ag.t(A.ZT.Childcare.DeletedDeviationToast))}}),i=D.F6.useCreateChildcareDeviationAsGuardianMutation({onSuccess:()=>{a(),E.FN.success(A.ag.t(A.ZT.Childcare.CreatedDeviationToast))}}),o=s.isPending||r.isPending||n.isPending||i.isPending;return{create:n.mutate,createAsGuardian:i.mutate,update:s.mutate,updateAsGuardian:r.mutate,delete:l.mutate,isPending:o}};let aY=e=>{let{deviation:t,childcareCalendarUser:a,statuses:r,childcareCalendarUserBase:n,dayName:s}=e,l=n?.[`${s}_starts_at`],i=a?.[`${e.dayName}_starts_at`],o=a?.[`${e.dayName}_ends_at`],d=!!n?.daily_max_hours&&!i&&!l,c=t?.starts_at??i,u=t?.ends_at??o,_=!t?.absence&&(d||r.includes(y.Free));return{week:a?.week??0,year:a?.year??0,deviation_guardian_comment:t?.guardian_comment??"",deviation_comment:t?.comment??"",deviation_starts_at:c??null,deviation_ends_at:u??null,report_absence:t?.absence??!1,report_free:_}},aQ=e=>{let{startsAt:t,endsAt:a,startsAtComparison:r,endsAtComparison:n}=e,s=R(t,r)&&H(t,n),l=R(a,r)&&H(a,n);return s&&l},aK=e=>{let{startsAt:t,endsAt:a}=e,r=H(t,a),n=R(a,t);return r&&n},a0=e=>({calendarStartsAt:e.childcareCalendarUser?.[`${e.dayName}_starts_at`],calendarEndsAt:e.childcareCalendarUser?.[`${e.dayName}_ends_at`]}),a1=(e,t)=>{tF.Y.trackEvent(tF.Y.Event.FormData,{context:"carehours-sidepanel-deviation",isEmployee:t,value:{report_free:e.report_free||void 0,report_absence:e.report_absence||void 0,deviation_comment:!!e.deviation_guardian_comment}})},a6=(e,t)=>{let{startsAt:a,endsAt:r}=a5(e),{calendarStartsAt:n,calendarEndsAt:s}=a0(t);return a===n&&r===s&&!e.deviation_guardian_comment&&!e.deviation_comment},a5=e=>e.report_free||e.report_absence?{startsAt:null,endsAt:null}:{startsAt:e.deviation_starts_at,endsAt:e.deviation_ends_at},a2=(e,t)=>{let{startsAt:a,endsAt:r}=a5(e);if(!a||!r)return{insideOpeningHours:!0,isWithinMaxHours:!0};let{childcareCalendarUserBase:n,dayName:s}=t,{calendarStartsAt:l,calendarEndsAt:i}=a0(t),o=aQ({startsAt:a,endsAt:r,startsAtComparison:l||t.orgDayData.starts_at,endsAtComparison:i||t.orgDayData.ends_at}),d=!0,c=n?.[`${s}_starts_at`],u=n?.[`${s}_ends_at`];return n?.daily_max_hours&&c&&u&&a&&r&&(d=aQ({startsAt:a,endsAt:r,startsAtComparison:c,endsAtComparison:u})),{insideOpeningHours:o,isWithinMaxHours:d}};var a3=e=>{let{careHoursDayData:t}=e,{overrideDisableRules:a,setFormIsDirty:r}=t2(),{deviation:n,userID:s}=t,{form:l}=(0,t6.cI)({defaultValues:aY(t)}),i=(0,eE.Z)(),o=aX(),d=l.formState.isDirty;(0,I.useEffect)(()=>{r(d)},[d,r]);let c=e=>{if(!n)return;let{startsAt:r,endsAt:s}=a5(e);if(a6(e,t)){o.delete({id:n.id,user_id:n.user_id});return}if(a){o.update({id:n.id,guardian_comment:e.deviation_guardian_comment,comment:e.deviation_comment,user_id:n.user_id,starts_at:r,ends_at:s,absence:e.report_absence});return}o.updateAsGuardian({id:n.id,guardian_comment:e.deviation_guardian_comment,comment:e.deviation_comment,user_id:n.user_id,starts_at:r,ends_at:s,absence:e.report_absence})};return{form:l,handleSubmit:e=>{if(!t.childcareCalendarUser)return;let{insideOpeningHours:r,isWithinMaxHours:l}=a2(e,t);if(!r){E.FN.error((0,e1.Z)("Tiden \xe4r utanf\xf6r giltig intervall"),{position:i?"top-center":"top-right"});return}if(!l){E.FN.error((0,e1.Z)("Tiderna \xe4r utanf\xf6r grundtider"),{position:i?"top-center":"top-right"});return}if(a1(e,a),n?.id){c(e);return}let{startsAt:d,endsAt:u}=a5(e);if(a){o.create({guardian_comment:e.deviation_guardian_comment,comment:e.deviation_comment,user_id:s,date:t.isoDate,starts_at:d,ends_at:u,absence:e.report_absence});return}o.createAsGuardian({guardian_comment:e.deviation_guardian_comment,comment:e.deviation_comment,user_id:s,date:t.isoDate,starts_at:d,ends_at:u,absence:e.report_absence})},isPending:o.isPending}},a7=e=>{let{careHoursDayData:t}=e,{isReadOnly:a,statuses:r}=t,{overrideDisableRules:n,formIsDirty:s}=t2(),l=!s||r.includes(y.DayGone)||a,{t:i}=(0,A.T_)(),{form:o,handleSubmit:d,isPending:c}=a3({careHoursDayData:t});return(0,en.jsx)(tI.Z,{onSubmit:o.handleSubmit(d),className:aq().formWrapper,children:(0,en.jsxs)(t6.RV,{...o,children:[(0,en.jsx)(aG.Header,{hideMaximumHoursBar:!0,mode:"deviation"}),(0,en.jsx)(t3.Z.Content,{children:(0,en.jsx)("div",{className:aq().editChildcareWrapper,children:(0,en.jsx)(aG.Day,{careHoursDayData:t,mode:"deviation"})})}),(0,en.jsx)(t3.Z.Footer,{children:(0,en.jsx)(tW.Z,{size:"lg",disabled:l&&!n,variant:"primary",type:"submit",loading:c,fullWidth:!0,children:i(A.ZT.Common.Save)})})]})})},a4=a(39092),a9=a.n(a4);let a8=e=>{let{recurrenceType:t,initialISOWeek:a,amountOfWeeks:r}=e,n=[],s=a,l=0;for(;l<r;){let e=t===b.EveryThirdWeek?3:1,a=Number(C.Z.getWeek(s));switch(t){case b.EveryWeek:n.push(s);break;case b.OddWeeks:a%2!=0&&n.push(s);break;case b.EvenWeeks:a%2==0&&n.push(s);break;case b.EveryThirdWeek:n.push(s)}s=C.Z.incrementISOWeek(s,e),l+=e}return n};var re=e=>{tF.Y.trackEvent(tF.Y.Event.FormData,{context:"carehours-sidepanel-single-day",isEmployee:e})},rt=e=>{let{overrideDisableRules:t,hasLabel:a}=e;tF.Y.trackEvent(tF.Y.Event.FormData,{value:{mode:"single",intervalWithName:a},context:"carehours-sidepanel",isEmployee:t})},ra=e=>{let{overrideDisableRules:t,hasLabel:a,amountOfWeeks:r,recurrenceType:n}=e;tF.Y.trackEvent(tF.Y.Event.FormData,{value:{amountOfWeeks:r,mode:"recurring",recurrenceType:n,intervalWithName:a},context:"carehours-sidepanel",isEmployee:t})},rr=e=>{let{overrideDisableRules:t,hasLabel:a,amountOfSpecificWeeks:r}=e;tF.Y.trackEvent(tF.Y.Event.FormData,{value:{amountOfSpecificWeeks:r??null,mode:"specific",intervalWithName:a},context:"carehours-sidepanel",isEmployee:t})};let rn=(e,t,a)=>t?.id?!t[`${e}_starts_at`]&&!t[`${e}_ends_at`]:!!a?.daily_max_hours&&!a[`${e}_starts_at`]&&!a[`${e}_ends_at`],rs=(e,t)=>({label:e?.label,id:e?.id,monday_starts_at:e?.monday_starts_at,monday_ends_at:e?.monday_ends_at,monday_comment:e?.monday_comment,tuesday_starts_at:e?.tuesday_starts_at,tuesday_ends_at:e?.tuesday_ends_at,tuesday_comment:e?.tuesday_comment,wednesday_starts_at:e?.wednesday_starts_at,wednesday_ends_at:e?.wednesday_ends_at,wednesday_comment:e?.wednesday_comment,thursday_starts_at:e?.thursday_starts_at,thursday_ends_at:e?.thursday_ends_at,thursday_comment:e?.thursday_comment,friday_starts_at:e?.friday_starts_at,friday_ends_at:e?.friday_ends_at,friday_comment:e?.friday_comment,saturday_starts_at:e?.saturday_starts_at,saturday_ends_at:e?.saturday_ends_at,saturday_comment:e?.saturday_comment,sunday_comment:e?.sunday_comment,sunday_starts_at:e?.sunday_starts_at,sunday_ends_at:e?.sunday_ends_at,user_id:e?.user_id,week:e?.week,year:e?.year,monday_report_free:rn("monday",e,t),tuesday_report_free:rn("tuesday",e,t),wednesday_report_free:rn("wednesday",e,t),thursday_report_free:rn("thursday",e,t),friday_report_free:rn("friday",e,t),saturday_report_free:rn("saturday",e,t),sunday_report_free:rn("sunday",e,t)}),rl=e=>{let{maximumHours:t,careHoursDaysData:a,careHoursInfo:r}=e;return!!t&&a.reduce((e,t)=>{let{isoDate:a}=t,n=r[a],s=n?.startsAt,l=n?.endsAt,i=n?.isFree;return s&&l&&!i?e+aa(s,l):e},0)>60*t},ri=e=>{let{careHoursDaysData:t,editSameTimes:a,onChange:r,recurrence:n,overrideDisableRules:s,careHoursInfo:l}=e,i=[],o=[],d=[];for(let e of t){let c=e.dayName,u=l[e.isoDate],_=u?.isFree,m=u?.startsAt,h=u?.endsAt,p=!!e.childcareCalendarUserBase?.daily_max_hours,g=e.childcareCalendarUserBase?.[`${c}_starts_at`],y=e.childcareCalendarUserBase?.[`${c}_ends_at`],x=C.Z.before(e.isoDate);if(p&&!x&&!e?.orgDayData.closed&&g&&y&&m&&h&&(aQ({startsAt:m,endsAt:h,startsAtComparison:g,endsAtComparison:y})||o.push(e.isoDate),aK({startsAt:m,endsAt:h})||d.push(e.isoDate)),a){if("single"===n.mode&&e.isReadOnly&&!s)continue;if(_){r(`${c}_report_free`,!0);continue}if(!m||!h)continue;let a=t.find(t=>t.isoDate===e.isoDate);if(!a?.orgDayData||a.orgDayData.closed)continue;let l=aQ({startsAt:m,endsAt:h,startsAtComparison:a.orgDayData.starts_at,endsAtComparison:a.orgDayData.ends_at});r(`${c}_report_free`,!1),r(`${c}_starts_at`,m),r(`${c}_ends_at`,h),l||i.push(e.isoDate),aK({startsAt:m,endsAt:h})||d.push(e.isoDate);continue}if(_||!m||!h)continue;let f=t.find(t=>t.isoDate===e.isoDate);f?.orgDayData&&!f.orgDayData.closed&&(aQ({startsAt:m,endsAt:h,startsAtComparison:f.orgDayData.starts_at,endsAtComparison:f.orgDayData.ends_at})||i.push(e.isoDate),aK({startsAt:m,endsAt:h})||d.push(e.isoDate))}return{outsideOpeningHours:i,outsideMaxHours:o,invalidDates:d}},ro=e=>{let{state:t,careHoursDaysData:a,editSameTimes:r,firstEditableDayName:n}=e,s={};for(let e of a){let a=r&&n?n:e.dayName,l=e.childcareCalendarUserBase?.[`${a}_ends_at`],i=e.childcareCalendarUserBase?.[`${a}_starts_at`],o=!!e.childcareCalendarUserBase?.daily_max_hours&&!i&&!l,d=t[`${a}_report_free`]||o,c=t[`${a}_starts_at`],u=t[`${a}_ends_at`],_=t[`${a}_comment`];s[e.isoDate]={startsAt:c,endsAt:u,isFree:!!d,comment:_,isFreeFromMaxHours:o}}return s},rd=e=>{let{firstEditableDayName:t}=e,{settings:a}=(0,Y.rV)(),{editSameTimes:r,recurrence:n,invalidateQuery:s,onClose:l,userID:i,isoWeek:o,careHoursDaysData:d,overrideDisableRules:c,childcareCalendar:u}=t2(),_=u?.break_period??!1,m=(0,E.N4)(),{t:h}=(0,A.T_)(),p=Number(C.Z.getWeek(o)),g=Number(C.Z.getISOYear(o)),y=r?h(A.ZT.Childcare.Alerts.SameTimes):h(A.ZT.Childcare.Alerts.DifferentTimes),x=D.F6.useUpsertChildcareCalendarUserMutation({onSuccess:()=>{E.FN.success(h(A.ZT.Childcare.SavedChanges)),b()},onError:()=>{s()}}),f=(e,s)=>{let l={},i=ro({careHoursDaysData:d,state:e,editSameTimes:r,firstEditableDayName:t});return d.filter(e=>{let{dayName:t,isReadOnly:r,isoDate:l}=e,i=!1;if(a.ChildcareCalendarShowWeekend||(i="saturday"===t||"sunday"===t),c)return!i;if(s){let e=C.Z.parseISOWeek(s);return"single"===n.mode&&C.Z.sameWeek(e,l)?!r&&!i:!i}return!r&&!i}).forEach(e=>{let{dayName:t,isoDate:a}=e,r=i[a],n=r?.isFree,s=r?.startsAt,o=r?.endsAt,d=r?.comment;if(n){l={...l,[`${t}_starts_at`]:null,[`${t}_ends_at`]:null,[`${t}_comment`]:d};return}l={...l,[`${t}_starts_at`]:s||null,[`${t}_ends_at`]:o||null,[`${t}_comment`]:d}}),l},b=()=>{s(),l({force:!0}),m.close()};return{handleRecurrence:e=>{let t=h(A.ZT.Childcare.Recurrence[n.recurrenceType]).toLowerCase(),{week:a}=C.Z.isoWeekToYearAndWeek(o),r=A.ZT.Childcare.Alerts.RecurringWeeks({cycle:t,amountOfWeeks:String(n.amountOfWeeks),fromWeek:String(a),times:y});ra({amountOfWeeks:n.amountOfWeeks,hasLabel:!!e.label,recurrenceType:n.recurrenceType,overrideDisableRules:c}),m.open({title:h(A.ZT.Childcare.Alerts.AlertTitle),cancelButtonText:h(A.ZT.Childcare.Alerts.AlertCancel),primaryActionButtonText:h(A.ZT.Common.Save),description:(0,en.jsx)(A.vN,{translation:r}),onPrimaryAction:()=>{let t=new O.u;for(let a of a8({recurrenceType:n.recurrenceType,initialISOWeek:o,amountOfWeeks:n.amountOfWeeks})){let{week:r,year:n}=C.Z.isoWeekToYearAndWeek(a),s=f(e,a);t.addUpsertChildcareCalendarUserRequest({...s,week:r,year:n,user_id:i,label:e.label})}let a=t.execute().finally(b);E.FN.promise(a,h(A.ZT.Childcare.SavedChanges))}})},handleSpecificWeeks:e=>{let t;let a=n.specificWeeks?.map(e=>{let{week:t,year:a}=C.Z.isoWeekToYearAndWeek(e);return{week:t,year:a,isoWeek:e}}),s=[...new Set(a?.map(e=>e.year))],l=s[0],o=s[1];if(t=A.ZT.Childcare.Alerts.SpecifikWeeks({weeks:a.map(e=>e.week).join(", "),year:String(l),times:r?h(A.ZT.Childcare.Alerts.SameTimes):h(A.ZT.Childcare.Alerts.DifferentTimes)}),l&&o){let e=e=>a.filter(t=>t.year===e).map(e=>e.isoWeek);t=A.ZT.Childcare.Alerts.SpecifikWeeksMultipleYears({weeks1:$.getSelectedWeekText(e(l)),year1:String(l),weeks2:$.getSelectedWeekText(e(o)),year2:String(o),times:y})}rr({amountOfSpecificWeeks:n.specificWeeks.length,overrideDisableRules:c,hasLabel:!!e.label}),m.open({title:h(A.ZT.Childcare.Alerts.AlertTitle),cancelButtonText:h(A.ZT.Childcare.Alerts.AlertCancel),primaryActionButtonText:h(A.ZT.Common.Save),description:(0,en.jsx)(A.vN,{translation:t}),onPrimaryAction:()=>{let t=new O.u;for(let r of a){let a=f(e,r.isoWeek);t.addUpsertChildcareCalendarUserRequest({...a,week:r.week,year:r.year,user_id:i,label:e.label})}let r=t.execute().finally(b);E.FN.promise(r,h(A.ZT.Childcare.SavedChanges))}})},handleMultipledays:e=>{let t=r?h(A.ZT.Childcare.Alerts.SameTimes):h(A.ZT.Childcare.Alerts.DifferentTimes),a=f(e);m.open({title:h(A.ZT.Childcare.Alerts.AlertTitle),cancelButtonText:h(A.ZT.Childcare.Alerts.AlertCancel),primaryActionButtonText:h(A.ZT.Common.Save),description:(0,en.jsx)(A.vN,{translation:A.ZT.Childcare.Alerts.CurrentWeek({weekNumber:String(p),times:t})}),onPrimaryAction:()=>{rt({overrideDisableRules:c,hasLabel:!!e.label}),x.mutate({...a,week:p,year:g,user_id:i,label:e.label,confirmed:_})}})},handleSingleDay:e=>{let t=f(e);re(c),x.mutate({...t,week:p,year:g,user_id:i,label:e.label,confirmed:_})},confirm:m}},rc=(e,t)=>e.every(e=>{let a=t[e.isoDate];return!!(a?.isFree||a?.isFreeFromMaxHours)||!!e.isReadOnly||a?.startsAt&&a?.endsAt}),ru=(e,t)=>(e>52||e<2)&&(E.FN.error((0,e1.Z)("Du m\xe5ste ange ett veckointervall mellan 2 och 52 veckor"),{position:t?"top-center":"top-right"}),!0),r_=e=>{let{onChangeValue:t,firstEditableDay:a,selectedDayData:r}=e,{editSameTimes:n,setEditSameTimes:s,recurrence:l,careHoursDaysData:i,overrideDisableRules:o,maximumHours:d}=t2(),c=(0,eE.Z)(),{t:u}=(0,A.T_)(),{handleSingleDay:_,handleRecurrence:m,handleSpecificWeeks:h,handleMultipledays:p,confirm:g}=rd({firstEditableDayName:a?.dayName});return{handleSubmit:e=>{if(!a)return;let g=r?[r]:i,y=ro({state:e,careHoursDaysData:g,editSameTimes:n,firstEditableDayName:a.dayName});if(ru(l.amountOfWeeks,c))return;if(!rc(g,y)){E.FN.error((0,e1.Z)("Alla dagar m\xe5ste ha tider"),{position:c?"top-center":"top-right"});return}let{outsideOpeningHours:x,outsideMaxHours:f,invalidDates:b}=ri({state:e,careHoursDaysData:g,editSameTimes:n,onChange:t,firstEditableDate:a,recurrence:l,overrideDisableRules:o,careHoursInfo:y});if(x.length>0){E.FN.error(u(A.ZT.Childcare.OutsideOfOpeningHoursToast),{position:c?"top-center":"top-right"}),s(!1);return}if(f.length>0){E.FN.error((0,e1.Z)(r?"Tiden \xe4r utanf\xf6r grundtiderna":"N\xe5gon av tiderna ligger utanf\xf6r grundtiderna"),{position:c?"top-center":"top-right"}),s(!1);return}if(b.length>0){E.FN.error((0,e1.Z)("N\xe5gon av tiderna \xe4r ogiltiga"),{position:c?"top-center":"top-right"}),s(!1);return}if(rl({maximumHours:d,careHoursDaysData:i,careHoursInfo:y})){E.FN.error((0,e1.Z)("Du har \xf6verskridit max antal timmar"),{position:c?"top-center":"top-right"});return}if("specific"===l.mode){if(0===l.specificWeeks.length){E.FN.error((0,e1.Z)("Du m\xe5ste v\xe4lja minst en vecka"),{position:c?"top-center":"top-right"});return}h(e);return}if("recurring"===l.mode){m(e);return}if(!r){p(e);return}_(e)},confirm:g}};var rm=e=>{let{selectedDayData:t}=e,{t:a}=(0,A.T_)(),{recurrence:r}=t2(),{editSameTimes:n,setEditSameTimes:s,careHoursDaysData:l,isoDates:i,setFormIsDirty:o,overrideDisableRules:d,hasTimesInBase:c}=t2(),u=l.filter(e=>!!d||!e.isReadOnly),_=l.filter(e=>!!(e.isReadOnly||e.statuses.includes(y.Locked))).map(e=>C.Z.getDayname(e.isoDate)),m=u[0],h=t??m,p=h?.childcareCalendarUser,g=h?.childcareCalendarUserBase,x=g?.locked,[f,b]=(0,I.useState)(!1),v=(0,I.useCallback)(()=>{l&&s(1===new Set(i.map(e=>{let{starts_at:t,comment:a,ends_at:r}=l.find(t=>t.isoDate===e.isoDate)?.userDayData??{};return`${t??""}-${a??""}-${r??""}`})).size)},[l,i,s]);(0,I.useEffect)(()=>{if(t){m&&s(!0);return}v()},[p,t,m,v,s]);let{form:k}=(0,t6.cI)({defaultValues:rs(p,g)}),Z=k.formState.isDirty;(0,I.useEffect)(()=>{o(Z)},[Z,o]);let{handleSubmit:j,confirm:S}=r_({onChangeValue:k.setValue,firstEditableDay:m,selectedDayData:t}),T=k.watch("label");return(0,en.jsx)(tI.Z,{onSubmit:k.handleSubmit(j),className:aq().formWrapper,children:(0,en.jsxs)(t6.RV,{...k,children:[(0,en.jsx)(aG.Header,{}),(0,en.jsx)(E.I4,{...S}),(0,en.jsx)(t3.Z.Content,{children:(0,en.jsx)("div",{className:aq().editChildcareWrapper,children:t?(0,en.jsx)(aG.Day,{careHoursDayData:t}):(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(aG.Recurrence,{}),(0,en.jsxs)("div",{className:a9().labelBox,children:[(0,en.jsxs)("button",{className:a9().labelBoxButton,type:"button",onClick:()=>{b(!f)},children:[(0,en.jsxs)("div",{className:a9().labelBoxText,children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:(0,e1.Z)(r.specificWeeks.length>1?"Namnge veckor":"Namnge vecka")}),(0,en.jsx)("p",{className:eJ()(eV.X.Label_SM_Regular,a9().labelBoxSubtitle),children:(0,e1.Z)(T||"Inget namn")})]}),(0,en.jsx)("div",{className:eJ()(a9().labelBoxIcon,{[a9()["labelBoxIcon--rotated"]]:f}),children:(0,en.jsx)(ez.J,{name:"icon-chevron-down-24"})})]}),f&&(0,en.jsx)("div",{className:a9().labelBoxInner,children:(0,en.jsx)(aT.Z,{placeholder:(0,e1.Z)("Veckonamn"),"aria-label":"Veckonamn",...k.register("label")})})]}),!c&&(0,en.jsxs)(ac.Z.Group,{label:a(A.ZT.Childcare.EditSameTimesRadioLabel),children:[(0,en.jsx)(ac.Z,{label:a(A.ZT.Childcare.EditSameTimes),checked:n,onChange:()=>{s(!0)}}),(0,en.jsx)(ac.Z,{label:a(A.ZT.Childcare.DifferentTimes),checked:!n,onChange:()=>{s(!1)}})]}),x&&(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:a(d?A.ZT.Childcare.LockedForGuardianAsEmployee:A.ZT.Childcare.LockedForGuardian)})}),n&&m?(0,en.jsx)(aG.Day,{careHoursDayData:m,disabledWeekdays:_}):l.map(e=>(0,en.jsx)(aG.Day,{careHoursDayData:e,disabledWeekdays:_},e.isoDate))]})})}),(0,en.jsx)(t3.Z.Footer,{children:(0,en.jsx)(tW.Z,{size:"lg",disabled:!("single"===r.mode?Z:"specific"===r.mode?Z||r.specificWeeks.length>1:Z||r.amountOfWeeks>1),variant:"primary",type:"submit",fullWidth:!0,children:a(A.ZT.Common.Save)})})]})})};let rh=(0,I.createContext)({careHoursDaysData:[],invalidateQuery:()=>{},maximumHours:null,onClose:()=>{}}),rp=()=>(0,I.useContext)(rh);var rg=()=>{let{careHoursDaysData:e,maximumHours:t}=rp(),{form:a}=(0,t6.Gc)(),r=a.watch("maximum_hours")??t??0,[n,s]=(0,I.useState)(0),l=e.map(e=>{let{dayName:t}=e;return a.watch(`${t}_starts_at`)}),i=e.map(e=>{let{dayName:t}=e;return a.watch(`${t}_ends_at`)}),o=e.map(e=>{let{dayName:t}=e;return a.watch(`${t}_report_free`)}),d=(0,I.useCallback)(e=>{let{acc:t,index:a,userDayData:r,watchedFree:n,watchedStartTimes:s,watchedEndTimes:l}=e,i=s[a],o=l[a],d=n[a],c=i?.length===5,u=o?.length===5,_=r?.starts_at?.length===5,m=r?.ends_at?.length===5;return(!c&&_&&(i=r?.starts_at),!u&&m&&(o=r?.ends_at),!d&&i&&o)?t+aa(i,o):t},[]);(0,I.useEffect)(()=>{s(e.reduce((e,t,a)=>{let{userDayData:r}=t;return d({acc:e,index:a,userDayData:r,watchedFree:o,watchedStartTimes:l,watchedEndTimes:i})},0))},[l,i,e,o,d]);let c=60*r,u=n/c*100,_=c-n;return{progressValue:u>100?100:u,progressIsInvalid:n>c,totalMinutes:n,amountOfHours:Math.floor(n/60),remainingMinutes:n%60,amountOfHoursLeft:Math.floor(_/60),remainingMinutesLeft:_%60,amountOfSurplusHours:Math.floor(n/60)-r,maximumHours:r}},ry=a(87314),rx=a.n(ry),rf=e=>{let{userID:t}=e,{t:a}=(0,A.T_)(),{maximumHours:r,onClose:n}=rp(),{form:s}=(0,t6.Gc)(),l=s.watch("maximum_hours")??r,i=(0,ef.dl)(t),{progressValue:o,progressIsInvalid:d,amountOfHours:c,remainingMinutes:u,amountOfHoursLeft:_,remainingMinutesLeft:m,amountOfSurplusHours:h,maximumHours:p}=rg();return(0,en.jsx)(en.Fragment,{children:(0,en.jsxs)("div",{className:rx().wrapper,children:[(0,en.jsxs)("div",{className:rx().headerWrapper,children:[(0,en.jsxs)("div",{className:rx().headerInfo,children:[(0,en.jsx)(t3.Z.Title,{children:(0,e1.Z)("Inst\xe4llningar f\xf6r")}),(0,en.jsx)(t3.Z.Subtitle,{children:i?.full_name??""})]}),(0,en.jsx)(tW.Z,{"aria-label":"Close",variant:"tertiary",size:"md",onClick:()=>{n()},className:rx().closeButtonMobile,children:a(A.ZT.Common.Cancel)}),(0,en.jsx)(tR.Z,{size:"sm",variant:"secondary",pill:!0,"aria-label":a(A.ZT.Common.Close),onClick:()=>{n()},className:rx().closeButtonDesktop,type:"button",children:(0,en.jsx)(ez.J,{name:"icon-xmark-16"})})]}),null!==l&&l>0&&(0,en.jsx)(aZ,{data:{progressValue:o,progressIsInvalid:d,amountOfHours:c,remainingMinutes:u,amountOfHoursLeft:_,remainingMinutesLeft:m,amountOfSurplusHours:h,maximumHours:p}})]})})},rb=a(92409),rv=a.n(rb),rk=e=>{let{dayName:t,schoolEndsAt:a,schoolStartsAt:r}=e,{t:n}=(0,A.T_)(),{form:s}=(0,t6.Gc)(),l=s.watch(`${t}_${h.StartTimeField}`),i=s.watch(`${t}_${h.EndTimeField}`),o=s.watch(`${t}_report_free`),d=!!o||!l||R(l??"",r)&&H(l??"",a),c=!!o||!i||R(i??"",r)&&H(i??"",a),u=ar(aa(l??"",i??"")),_=n(tT.i.getDayNameTranslation(t));return(0,en.jsx)("div",{className:rv().editCareHoursDayCard,children:(0,en.jsxs)("div",{className:rv().innerWrapper,children:[(0,en.jsx)("div",{className:rv().upperRow,children:(0,en.jsxs)("div",{className:rv()["upperRow--inner"],children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:_}),o?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(at.Z,{orientation:"vertical",margin:5,size:30}),(0,en.jsx)("p",{className:eV.X.Label_XS_Regular,children:n(A.ZT.Childcare.Free)})]}):u&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(at.Z,{orientation:"vertical",margin:5,size:30}),(0,en.jsx)(A.vN,{translation:A.ZT.Childcare.BookedBaseTimes({hours:u})})]})]})}),(0,en.jsxs)("div",{className:rv().lowerRow,children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("p",{className:eV.X.Inputlabel_SM_Semibold,children:n(A.ZT.Childcare.CheckInLabel)}),r&&(0,en.jsx)("p",{className:eJ()(eV.X.Label_XS_Regular,rv().openingHourLabel),children:n(A.ZT.Childcare.OpensAt({hour:r}))}),(0,en.jsx)(tO.Z,{...s.register(`${t}_${h.StartTimeField}`),className:rv().timeInput,minTime:r??"",maxTime:a??"",error:!d,disabled:o}),!d&&r&&(0,en.jsxs)("div",{className:rv().timeInputError,children:[(0,en.jsx)(ez.J,{name:"icon-exclamation-triangle-fill-24"}),(0,en.jsx)("p",{className:eV.X.Label_XS_Regular,children:n(A.ZT.Childcare.OpensAt({hour:r}))})]})]}),(0,en.jsxs)("div",{children:[(0,en.jsx)("p",{className:eV.X.Inputlabel_SM_Semibold,children:n(A.ZT.Childcare.CheckOutLabel)}),a&&(0,en.jsx)("p",{className:eJ()(eV.X.Label_XS_Regular,rv().openingHourLabel),children:n(A.ZT.Childcare.ClosesAt({hour:a}))}),(0,en.jsx)(tO.Z,{...s.register(`${t}_${h.EndTimeField}`),className:rv().timeInput,minTime:r??"",maxTime:a??"",disabled:o,error:!c}),!c&&a&&(0,en.jsxs)("div",{className:rv().timeInputError,children:[(0,en.jsx)(ez.J,{name:"icon-exclamation-triangle-fill-24"}),(0,en.jsx)("p",{className:eV.X.Label_XS_Regular,children:n(A.ZT.Childcare.ClosesAt({hour:a}))})]})]})]}),(0,en.jsxs)("div",{className:rv().actionRow,children:[(0,en.jsx)("p",{children:n(A.ZT.Childcare.Free)}),(0,en.jsx)(t4.Z,{"aria-label":"Ledig",...s.register(`${t}_report_free`)})]})]})})},rZ=a(39443),rj=a.n(rZ);let rC=(e,t)=>e[`${t}_report_free`]?null:e[`${t}_starts_at`]||null,rS=(e,t)=>e[`${t}_report_free`]?null:e[`${t}_ends_at`]||null;var rT=()=>{let{t:e}=(0,A.T_)(),{careHoursDaysData:t,invalidateQuery:a}=rp(),r=(0,E.VY)(),{settings:n}=(0,Y.rV)(),{userID:s}=(0,er.UO)();if(!s)throw Error("No userID provided");let l=t?.[0]?.childcareCalendarUserBase,i=tB({userID:s}),o=(0,eE.Z)(),{form:d}=(0,t6.cI)({defaultValues:{maximum_hours:l?.maximum_hours??null,locked:l?.locked??!1,daily_max_hours:l?.daily_max_hours??!1,monday_starts_at:l?.monday_starts_at,monday_ends_at:l?.monday_ends_at,monday_report_free:!!l?.daily_max_hours&&!l?.monday_starts_at,tuesday_starts_at:l?.tuesday_starts_at,tuesday_ends_at:l?.tuesday_ends_at,tuesday_report_free:!!l?.daily_max_hours&&!l?.tuesday_starts_at,wednesday_starts_at:l?.wednesday_starts_at,wednesday_ends_at:l?.wednesday_ends_at,wednesday_report_free:!!l?.daily_max_hours&&!l?.wednesday_starts_at,thursday_starts_at:l?.thursday_starts_at,thursday_ends_at:l?.thursday_ends_at,thursday_report_free:!!l?.daily_max_hours&&!l?.thursday_starts_at,friday_starts_at:l?.friday_starts_at,friday_ends_at:l?.friday_ends_at,friday_report_free:!!l?.daily_max_hours&&!l?.friday_starts_at,saturday_starts_at:l?.saturday_starts_at,saturday_ends_at:l?.saturday_ends_at,saturday_report_free:!!l?.daily_max_hours&&!l?.saturday_starts_at,sunday_starts_at:l?.sunday_starts_at,sunday_ends_at:l?.sunday_ends_at,sunday_report_free:!!l?.daily_max_hours&&!l?.sunday_starts_at}}),c=d.formState.isDirty,u=d.watch("daily_max_hours"),_=P.filter(e=>!!n.ChildcareCalendarShowWeekend||"saturday"!==e&&"sunday"!==e),m=()=>{d.reset({maximum_hours:null,locked:!1,monday_starts_at:null,monday_ends_at:null,tuesday_starts_at:null,tuesday_ends_at:null,wednesday_starts_at:null,wednesday_ends_at:null,thursday_starts_at:null,thursday_ends_at:null,friday_starts_at:null,friday_ends_at:null,saturday_starts_at:null,saturday_ends_at:null,sunday_starts_at:null,sunday_ends_at:null,monday_report_free:!1,tuesday_report_free:!1,wednesday_report_free:!1,thursday_report_free:!1,friday_report_free:!1,saturday_report_free:!1,sunday_report_free:!1,daily_max_hours:!1})},h=D.F6.useCreateChildcareCalendarUserBaseMutation({onSuccess:()=>{E.FN.success((0,e1.Z)("Inst\xe4llningarna har skapats"),{position:o?"top-center":"top-right"}),a()}}),p=D.F6.useUpdateChildcareCalendarUserBaseMutation({onSuccess:()=>{E.FN.success((0,e1.Z)("Inst\xe4llningarna har sparats"),{position:o?"top-center":"top-right"}),a()}}),g=D.F6.useDeleteChildcareCalendarUserBaseMutation({onSuccess:()=>{E.FN.success((0,e1.Z)("Inst\xe4llningarna har raderats"),{position:o?"top-center":"top-right"}),m(),r.close(),a()}});return(0,en.jsx)(tI.Z,{onSubmit:d.handleSubmit(e=>{let t=e.maximum_hours&&e.maximum_hours>0?Number(e.maximum_hours):null,a={locked:e.locked,maximum_hours:t,daily_max_hours:e.daily_max_hours,monday_starts_at:rC(e,"monday"),monday_ends_at:rS(e,"monday"),tuesday_starts_at:rC(e,"tuesday"),tuesday_ends_at:rS(e,"tuesday"),wednesday_starts_at:rC(e,"wednesday"),wednesday_ends_at:rS(e,"wednesday"),thursday_starts_at:rC(e,"thursday"),thursday_ends_at:rS(e,"thursday"),friday_starts_at:rC(e,"friday"),friday_ends_at:rS(e,"friday"),saturday_starts_at:rC(e,"saturday"),saturday_ends_at:rS(e,"saturday"),sunday_starts_at:rC(e,"sunday"),sunday_ends_at:rS(e,"sunday")};if(l?.id){p.mutate({id:l.id,user_id:s,...a});return}h.mutate({user_id:s,start_date:null,end_date:null,...a})}),className:rj().formWrapper,children:(0,en.jsxs)(t6.RV,{...d,children:[(0,en.jsx)(rf,{userID:s}),(0,en.jsx)(t3.Z.Content,{children:(0,en.jsxs)("div",{className:rj().editChildcareWrapper,children:[(0,en.jsxs)(tI.Z.Column,{children:[(0,en.jsx)(aT.Z,{label:(0,e1.Z)("Maxtimmar per vecka"),description:(0,e1.Z)("L\xe4mnas denna tom kan v\xe5rdnadshavare s\xe4tta obegr\xe4nsat antal bokade timmar."),inputMode:"numeric",...d.register("maximum_hours")}),(0,en.jsx)(tu.Z,{...d.register("locked"),label:(0,e1.Z)("L\xe5s hantering av tider f\xf6r v\xe5rdnadshavare.")})]}),(0,en.jsxs)("div",{className:rj().dailyMaxHours,children:[(0,en.jsxs)("div",{className:rj().dailyMaxHours__header,children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:(0,e1.Z)("Bokningstider per dag")}),(0,en.jsx)("p",{className:eV.X.Paragraph_SM_Regular,children:(0,e1.Z)("V\xe5rdnadshavare kan inte boka tider som ligger utanf\xf6r de angivna tidsintervallen. Om en dag markeras som ledig, g\xe5r det inte att boka n\xe5gra tider alls den dagen")})]}),(0,en.jsx)(t4.Z,{...d.register("daily_max_hours"),"aria-label":"Tider per dag"})]}),u&&_.map(e=>(0,en.jsx)(rk,{dayName:e,schoolStartsAt:i?.[`${e}_starts_at`],schoolEndsAt:i?.[`${e}_ends_at`]},e))]})}),(0,en.jsx)(t3.Z.Footer,{children:(0,en.jsxs)("div",{className:rj().footer,children:[l?.id?(0,en.jsx)(tR.Z,{"aria-label":(0,e1.Z)("Reset base times"),size:"lg",variant:"tertiary",onClick:()=>{l?.id&&(r.set({title:(0,e1.Z)("Vill du radera inst\xe4llningarna?"),content:(0,e1.Z)("Detta kommer att radera alla inst\xe4llningar f\xf6r v\xe5rdnadshavarens tider."),destructive:!0,onContinue:()=>{g.mutate({id:l?.id,user_id:s})}}),r.open())},children:(0,en.jsx)(ez.J,{name:"icon-trash-can-24"})}):null,(0,en.jsx)(tW.Z,{size:"lg",variant:"primary",type:"submit",disabled:!c,className:rj().submitButton,fullWidth:!0,children:e(A.ZT.Common.Save)})]})})]})})},rw=a(26145),rD=e=>{let{childcareCalendarUser:t,optimisticUpdater:a,isoWeek:r}=e,{t:n}=(0,A.T_)(),{user_id:s}=t,l=Number(C.Z.getWeek(r)),i=D.F6.useUpdateChildcareCalendarUserMutation({onSuccess:()=>{a(e=>{if(e)return{...e,childcare_calendar_user:{...e.childcare_calendar_user,confirmed:!0}}})}});if(!t||t.confirmed)return null;let o=()=>{i.mutate({id:t.id,user_id:s,confirmed:!0})};return(0,en.jsxs)(t7.Z,{type:"info",children:[(0,en.jsx)(t7.Z.Text,{children:n(t.id?A.ZT.Childcare.NoCalendarConfirmText({weekNumber:String(l)}):A.ZT.Childcare.ConfirmWeekText({weekNumber:String(l)}))}),t.id&&(0,en.jsx)(t7.Z.Action,{type:"button",onClick:()=>{o()},endIcon:(0,en.jsx)(ez.J,{name:"icon-checkmark-24"}),children:n(A.ZT.Childcare.ConfirmWeekButton)})]})},rN=a(45091),rI=a.n(rN);let rA=e=>{let{maximumHours:t,careHoursDaysData:a}=e;return a.reduce((e,t)=>{let{userDayData:a}=t,r=a?.starts_at,n=a?.ends_at;return r&&n&&!a.absent?e+aa(r,n):e},0)>60*t},rW=e=>{if(1===e.length){let t=e[0]?.finalWeekToEnterDataFor??"";return A.ag.t(A.ZT.Childcare.DeadlinesInWeekSingular({weekNumber:String(t)}))}if(2===e.length){let t=e[0]?.finalWeekToEnterDataFor??"",a=e[1]?.finalWeekToEnterDataFor??"";return A.ag.t(A.ZT.Childcare.DeadlinesInWeekDual({weekNumber1:String(t),weekNumber2:String(a)}))}let t=e[e.length-1],a=e.slice(0,-1).map(e=>String(e.finalWeekToEnterDataFor));return A.ag.t(A.ZT.Childcare.DeadlinesInWeekPlural({weekNumbers:a.join(", "),lastWeekNumber:String(t?.finalWeekToEnterDataFor)||""}))},rO=e=>{let{isEmployee:t,careHoursDaysData:a,childcareCalendar:r}=e,n=null;if(t)return n;for(let e of a){let{isoDate:t}=e;if(C.Z.before(t,C.Z.getISO())||C.Z.sameDay(t,C.Z.getISO()))continue;let a=C.Z.getDiffDays(C.Z.getISO(),t);r?.grace_days&&a<r?.grace_days&&(n=t)}return n};var rF=e=>{let{isoWeek:t,childcareCalendarUser:a,careHoursDaysData:r,isLocked:n,maximumHours:s,childcareCalendar:l,optimisticUpdater:i,isPending:o}=e,d=Number(C.Z.getWeek(t)),{t:c}=(0,A.T_)(),{summaries:u}=tH(C.Z.getISOYear(t)),{isEmployee:_}=(0,ex.ih)(),m=q(u,d),h=a?.confirmed,p=C.Z.before(t,C.Z.getISO())&&!C.Z.sameWeek(t,C.Z.getISO()),g=()=>{if(p||0===m.length)return null;let e=C.Z.getISOWeekdays(t),a=e[e.length-1];if(!a)return null;let r=X(a),n=rW(m);return(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:(0,en.jsx)(A.vN,{translation:A.ZT.Childcare.DeadlinesInWeek({weekNumbers:n,dayTitle:r})})})})},x=()=>n?(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:c(_?A.ZT.Childcare.LockedForGuardianAsEmployee:A.ZT.Childcare.LockedForGuardian)})}):null,f=()=>s&&rA({maximumHours:s,careHoursDaysData:r})?(0,en.jsx)(t7.Z,{type:"error",children:(0,en.jsx)(t7.Z.Text,{children:(0,e1.Z)("\xd6verskrider veckans maxtimmar.")})}):null,b=()=>!p&&!h&&l?.break_period&&a?(0,en.jsx)(rD,{childcareCalendarUser:a,optimisticUpdater:i,isoWeek:t}):null,v=()=>{let e=rO({isEmployee:_,careHoursDaysData:r,childcareCalendar:l});if(!e)return null;let t=C.Z.getMonthname(e),a=C.Z.getDay(C.Z.incrementDay(e));return(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:(0,e1.Z)(`Idag \xe4r sista dagen att hantera tider f\xf6r ${a} ${t}.`)})})},k=()=>!r.every(e=>e.statuses.includes(y.Empty))||p?null:(0,en.jsx)(t7.Z,{type:"info",children:(0,en.jsx)(t7.Z.Text,{children:o?c(A.ZT.Common.Loading):(0,e1.Z)(`Du beh\xf6ver fylla i tider f\xf6r vecka ${d}.`)})});return null!==x()||null!==g()||null!==b()||null!==f()||null!==v()||null!==k()?(0,en.jsxs)("div",{className:rI().alertWrapper,children:[b(),g(),x(),f(),v(),k()]}):null},rE=a(66859),rB=a.n(rE),rR={Header:e=>{let{isoWeek:t,userID:a,onChangeTo:r,onWeekOpen:n}=e,{t:s}=(0,A.T_)(),{childcareUserBase:l,isPending:i}=K({userID:a}),o=l?.locked??!1,{careHoursDaysData:d,childcareCalendarUser:c}=et({isoWeek:t,userID:a}),{week:u}=C.Z.isoWeekToYearAndWeek(t),_=C.Z.sameWeek(t),m=_?z(C.Z.getISO()):"monday",h=d.find(e=>e.dayName===m)?.orgDayData,p=tB({userID:a}),g=$.formatWeekSpanGrammar(t),y=h?.starts_at??"",x=h?.ends_at??"",f=(0,eE.Z)(),{isEmployee:b}=(0,ex.ih)(),v=C.Z.parseISOWeek(t),k=C.Z.before(v),Z=y||p?.[`${m}_starts_at`],j=x||p?.[`${m}_ends_at`];return(0,en.jsxs)("div",{className:tQ().container,children:[(0,en.jsxs)("div",{className:tQ().childcareHeader,children:[(0,en.jsxs)("div",{className:tQ().childcareHeader__title,children:[(0,en.jsx)(eY,{text:s(Z&&j?A.ZT.Childcare.OpeningHours({start:Z,end:j}):_?A.ZT.Childcare.ClosedToday:A.ZT.Childcare.Closed),startIcon:(0,en.jsx)(ez.J,{name:"icon-building-16"})}),(0,en.jsx)(eY,{text:s(A.ZT.Childcare.WeekDetails({week:String(u),timespan:g})),startIcon:(0,en.jsx)(ez.J,{name:"icon-calendar-16"})}),c?.label&&(0,en.jsx)(eY,{text:c?.label,startIcon:(0,en.jsx)(ez.J,{name:"icon-user-16"})})]}),f?null:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(tX.Desktop,{value:t,onChangeTo:r,className:tQ().childcareHeader__weekpicker}),(0,en.jsx)("div",{className:tQ().childcareHeader__action,children:(0,en.jsx)(tW.Z,{variant:"primary",size:"sm",onClick:n,disabled:!b&&(!!i||!!(!b&&o)||!!k&&!_),endIcon:(0,en.jsx)(ez.J,{name:"icon-calendar-pen-16"}),children:s(A.ZT.Childcare.EditCareHours)})})]})]}),f?(0,en.jsx)(tX.Mobile,{value:t,onChangeTo:r}):null]})},HeaderTitle:e=>{let{userID:t,settingsSidePanelOpen:a,title:r}=e,n=(0,ef.dl)(t),{isEmployee:s}=(0,ex.ih)(),{t:l}=(0,A.T_)(),{isoWeek:i}=(0,er.UO)(),{settings:o}=(0,Y.rV)(),{isoWeekToShow:d,dayToShow:c,dayToShowAsIsoDate:u}=t1(o.ChildcareCalendarShowWeekend),{checkedInData:_}=ea(t,u),{careHoursDaysData:m}=et({isoWeek:d,userID:t}),h=m.find(e=>e.dayName===c),p=_.data?.childcare_checkins[0],g=h?{...h,checkedIn:p}:null;if(!n||!g)return null;if(!i)throw Error("isoWeek is required");return(0,en.jsxs)("div",{className:t0().header,children:[(0,en.jsxs)("div",{className:t0().header__title,children:[(0,en.jsx)("h5",{className:eV.X.Heading_XL,children:r}),(0,en.jsx)("p",{className:eV.X.Paragraph_SM_Regular,children:n.full_name})]}),s?(0,en.jsx)(en.Fragment,{children:(0,en.jsx)(tW.Z,{size:"sm",variant:"secondary",onClick:a,endIcon:(0,en.jsx)(ez.J,{name:"icon-cog-16"}),children:l(A.ZT.Common.Settings)})}):null]})},Week:e=>{let{isoWeek:t,onDayClick:a,userID:r,openWeek:n}=e,{isEmployee:s}=(0,ex.ih)(),{t:l}=(0,A.T_)(),{careHoursDaysData:i,isLocked:o,childcareCalendar:d,maximumHours:c,childcareCalendarUser:u,isoDates:_,childcareQueryOptimisticUpdater:m,isPending:h}=et({isoWeek:t,userID:r}),p=(0,eE.Z)();return(0,en.jsxs)("div",{className:rB().careHoursWeek,children:[(0,en.jsx)(rF,{isoWeek:t,childcareCalendarUser:u,careHoursDaysData:i,isLocked:o,maximumHours:c,isPending:h,childcareCalendar:d,optimisticUpdater:m}),_.map(e=>{let{isoDate:t}=e,r=i.find(e=>e.isoDate===t);return(0,en.jsx)(tl,{isoDate:t,careHoursDayData:r,onClick:()=>{r&&(a(r),r.statuses.some(e=>[y.DayGone].includes(e))&&tF.Y.trackEvent(tF.Y.Event.Click,{context:"carehours-week-day-gone",isEmployee:s}))}},t)}),p&&n&&(0,en.jsx)(rw.Z,{onClick:n,disabled:o,endIcon:(0,en.jsx)(ez.J,{name:"icon-calendar-pen-24"}),children:l(A.ZT.Childcare.EditUserBase)})]})},Manage:e=>{let{selectedDayData:t,userID:a,isoWeek:r,onClose:n,formIsDirty:s,setFormIsDirty:l}=e,i=C.Z.sameWeek(r),o=C.Z.before(C.Z.parseISOWeek(r)),d=t?.statuses.includes(y.Locked),c=tB({userID:a}),u=!!t&&(!!i||!!o||!!d),{isEmployee:_}=(0,ex.ih)(),[m,h]=(0,I.useState)(!0),[p,g]=(0,I.useState)("edit"),[x,f]=(0,I.useState)({mode:"single",recurrenceType:b.EveryWeek,specificWeeks:[],amountOfWeeks:2}),{careHoursDaysData:v,isoDates:k,invalidateQuery:Z,childcareCalendar:j}=et({isoWeek:r,userID:a,enabled:!u}),S=v?.[0]?.childcareCalendarUserBase,T=S?.maximum_hours??null,w=P.some(e=>{let t=S?.[`${e}_starts_at`],a=S?.[`${e}_ends_at`];return t&&a})&&!!S?.daily_max_hours,D=w||!!(t&&!u),N=_&&!t;return(0,en.jsx)(t5.Provider,{value:{isoWeek:r,userID:a,hasTimesInBase:w,editSameTimes:!D&&m,setEditSameTimes:h,onClose:n,recurrence:x,setRecurrence:f,activeTab:p,setActiveTab:g,isTabsVisible:N,careHoursDaysData:v,isoDates:k,childcareCalendar:j,invalidateQuery:Z,maximumHours:T,overrideDisableRules:_,formIsDirty:s,setFormIsDirty:l,baseOpeningHours:c},children:N?"edit"===p?(0,en.jsx)(rm,{selectedDayData:t}):(0,en.jsx)(rT,{}):u&&t?(0,en.jsx)(a7,{careHoursDayData:t}):(0,en.jsx)(rm,{selectedDayData:t})})},Settings:e=>{let{userID:t,isoWeek:a,onClose:r}=e,{careHoursDaysData:n,invalidateQuery:s}=et({isoWeek:a,userID:t}),l=n?.[0]?.childcareCalendarUserBase,i=l?.maximum_hours??null;return(0,en.jsx)(rh.Provider,{value:{careHoursDaysData:n,invalidateQuery:s,maximumHours:i,onClose:r},children:(0,en.jsx)(rT,{})})},Label:eY},rH=a(4172),rP=a(98272);let rM=(0,I.createContext)({setSelectedDays:()=>{},selectedDays:[],basicSelectedDays:[]}),rL=()=>(0,I.useContext)(rM),r$=async(e,t)=>{let a=new O.u,r=e?.filter(e=>!e?.id),n=e?.filter(e=>e?.id),s=r.map(e=>({week:$.childcareCalendarToCreate(e),id:(0,B.Z)()})),l=n.map(e=>({week:$.childcareCalendarToUpdate(e),id:(0,B.Z)()}));if(s)for(let e of s)a.addCreateChildcareCalendarRequest(e.week,e.id);if(l?.length)for(let e of l)a.addUpdateChildcareCalendarRequest(e.week,e.id);if(n||r)try{let e=await a.execute();if(l?.length&&e)for(let t of l){let a=e.updateChildcareCalendarResponse(t.id);a?.status!==200&&E.FN.error(`${resp?.response.error.message}`)}return t(),e}catch{E.FN.error((0,e1.Z)("N\xe5got gick fel.."));return}},rU=e=>{let{fromWeek:t,toWeek:a,year:r}=e,n={year:r,start_week:t,end_week:a,user_id:e.userID},{data:s,isLoading:l}=D.gl.useListChildcareCalendarsForWeeksQuery(n),i=(0,D.ge)();return{weeks:s?.childcare_calendars?.sort((e,t)=>e.week-t.week),invalidateCurrentQuery:()=>{i.invalidateListChildcareCalendarsForWeeksQuery(n)},isLoading:l}};var rz=a(9037),rV=a(89358),rG=e=>{let{year:t,setYear:a}=e,r=(0,eE.Z)("(max-width: 1000px)"),n=(0,eE.Z)("(max-width: 600px)"),s=C.Z.getYearsWithinSpan(C.Z.decrementYear(new Date,3),C.Z.incrementYear(new Date,10));return(0,en.jsxs)(th.Z,{justify:"flex-end",gap:20,align:r?void 0:"center",direction:r?"column":void 0,wrap:"wrap",style:{paddingInline:r?10:20,paddingBlock:10,inlineSize:"100%"},children:[(0,en.jsxs)(th.Z,{align:"center",gap:10,children:[(0,en.jsx)("div",{style:{backgroundColor:"var(--color-surface-brand-lighter)",blockSize:30,inlineSize:30}}),(0,en.jsx)(tg.Z,{color:"secondary",children:(0,e1.Z)("F\xf6ljer ordinarie \xf6ppettider")})]}),(0,en.jsxs)(th.Z,{align:"center",gap:10,children:[(0,en.jsx)("div",{style:{backgroundColor:"var(--old-warning-color)",blockSize:30,inlineSize:30}}),(0,en.jsx)(tg.Z,{color:"secondary",children:(0,e1.Z)("Avviker fr\xe5n ordinarie \xf6ppettider")})]}),(0,en.jsxs)(th.Z,{align:n?void 0:"center",direction:n?"column":void 0,gap:10,children:[(0,en.jsx)(rz.Z,{variant:"primary",size:"md",startIcon:(0,en.jsx)(ez.J,{name:"icon-pencil-16"}),href:"./settings",children:(0,e1.Z)("Hantera ordinarie \xf6ppettider")}),(0,en.jsx)(rV.Z,{value:t,label:"",onChangeValue:a,children:s.map(e=>(0,en.jsx)("option",{value:e,children:e},e))})]})]})};let rJ=e=>{let{settings:t}=(0,Y.rV)(),{selectedDays:a}=rL(),r=$.getChildcareWeekdays(e).filter(e=>t.ChildcareCalendarShowWeekend||"saturday"!==e.dayName&&"sunday"!==e.dayName),n=a.some(t=>t.basicSelectedDay.gracePeriodSelected&&t.calendarWeek.week===e.week),s=r.every(e=>a.some(t=>t.basicSelectedDay.isoDate===e.isoDate));return{wholeWeekSelected:e&&s&&n,graceColumnSelected:n}},rq=(e,t,a)=>{if(t.basicSelectedDay.weekDay){let r=$.careHoursDays[t.basicSelectedDay.weekDay],n=a.closed?null:void 0!==a.starts_at?a.starts_at:e[r.starts_at],s=a.closed?null:void 0!==a.ends_at?a.ends_at:e[r.ends_at];return{...e,[r.starts_at]:n,[r.ends_at]:s}}return e},rX=(e,t,a)=>({...e,grace_days:void 0===t?e.grace_days:Number(t)||null,grace_weeks:void 0===a?e.grace_weeks:Number(a)||null}),rY=()=>{let{settings:e}=(0,Y.rV)(),{selectedDays:t,setSelectedDays:a}=rL(),r=(r,n)=>{r=r.filter(t=>e.ChildcareCalendarShowWeekend||"saturday"!==t.basicSelectedDay.weekDay&&"sunday"!==t.basicSelectedDay.weekDay);let s=t[0],l=t.length===r.length,i=s&&$.isWeekOdd(s.calendarWeek.week),o=s&&$.isWeekEven(s.calendarWeek.week),d=n===p.All,c=n===p.Odd&&i,u=n===p.Even&&o;(d||u||c)&&l?a([]):a(e=>n?r:$.addAdminDaysToSelected(e,r))},n=(0,I.useMemo)(()=>t.some(e=>e.basicSelectedDay.gracePeriodSelected),[t]);return{addDaysToSelectedHandler:r,updateCalendarWeek:(0,I.useCallback)(e=>Object.values(t.reduce((t,a)=>{let r=t[a.calendarWeek.week]??a.calendarWeek;return a.basicSelectedDay.gracePeriodSelected?r=rX(r,e.grace_days,e.grace_weeks):a.basicSelectedDay?r=rq(r,a,e):void 0!==e.break_period&&(r={...r,break_period:e.break_period}),{...t,[r.week]:r}},{})),[t]),showGraceColumn:n,onClickWeek:e=>{r([...$.getChildcareWeekdays(e).map(t=>({basicSelectedDay:{weekDay:t.dayName,isoDate:t.isoDate,weekNumber:e.week,gracePeriodSelected:!1},calendarWeek:e})),{calendarWeek:e,basicSelectedDay:{weekNumber:e.week,gracePeriodSelected:!0}}])}}},rQ={paddingInline:12};var rK=(0,I.memo)(e=>{let{invalidateCurrentQuery:t,calendarWeeks:a=[],baseOpeningHours:r}=e,{selectedDays:n,setSelectedDays:s}=rL(),l=(0,I.useMemo)(()=>!!n?.length&&new Set(n.map(e=>e.calendarWeek.week)).size===a.length,[n,a]),{addDaysToSelectedHandler:i}=rY(),o=(0,I.useMemo)(()=>a.every(e=>e.break_period),[a]),d=(0,I.useMemo)(()=>!!n.length&&n.filter(e=>e.basicSelectedDay.gracePeriodSelected).length===a.length,[n,a]),c=()=>{let e=a.every(e=>e.break_period),r=[];if((r=e?a.map(e=>({...e,break_period:!1})):a.map(e=>({...e,break_period:!0}))).length){let e=r$(r,t);E.FN.promise(e,(0,e1.Z)("Uppdaterat!"),(0,e1.Z)("Uppdaterar..."))}},u=(0,I.useCallback)((e,t)=>{i(a.filter(e=>$.shouldToggleWeek(e.week,t)).map(t=>({calendarWeek:t,basicSelectedDay:{gracePeriodSelected:!1,weekNumber:t.week,weekDay:e,isoDate:$.getChildcareWeekday(t,e)?.isoDate??""}})),t)},[a,i]),_=e=>{let t=a.filter(t=>$.shouldToggleWeek(t.week,e));i([...t.flatMap(e=>P.map(t=>({calendarWeek:e,basicSelectedDay:{gracePeriodSelected:!1,weekNumber:e.week,weekDay:t,isoDate:$.getChildcareWeekday(e,t)?.isoDate||""}}))),...t.map(e=>({calendarWeek:e,basicSelectedDay:{gracePeriodSelected:!0,weekNumber:e.week}}))],e)},m=()=>{let e=n?.filter(e=>e.basicSelectedDay.gracePeriodSelected);if(e?.length===a?.length)s(e=>e.filter(e=>!e.basicSelectedDay.gracePeriodSelected));else{let e=a.map(e=>({calendarWeek:e,basicSelectedDay:{weekNumber:e.week,gracePeriodSelected:!0}}));s(t=>[...t.filter(e=>!e.basicSelectedDay.gracePeriodSelected),...e])}};return(0,en.jsx)("thead",{children:(0,en.jsxs)("tr",{style:{borderBottom:"1px solid var(--color-border-neutral-container-light)",height:r?60:void 0},children:[(0,en.jsx)(tD,{headerStyle:rQ,weekSelected:l,openingHours:r,onSelect:(e,t)=>{null===t?_(e):u(t,e)}}),(0,en.jsx)("th",{style:rQ,children:(0,en.jsx)(tu.Z,{label:(0,e1.Z)("Lovperiod"),checked:o,onChange:()=>{c()},style:{justifyContent:"space-between"},labelStyle:{flex:1,textAlign:"start"},labelPosition:"start"})}),(0,en.jsx)("th",{style:rQ,children:(0,en.jsx)(tu.Z,{checked:d,label:(0,e1.Z)("Sp\xe4rrtid"),onChange:()=>{m()},style:{justifyContent:"space-between"},labelStyle:{flex:1,textAlign:"start"},labelPosition:"start"})})]})})}),r0=e=>{let{calendarWeek:t,invalidateCurrentQuery:a,baseCalendarWeek:r}=e,{addDaysToSelectedHandler:n}=rY(),{wholeWeekSelected:s,graceColumnSelected:l}=rJ(t),[i,o]=(0,I.useState)(!1),d=t?.id?t.grace_weeks:r?r.grace_weeks:0,c=t?.id?t.grace_days:r?r.grace_days:0,u=!!r&&(r.grace_weeks!==d||r.grace_days!==c),_=(0,e1.Z)(d?`${d} veckor innan`:""),m=(0,e1.Z)(c?`${c} dagar innan`:""),h=(0,e1.Z)(_||m?"":"Inga regler");return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(tf,{"data-selected":s,onClick:()=>{if(i||!t)return;o(!0);let e=r$([{...t,break_period:!t.break_period}],a).finally(()=>{o(!1)});E.FN.promise(e,(0,e1.Z)("Uppdaterats!"),(0,e1.Z)("Uppdaterar..."))},className:"childcare-day",children:(0,en.jsx)(th.Z,{direction:"column",center:!0,children:(0,en.jsx)(tu.Z,{checked:!!t.break_period,readOnly:!0})})}),(0,en.jsx)(tf,{onClick:()=>{n([{calendarWeek:t,basicSelectedDay:{gracePeriodSelected:!0,weekNumber:t.week}}])},style:{cursor:"pointer"},color:u?"#feb600":void 0,backgroundColor:u?"#feb60033":void 0,className:"childcare-day","data-selected":l,children:(0,en.jsxs)("p",{style:{color:l?"white":void 0,userSelect:"none",paddingInline:10},children:[h,_,m]})})]})},r1=(0,I.memo)(e=>{let{calendarWeek:t,invalidateCurrentQuery:a}=e,{t:r}=(0,A.T_)(),{basicSelectedDays:n}=rL(),{wholeWeekSelected:s}=rJ(t),{userID:l}=(0,ex.Tt)(),{baseWeek:i}=eP(l),{addDaysToSelectedHandler:o,onClickWeek:d}=rY(),c=t?.id,u=(0,I.useCallback)(e=>c?{startsAt:e.startsAt,endsAt:e.endsAt}:{startsAt:i?.[e.startsAtField],endsAt:i?.[e.endsAtField]},[i,c]),_=e=>{let{startsAt:t}=u(e);return null===t},m=e=>{if(!i)return!1;let t=i[e.startsAtField],a=i[e.endsAtField],{startsAt:r,endsAt:n}=u(e);return t!==r||a!==n};return(0,en.jsx)(tC,{calendarWeek:t,onDayClick:e=>{o([{calendarWeek:t,basicSelectedDay:{gracePeriodSelected:!1,isoDate:e.isoDate,weekDay:e.dayName,weekNumber:t.week}}])},renderRight:(0,en.jsx)(r0,{baseCalendarWeek:i,invalidateCurrentQuery:a,calendarWeek:t}),daySelected:e=>$.isSelected(e,n),renderHour:e=>{let{startsAt:t,endsAt:a}=u(e),n=_(e);return(0,en.jsx)("span",{children:n?r(A.ZT.Childcare.Closed):`${t??""} - ${a??""}`})},dayBackgroundColor:e=>{let t=_(e),a=m(e);return t?"#ff5656":a?"#feb600":""},overrideDisabledCheck:!0,weekSelected:s,isClosed:_,onClickWeek:()=>{d(t)}})}),r6=a(54698),r5=a.n(r6),r2=e=>{let{onSave:t,defaultValues:a,expanded:r,saving:n}=e,{t:s}=(0,A.T_)(),l=(0,I.useRef)(null),i=(0,I.useRef)(null),[o,d]=(0,I.useState)(a.graceWeeks?String(a.graceWeeks):""),[c,u]=(0,I.useState)(a.graceDays?String(a.graceDays):""),[_,m]=(0,I.useState)(!1),[h,p]=(0,I.useState)(!1);return(0,I.useEffect)(()=>{if(!r)return;let e=a.graceWeeks?i:l;e.current?.focus()},[r,a.graceWeeks]),(0,I.useEffect)(()=>{u(a.graceDays?String(a.graceDays):""),d(a.graceWeeks?String(a.graceWeeks):"")},[a.graceDays,a.graceWeeks]),(0,en.jsx)(tN.Z,{padded:!0,rounded:!0,border:!0,children:(0,en.jsxs)(tI.Z,{onSubmit:()=>{t({grace_weeks:h&&0===o.length?"0":o||void 0,grace_days:_&&0===c.length?"0":c||void 0}),e.closePopper&&e.closePopper()},children:[(0,en.jsxs)(tI.Z.Row,{children:[(0,en.jsx)(aT.Z,{className:r5().textInputDays,label:(0,e1.Z)("Antal dagar innan"),placeholder:(0,e1.Z)("Antal dagar"),value:c,disabled:!!(o&&o.length>0),onChangeValue:e=>{u(e),m(!0)},defaultValue:a.graceDays?String(a.graceDays):void 0,ref:l}),(0,en.jsx)(aT.Z,{className:r5().textInputWeeks,label:(0,e1.Z)("Antal veckor innan"),placeholder:(0,e1.Z)("Antal veckor"),value:o,defaultValue:a.graceWeeks?String(a.graceWeeks):void 0,disabled:!!(c&&c.length>0),onChangeValue:e=>{d(e),p(!0)},ref:i})]}),(0,en.jsx)(tW.Z,{type:"submit",variant:"primary",size:"md",fullWidth:!0,loading:n,style:{marginBlockStart:10},children:s(A.ZT.Common.Save)})]})})},r3=e=>{let{invalidateCurrentQuery:t}=e,{t:a}=(0,A.T_)(),{selectedDays:r,setSelectedDays:n}=rL(),s=$.getDefaultValueFromAdminSelectedDays(r),[l,i]=(0,I.useState)(!1),[o,d]=(0,I.useState)(!1),[c,u]=(0,I.useState)(!1),{updateCalendarWeek:_,showGraceColumn:m}=rY(),h=()=>{i(!1),d(!1),u(!1),setTimeout(()=>{n([])},250)},p=async(e,a)=>{i(!0);let r=_(e);await r$(r,t),a?.(),h()},g=(0,e1.Z)(r?.length>1?"St\xe4ng dagar":"St\xe4ng dag"),y=(0,I.useMemo)(()=>[...new Set(r.filter(e=>e.calendarWeek.id).map(e=>e.calendarWeek.id))],[r]),x=y?.length>0,f=async()=>{u(!0);let e=new O.u;for(let t of y){let a=r.find(e=>e.calendarWeek.id===t)?.calendarWeek;a&&e.addDeleteChildcareCalendarRequest({id:a.id})}await e.execute(),t(),h()},b=s.closed,v=y.length>1,k=(0,e1.Z)(v?`${y.length} veckor`:"hela veckan");return[{label:(0,e1.Z)(`\xc5terst\xe4ll ${k} till ordinarie tider`),hidden:!x,loading:c,icon:(0,en.jsx)(ez.J,{name:"icon-arrow-rotate-left-16"}),callback:async()=>f()},{label:a(A.ZT.Childcare.EditCareHours),icon:(0,en.jsx)(ez.J,{name:"icon-clock-circle-outline-16"}),closePopupElementOnClickOutside:!1,popupElement:(e,t)=>(0,en.jsx)(tE,{saving:l,expanded:e,closePopper:t,defaultValues:s,onSave:async e=>p(e,t)})},{label:g,callback:()=>{d(!0),p({closed:!0,starts_at:null,ends_at:null})},destructive:!0,icon:(0,en.jsx)(ez.J,{name:"icon-xmark-circle-tiny-fill-16"}),hidden:b,loading:o},{label:(0,e1.Z)("Hantera sp\xe4rrtid"),hidden:!m,icon:(0,en.jsx)(ez.J,{name:"icon-calendar-16"}),closePopupElementOnClickOutside:!1,popupElement:(e,t)=>(0,en.jsx)(r2,{saving:l,expanded:e,closePopper:t,defaultValues:s,onSave:async e=>p(e,t)})}]},r7=a(31943),r4=a(69038),r9=a(26181),r8=a(55457),ne=a.n(r8),nt=e=>{let{day:t,onChange:a,baseWeek:r}=e,{t:n}=(0,A.T_)(),s=$.getChildcareWeekday(r,t),l=s?s.startsAt:null,i=s?s.endsAt:null,[o,d]=(0,I.useState)(l??""),[c,u]=(0,I.useState)(i??""),_=null===c&&null===o||""===c&&""===o,m=e=>{r&&s&&a({...r,[s.startsAtField]:e||o})},h=e=>{r&&s&&a({...r,[s.endsAtField]:e||c})};return(0,I.useEffect)(()=>{d(l??""),u(i??"")},[l,i]),(0,en.jsxs)(tN.Z,{border:!0,rounded:!0,style:{padding:10},children:[(0,en.jsx)("p",{style:{fontWeight:"bold"},children:n(tT.i.getDayNameTranslation(t))}),(0,en.jsx)(tu.Z,{className:ne().checkbox__toggleClose,checked:null===i&&null===l,label:n(A.ZT.Childcare.ToggleClose),onChange:()=>{r&&s&&a({...r,[s.startsAtField]:_?"08:00":null,[s.endsAtField]:_?"17:00":null})}}),(0,en.jsx)(tO.Z,{label:(0,e1.Z)("\xd6ppning"),value:o?.length>0?o:"",disabled:_,onChangeValue:e=>{e&&m(e)},maxTime:c}),(0,en.jsx)(tO.Z,{label:(0,e1.Z)("St\xe4ngning"),value:c?.length>0?c:"",disabled:_,onChangeValue:e=>{e&&h(e)},minTime:o,maxTime:"23:59"})]})},na=a(51282),nr=a.n(na);let nn=new e_.Nl,ns=async e=>{let{fromWeek:t,toWeek:a,year:r,userID:n}=e;return nn.listChildcareCalendarsForWeeks({year:r,start_week:t,end_week:a,user_id:n})};var nl=a(80450);let ni="calendars",no=[{element:(0,en.jsx)(()=>{let e=(0,er.s0)(),{userID:t}=(0,ex.Tt)(),[a,r]=(0,I.useState)([]),n=(0,I.useMemo)(()=>a.map(e=>e.basicSelectedDay),[a]),{baseWeek:s,isLoading:l}=eP(t);return(0,I.useEffect)(()=>{l||s||e("./calendars/settings")},[s,l,e]),(0,en.jsx)(rM.Provider,{value:{selectedDays:a,setSelectedDays:r,basicSelectedDays:n},children:l?(0,en.jsx)(nl.Z,{}):(0,en.jsx)(er.j3,{})})},{}),children:[{index:!0,element:(0,en.jsx)(er.Fg,{to:ni,replace:!0})},{path:ni,element:(0,en.jsx)(()=>{let{t:e}=(0,A.T_)(),[t,a]=(0,I.useState)(C.Z.getISOYear());(0,rH.fb)({path:"/school/childcare",label:e(A.ZT.Childcare.Childcare)}),(0,rH.fb)({path:"/school/childcare/calendars",label:e(A.ZT.Childcare.OverviewSections.OpeningHours)});let{userID:r}=(0,ex.Tt)(),{baseWeek:n}=eP(r),{selectedDays:s,setSelectedDays:l}=rL(),{weeks:i,invalidateCurrentQuery:o}=rU({fromWeek:t!==C.Z.getISOYear()?1:Number(C.Z.getWeek()),toWeek:52,year:Number(t),userID:r}),d=r3({invalidateCurrentQuery:o}),[c,u]=(0,I.useState)("");return(0,I.useEffect)(()=>{n?.updated_at&&n.updated_at!==c&&(u(n.updated_at),o())},[n,o,c]),(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(er.j3,{}),(0,en.jsx)(ti.Z,{children:(0,en.jsxs)(rH.T3,{children:[(0,en.jsxs)(tN.Z,{rounded:!0,border:!0,children:[(0,en.jsx)(th.Z,{align:"center",justify:"space-between",style:{padding:20},children:(0,en.jsx)("h2",{children:(0,e1.Z)("Omsorgskalender")})}),n&&(0,en.jsx)(tc,{calendarWeeks:i,header:(0,en.jsx)(rG,{setYear:a,year:t}),containerStyle:{borderTop:"1px solid var(--color-border-neutral-container-light)"},tableHeader:(0,en.jsx)(rK,{invalidateCurrentQuery:o,baseOpeningHours:n,calendarWeeks:i}),renderWeek:e=>(0,en.jsx)(r1,{invalidateCurrentQuery:o,calendarWeek:e},e.week+e.year)})]}),(0,en.jsx)(rP.Z,{onClearSelected:()=>{l([])},actions:d,selectedCount:s.filter(e=>!!e.basicSelectedDay.isoDate).length})]})})]})},{}),children:[{index:!0},{path:"settings",element:(0,en.jsx)(()=>{let{t:e}=(0,A.T_)(),[t,a]=(0,I.useState)(!1),[r,n]=(0,I.useState)(!1),{userID:s}=(0,ex.Tt)(),{baseWeek:l,keys:i}=eP(s),[o,d]=(0,I.useState)(l),{setSelectedDays:c}=rL(),u=(0,N.NL)(),_=(0,E.VY)(),m=(0,er.s0)(),h=(0,r7.d)(),p=(0,eE.Z)(),g=eB(),y=e=>{e&&u.setQueryData(i,e)},x=()=>{u.setQueryData(i,()=>null)},f=async e=>{let t=$.childcareCalendarToUpdate(e),a=nn.updateChildcareCalendar(t).then(e=>{d(e.updated),y(e.updated)});return E.FN.promise(a,(0,e1.Z)("Sparade ordinarie \xf6ppettider!")),a},b=()=>{n(!0),nn.createChildcareCalendar({week:0,year:0,grace_days:null,grace_weeks:null,explicit_user_calendar_required:!1,monday_starts_at:null,monday_ends_at:null,tuesday_starts_at:null,tuesday_ends_at:null,wednesday_starts_at:null,wednesday_ends_at:null,thursday_starts_at:null,thursday_ends_at:null,friday_starts_at:null,friday_ends_at:null,saturday_starts_at:null,saturday_ends_at:null,sunday_starts_at:null,sunday_ends_at:null,group_id:null,break_period:!1,comment:null}).then(e=>{d(e.created),y(e.created)}).finally(()=>{n(!1)})},v=e=>{o&&d(t=>t?{...t,...e}:null)},k=()=>{o&&(a(!0),f(o).finally(()=>{a(!1),h.close()}))},Z=async()=>{let e=new O.u,t={fromWeek:1,toWeek:52,year:Number(C.Z.getFullYear()),userID:s},a=await ns(t);if(a.childcare_calendars){for(let t of a.childcare_calendars)e.addDeleteChildcareCalendarRequest({id:t.id});let r=U.childcareCalendars(t.fromWeek,t.toWeek,t.year,t.userID);e.execute().then(()=>{u.invalidateQueries({queryKey:r}),c([])})}},j=P.some(e=>{if(!o)return!1;let t=$.careHoursDays[e],a=o[t.starts_at],r=o[t.ends_at];return!a&&r||a&&!r});return(0,en.jsx)(r4.ZP,{afterClose:()=>{m("..",{replace:!0})},width:"large",height:"large",ref:h.ref,children:(0,en.jsxs)(r4.ZP.Form,{onSubmit:()=>{o?.id?k():b()},children:[(0,en.jsx)(r4.ZP.Header,{children:(0,en.jsx)("h1",{children:(0,e1.Z)("Hantera ordinarie \xf6ppettider")})}),(0,en.jsx)(r4.ZP.Content,{padded:!0,style:{height:o?"unset":"100%"},children:o?.id?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(th.Z,{align:p?void 0:"center",justify:"space-between",gap:10,direction:p?"column":"row",children:[(0,en.jsx)("p",{style:{flex:1},children:(0,e1.Z)(`Dessa inst\xe4llningar kommer synas om du inte har satt n\xe5gra \xf6ppettider f\xf6r en vecka, 
                                        s\xe5 om du uppdaterar denna vecka s\xe5 kommer den att vara de \xf6ppettiderna som visas f\xf6r alla anv\xe4ndare.`)}),(0,en.jsx)(tW.Z,{variant:"secondary",size:"md",startIcon:(0,en.jsx)(ez.J,{name:"icon-arrow-rotate-left-16"}),onClick:()=>{o?.id&&(_.set({title:(0,e1.Z)("Nollst\xe4lla \xf6ppettider?"),destructive:!0,buttonText:(0,e1.Z)("Nollst\xe4ll"),content:(0,e1.Z)("Vill du verkligen b\xf6rja om fr\xe5n b\xf6rjan och \xe5terst\xe4lla alla \xf6ppettider? Inga tider fr\xe5n f\xf6r\xe4ldrar kommer att raderas."),onContinue:()=>{nn.deleteChildcareCalendar({id:o.id}).then(()=>{x(),Z()})}}),_.open())},children:(0,e1.Z)("Nollst\xe4ll konfiguration")})]}),(0,en.jsx)(r9.Z,{gap:10,style:{width:"100%",marginBlockStart:10},templateColumns:`repeat(${g}, 1fr)`,children:P.map(e=>(0,en.jsx)(nt,{day:e,baseWeek:o,onChange:v},e))}),(0,en.jsx)(tu.Z,{checked:!!o.break_period,onChange:()=>{o&&v({break_period:!o.break_period})},label:(0,e1.Z)("Lovperiod"),className:nr().checkbox__breakPeriod}),(0,en.jsxs)(tI.Z.Row,{children:[(0,en.jsx)(aT.Z,{className:nr().textInputDays,value:o.grace_days??"",placeholder:(0,e1.Z)("Skriv in antal dagar"),onChangeValue:e=>{v({grace_weeks:null,grace_days:Number(e)})},label:(0,e1.Z)("Senaste dagen att l\xe4mna in tider?")}),(0,en.jsx)(aT.Z,{className:nr().textInputWeeks,value:o.grace_weeks??"",placeholder:(0,e1.Z)("Skriv in antal veckor"),onChangeValue:e=>{v({grace_days:null,grace_weeks:Number(e)})},label:(0,e1.Z)("Senaste veckan att l\xe4mna in tider?")})]})]}):(0,en.jsxs)(th.Z,{direction:"column",center:!0,style:{blockSize:"100%"},children:[(0,en.jsx)("h2",{style:{textAlign:"center",paddingBlockEnd:10},children:(0,e1.Z)("V\xe4lkommen till nya omsorgskalendern!")}),(0,en.jsx)("h4",{style:{textAlign:"center"},children:(0,e1.Z)("H\xe4r kommer du kunna l\xe4gga in dina ordinarie \xf6ppettider f\xf6r hela \xe5ret, samt l\xe4gga in undantag f\xf6r lov eller andra s\xe4rskilda dagar.")}),(0,en.jsx)("p",{style:{textAlign:"center",marginBlockStart:5},children:(0,e1.Z)("F\xf6rst beh\xf6ver du visa hur en vanlig vecka ser ut hos er.")}),(0,en.jsx)(tW.Z,{variant:"primary",size:"md",loading:r,type:"submit",style:{marginBlockStart:10},children:e(A.ZT.Common.Continue)})]})}),o?(0,en.jsxs)(r4.ZP.Footer,{children:[(0,en.jsx)("div",{}),(0,en.jsxs)("div",{children:[(0,en.jsx)(tW.Z,{variant:"secondary",size:"md",onClick:()=>{h.close()},children:e(A.ZT.Common.Cancel)}),(0,en.jsx)(tW.Z,{variant:"primary",size:"md",loading:t,disabled:j,type:"submit",children:e(A.ZT.Common.Save)})]})]}):null]})})},{})}]}]}];var nd=a(3161),nc=a(3142),nu=a(60960),n_=a(99210),nm=a(74934),nh=a(4192),np=e=>{let{isoDate:t,onGetNextDate:a}=e,{t:r}=(0,A.T_)();return(0,en.jsx)(nh.Z,{decrementTo:a(C.Z.getISO(C.Z.decrementDay(t))),todayTo:a(C.Z.getISO()),incrementTo:a(C.Z.getISO(C.Z.incrementDay(t))),relativeTo:"path",decrementTooltip:r(A.ZT.Date.PreviousDay),incrementTooltip:r(A.ZT.Date.NextDay)})},ng=a(79505),ny=e=>{let{isoDate:t,onGetNextDate:a}=e,r=(0,er.s0)(),n=e=>{r(a(e),{replace:!0,relative:"path"})};return(0,en.jsx)(ng.Z,{value:t,onChangeValue:e=>{n(e)}})},nx=a(859);let nf=(0,I.createContext)({childcareCheckins:[],childcareCheckinsBody:{week:parseInt(C.Z.getWeek()),year:parseInt(C.Z.getFullYear())},isLoading:!1,app:"LMS",usersBasePath:"",invalidateQuery:()=>{}}),nb=()=>(0,I.useContext)(nf),nv=e=>{let{isoWeek:t,isoDate:a}=e;if(a)return{week:parseInt(C.Z.getWeek(a)),year:parseInt(C.Z.getFullYear(a))};if(t){let{week:e,year:a}=C.Z.isoWeekToYearAndWeek(t);return{week:e,year:a}}return{week:parseInt(C.Z.getWeek()),year:parseInt(C.Z.getFullYear())}},nk=e=>{let{isoWeek:t,isoDate:a}=e,{week:r,year:n}=nv({isoWeek:t,isoDate:a}),s={week:r,year:n},{data:l,isLoading:i}=D.gl.useListChildcareCalendarAndCheckinsForWeekQuery(s),o=l?.childcare_calendars_for_checkins.flatMap(e=>e)??[],d=(0,D.ge)();return{childcareCheckinsBody:s,childcareCheckins:o,isLoading:i,invalidateQuery:()=>{d.invalidateListChildcareCalendarAndCheckinsForWeekQuery(s)}}},nZ=(e,t)=>{let[a,r]=t.split(":");if(!a||!r)return new Date(e);let n=new Date(e);return n.setHours(parseInt(a)),n.setMinutes(parseInt(r)),n},nj=()=>{let{settings:e}=(0,Y.rV)();return{findStatus:t=>{let{calendar_for_checkin:a,checkin:r,deviation:n}=t,s=e.NewChildcare?n?.absence:r.absence;if(r.checked_in_at&&!r.checked_out_at)return g.CheckedIn;if(r.checked_out_at)return g.CheckedOut;if(s)return g.ReportedAbsent;if(t?.deviation?.id?!t.deviation?.starts_at:!!t?.calendar_for_checkin?.id&&!t.calendar_for_checkin?.starts_at)return g.NotComing;let l=n?.ends_at??a.ends_at,i=l?nZ(r.date,l):void 0;return i&&C.Z.after(i)&&!r.checked_in_at?g.Expected:a.starts_at?g.NonCheckedIn:g.NotComing}}},nC=(e,t,a)=>{let{calendar_for_checkin:r}=e;return!!a&&!!t&&!a(r.user_id)&&g.NotConfirmed},nS=e=>{let{checkinForDay:t}=e,a=t?.calendar_for_checkin,r=t?.deviation,n=()=>r?.starts_at?`${r?.starts_at??""} - ${r?.ends_at??""}`:a?.starts_at?`${a?.starts_at??""} - ${a?.ends_at??""}`:"";return{[g.CheckedIn]:{status:g.CheckedIn,iconName:"icon-checkmark-circle-fill-16",text:n()},[g.CheckedOut]:{status:g.CheckedOut,iconName:"icon-arrow-in-16",text:n()},[g.ReportedAbsent]:{status:g.ReportedAbsent,iconName:"icon-flag-fill-16",text:(0,e1.Z)("Fr\xe5nvarande")},[g.Expected]:{status:g.Expected,iconName:"icon-clock-circle-fill-16",text:n()},[g.NonCheckedIn]:{status:g.NonCheckedIn,iconName:"icon-block-16",text:n()},[g.NotComing]:{status:g.NotComing,iconName:"icon-user-xmark-16",text:""},[g.NotConfirmed]:{status:g.NotConfirmed,iconName:"icon-xmark-16",text:A.ag.t(A.ZT.Childcare.OverviewStatus.Notconfirmed)},[g.ShowAll]:{status:g.ShowAll,iconName:"icon-users-16",text:A.ag.t(A.ZT.Childcare.OverviewStatus.ShowAll)}}},nT=Object.values(g).filter(e=>e!==g.NotConfirmed),nw=()=>{let e={week:parseInt(C.Z.getWeek()),year:parseInt(C.Z.getFullYear())},{data:t}=D.gl.useListChildcareCalendarAndCheckinsForWeekQuery(e),{findStatus:a}=nj(),r=eL(),{isBreakPeriod:n}=nO(),{checkIfConfirmed:s}=nW(),{childcareCheckins:l}=nb(),i=(0,I.useMemo)(()=>l.flatMap(e=>e).filter(e=>r.includes(e.calendar_for_checkin.user_id)),[r,l]),o=(0,I.useMemo)(()=>t?.childcare_calendars_for_checkins?t.childcare_calendars_for_checkins.flatMap(e=>e).filter(e=>{let{checkin:t,calendar_for_checkin:a}=e;return r.includes(a.user_id)&&t.date===C.Z.getISO()}):[],[r,t?.childcare_calendars_for_checkins]),d=(0,I.useCallback)((e,t)=>{switch(e){case g.NotComing:return t.filter(e=>a(e)===g.NotComing);case g.CheckedIn:return t.filter(e=>a(e)===g.CheckedIn);case g.CheckedOut:return t.filter(e=>a(e)===g.CheckedOut);case g.ReportedAbsent:return t.filter(e=>a(e)===g.ReportedAbsent);case g.Expected:return t.filter(e=>a(e)===g.Expected);case g.NonCheckedIn:return t.filter(e=>a(e)===g.NonCheckedIn);default:return i}},[i,a]),c=(0,I.useCallback)(e=>e.filter(e=>nC(e,n,s)===g.NotConfirmed),[s,n]);return{dailyStatuses:(0,I.useMemo)(()=>nT.reduce((e,t)=>({...e,[t]:d(t,o).filter(nm.Z.isNotNullish)}),{}),[d,o]),notConfirmedUsers:c(o),checkins:i,findStatus:a}},nD=e=>{let{orderBy:t,fullNameQuery:a}=e,r=eM(),n=D.Ck.useListUserGroupsQuery({query:{params:{equals:{is_childcare:!0}}}}),s=r.length>0?r:n.data?.user_groups?.map(e=>e.id)??[];return D.Ck.useListUserPreviewsAsMembersByGroupIDsQuery({group_ids:s,query:{params:{equals:{user_school_student:{has_childcare:!0}},like:{full_name:a}},nested:[{or_condition:!0,params:{greater_or_equal:{user_school_student:{end_date:C.Z.getISO()}},empty:{user_school_student:{end_date:!0}}}}],order_by:t}})},nN=e=>{let{isoWeek:t}=e,{week:a,year:r}=C.Z.isoWeekToYearAndWeek(t),{data:n}=D.gl.useListChildcareCalendarsQuery({query:{params:{equals:{week:a,year:r}}}});return{schoolCalendarWeek:n?.childcare_calendars.find(e=>e.week===a&&e.year===r)}},nI=()=>{let{overviewStatus:e}=w(),{setSearchValue:t,debouncedSearchValue:a}=(0,n_.Z)(),{dailyStatuses:r,notConfirmedUsers:n}=nw(),{isLoading:s}=nb(),{setTableOrder:l,order:i}=(0,nx.Z)([{id:"last_name",desc:!1}]),o=nD({orderBy:i,fullNameQuery:a}),d=(0,I.useMemo)(()=>o.data?.users??[],[o.data?.users]),c=d.filter(t=>{if(e){let a=r[e];return a?.some(e=>{let{calendar_for_checkin:{user_id:a}}=e;return a===t.id})}return!0}),u=d.filter(t=>!e||n?.some(e=>{let{calendar_for_checkin:{user_id:a}}=e;return a===t.id}));return{users:("Notconfirmed"===e?u:c)??[],isLoading:o.isLoading||s,paginationResponse:{total_count:o?.data?.total_count??0},handleOnQueryChange:t,handleOnOrderChange:l}},nA=e=>{let t=new Set;return e.forEach(e=>{e.calendar_for_checkin.confirmed&&t.add(e.calendar_for_checkin.user_id)}),t},nW=()=>{let{childcareCheckins:e}=nb(),t=nA(e??[]);return{checkIfConfirmed:(0,I.useCallback)(e=>t.has(e),[t])}},nO=()=>{let{isoWeek:e}=(0,er.UO)();if(!e)throw Error("Missing isoWeek");let{schoolCalendarWeek:t}=nN({isoWeek:e});return{isBreakPeriod:t?.break_period??!1}},nF=e=>{let{schoolCalendarWeek:t}=nN({isoWeek:e});return{isNotConfirmedVisible:!!t&&(t.break_period||!!t.grace_days||!!t.grace_weeks)}},nE=e=>{let{schoolCalendarWeek:t}=nN({isoWeek:e}),{userID:a}=(0,ex.Tt)(),{baseWeek:r}=eP(a),n=z(C.Z.getISO());return{isClosed:$.isClosed(n,t??r??void 0)}},nB=e=>{let{isClosed:t}=nE(e),{isNotConfirmedVisible:a}=nF(e),r=!!e&&C.Z.getISOWeek()===e,n=!1;return a?n=!0:r&&!t&&(n=!0),{isOverViewFilterHeaderVisible:n}};var nR=a(17184),nH=a.n(nR),nP=e=>{let{status:t,onOverviewStatusChange:a,active:r,keyNumber:n}=e,{t:s}=(0,A.T_)(),l=(0,I.useId)(),i=nS({})[t];if(!i.iconName)return null;let o=s(A.ZT.Childcare.OverviewStatus[t]),d=`${o} ${"ShowAll"===t?"":`(${n})`}`;return(0,en.jsxs)("div",{className:eJ()(nH().filter,{[nH()["filter--active"]]:r,[nH()["filter--expected"]]:"Expected"===t,[nH()["filter--checked-in"]]:"Checkedin"===t,[nH()["filter--absent"]]:"Reportedabsent"===t,[nH()["filter--notConfirmed"]]:"Notconfirmed"===t,[nH()["filter--showAll"]]:"ShowAll"===t}),children:[(0,en.jsx)("input",{checked:r,className:nH().input,id:l,name:o,onClick:()=>{a(t)},type:"radio",value:t,readOnly:!0}),(0,en.jsxs)("label",{className:eJ()(nH().label,{[eV.X.Label_SM_Semibold]:"ShowAll"===t,[eV.X.Label_SM_Regular]:"ShowAll"!==t}),htmlFor:l,children:["ShowAll"!==t?(0,en.jsx)(ez.J,{name:i.iconName}):(0,en.jsx)("div",{}),(0,en.jsx)("span",{children:d})]})]})},nM=a(41791),nL=a.n(nM);function n$(e){let{filterStatus:t,numberOfNotConfirmedUsers:a,handleChangeOverviewStatus:r}=e;return(0,en.jsxs)("div",{children:[(0,en.jsx)(at.Z,{margin:0,className:nL().dividerMobile}),(0,en.jsx)("div",{className:nL().filterButtons,children:(0,en.jsx)(nP,{status:g.ShowAll,keyNumber:0,active:t===g.ShowAll,onOverviewStatusChange:r},g.ShowAll)}),(0,en.jsx)(at.Z,{margin:0,className:nL().dividerMobile}),(0,en.jsx)("div",{className:nL().filterButtons,children:(0,en.jsx)(nP,{status:g.NotConfirmed,keyNumber:a,active:t===g.NotConfirmed,onOverviewStatusChange:r})})]})}var nU=a(83275),nz=a.n(nU);let nV=Object.values(g);var nG=e=>{let{onTemporaryFilterChange:t,temporaryFilter:a,isoWeek:r}=e,{overviewStatus:n,setOverviewStatus:s}=w(),{dailyStatuses:l,notConfirmedUsers:i}=nw(),{t:o}=(0,A.T_)(),{isClosed:d}=nE(r),c=e=>{if(t){if(a===e){t(g.ShowAll);return}t(e);return}if(e===n){s(g.ShowAll);return}s(e)},u=!!r&&C.Z.getISOWeek()===r,{isNotConfirmedVisible:_}=nF(r),m=nV.filter(e=>e!==g.NotConfirmed&&e!==g.ShowAll),h=a??n;return(0,en.jsx)(en.Fragment,{children:u&&!d?(0,en.jsxs)("fieldset",{className:nz().filter,children:[(0,en.jsx)(at.Z,{margin:0,className:nz().dividerMobile}),(0,en.jsx)("div",{className:nz().legend,children:(0,en.jsx)("legend",{className:eV.X.Label_SM_Semibold,children:o(A.ZT.Date.RightNow)})}),(0,en.jsx)("div",{className:nz().filterButtons,children:(0,en.jsx)(nP,{status:g.ShowAll,keyNumber:0,active:h===g.ShowAll,onOverviewStatusChange:c},g.ShowAll)}),(0,en.jsx)(at.Z,{margin:0,className:nz().dividerMobile}),(0,en.jsxs)("div",{className:nz().filterButtons,children:[m.map(e=>(0,en.jsx)(nP,{status:e,keyNumber:l[e]?.length??0,active:h===e,onOverviewStatusChange:c},e)),_?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(at.Z,{orientation:"vertical",margin:0,size:16,className:nz().dividerDesktop}),(0,en.jsx)(nP,{status:g.NotConfirmed,keyNumber:i?.length??0,active:h===g.NotConfirmed,onOverviewStatusChange:c})]}):null]})]}):(0,en.jsx)(n$,{filterStatus:h,numberOfNotConfirmedUsers:i?.length??0,handleChangeOverviewStatus:c})})},nJ=e=>{let{isoWeek:t,onGetNextWeek:a}=e,{t:r}=(0,A.T_)(),{setOverviewStatus:n}=w(),s=ec();if(!t)return null;let{week:l,year:i}=C.Z.isoWeekToYearAndWeek(t),o=()=>{s===x.overview&&n(g.ShowAll)};return(0,en.jsxs)(th.Z,{align:"center",gap:10,wrap:"wrap",style:{borderBottom:"1px solid var(--color-border-neutral-container-light)",padding:15},children:[(0,en.jsx)(tg.Z,{variant:"h3",weight:500,style:{flex:1},children:(0,e1.Z)(`Vecka ${l} - ${i}`)}),(0,en.jsx)(nh.Z,{decrementTo:a(C.Z.decrementISOWeek(t)),todayTo:a(C.Z.getISOWeek()),incrementTo:a(C.Z.incrementISOWeek(t)),onDecrement:o,onIncrement:o,relativeTo:"path",decrementTooltip:r(A.ZT.Date.PreviousWeek),incrementTooltip:r(A.ZT.Date.NextWeek),todayLabel:r(A.ZT.Date.ThisWeek)})]})},nq=a(5570),nX=a.n(nq),nY=()=>{let{setSelectedGroups:e}=w(),t=eM(),{activeOrganizationID:a}=(0,ex.Tt)(),{data:r}=D.Ck.useListUserGroupsQuery({query:{params:{equals:{is_childcare:!0}}}}),n=r?.user_groups??[],s=(0,I.useCallback)(()=>{let n=r?.user_groups??[];if(!t||0===n.length)return;let s=[];for(let e of t)n.find(t=>t.id===e)||s.push(e);let l=t.filter(e=>!s.includes(e));s.length>0&&e(l,a)},[a,r?.user_groups,t,e]);return(0,I.useEffect)(()=>{s()},[s]),n};let nQ=e=>{let{isoWeek:t,isoDate:a}=e,r=ec();return(0,en.jsxs)(en.Fragment,{children:[r===x.checkin&&a?(0,en.jsxs)(th.Z,{gap:5,style:{paddingBlockStart:15,paddingInline:15},children:[(0,en.jsx)(np,{isoDate:a,onGetNextDate:e=>`checkin/${e}`}),(0,en.jsx)(ny,{isoDate:a,onGetNextDate:e=>`checkin/${e}`})]}):null,r===x.absence||r===x.overview?(0,en.jsx)(nJ,{isoWeek:t,onGetNextWeek:e=>`${r.toLowerCase()}/${e}`}):null,r===x.overview?(0,en.jsx)(th.Z,{direction:"column",gap:10,style:{marginBlockStart:10,paddingInline:15},children:t?(0,en.jsx)(nG,{isoWeek:t}):null}):null]})};var nK=e=>{let{isoWeek:t,isoDate:a}=e,[r,n]=(0,I.useState)(!1),{setSelectedGroups:s,overviewStatus:l,setOverviewStatus:i}=w(),o=ec(),d=eM(),{activeOrganizationID:c}=(0,ex.Tt)(),u=(0,eE.Z)(),{t:_}=(0,A.T_)(),m=nY(),h=d.map(e=>m.find(t=>t.id===e)).filter(nm.Z.isNotNullish),p=d.length>0||l,y=e=>{s(e.map(e=>e.id),c)},{searchValue:f,setSearchValue:b}=(0,n_.Z)(),v=m.filter(e=>e.title.toLowerCase().includes(f.toLowerCase()));return(0,en.jsx)(en.Fragment,{children:(0,en.jsxs)(aD.ZP.Root,{open:r,onChangeOpen:n,placement:u?"bottom-start":"bottom-end",middleware:["shift","flip","autoUpdate","offset"],offsetOptions:{mainAxis:7},...(0,nd.g9)(),children:[(0,en.jsx)(aD.ZP.Target,{children:(0,en.jsx)(nc.Z,{count:d.length,isOpen:r})}),(0,en.jsx)(aD.ZP.Element,{elementProps:{style:{width:u?"80vw":void 0,maxHeight:u?"60dvh":void 0}},children:(0,en.jsxs)(tN.Z,{shadow:!0,border:!0,rounded:!0,children:[(0,en.jsxs)("div",{className:nX().childcareFilterHeader,children:[(0,en.jsxs)(th.Z,{gap:8,align:"center",children:[(0,en.jsx)(tp.Z,{color:"theme",fontAwesomeIcon:"filters",size:"1.3rem",variant:"duotone"}),(0,en.jsx)(tg.Z,{weight:"600",color:"theme",variant:"h3",children:_(A.ZT.Widget.Filtering)})]}),(0,en.jsx)(tR.Z,{"aria-label":_(A.ZT.Common.Close),variant:"tertiary",size:"sm",onClick:()=>{n(!1)},children:(0,en.jsx)(ez.J,{name:"icon-xmark-24"})})]}),u?(0,en.jsx)(nQ,{isoDate:a,isoWeek:t}):null,(0,en.jsxs)("div",{style:{padding:15},children:[m.length>0?(0,en.jsxs)("div",{children:[(0,en.jsx)(nu.Z,{label:(0,e1.Z)("Filtrera p\xe5 avdelningar"),placeholder:_(A.ZT.Common.Search),onSearch:b,onSelect:e=>{let t=m.find(t=>t.id===e);t&&(d.includes(e)?y(h.filter(t=>t.id!==e)):y([...h,t]))},children:v.map(e=>(0,en.jsx)(nu.Z.Item,{value:e.id,selected:d.includes(e.id),children:e.title},e.id))}),h.length>0?(0,en.jsx)(th.Z,{gap:4,style:{marginBlockStart:10},children:h.map(e=>(0,en.jsx)(e3.Z,{variant:"outlined",size:"md",onDelete:()=>{y(h.filter(t=>t.id!==e.id))},children:e.title},e.id))}):null]}):null,(0,en.jsxs)(th.Z,{gap:10,style:{marginBlockStart:10},children:[(0,en.jsx)(tW.Z,{variant:"secondary",size:"md",disabled:!p,startIcon:(0,en.jsx)(ez.J,{name:"icon-trash-can-16"}),onClick:()=>{s([],c),u&&o===x.overview&&i(g.ShowAll)},style:{flex:1},children:_(A.ZT.Common.Clear)}),(0,en.jsx)(tW.Z,{variant:"primary",size:"md",startIcon:(0,en.jsx)(ez.J,{name:"icon-checkmark-16"}),onClick:()=>{n(!1)},style:{flex:1},children:_(A.ZT.Common.Done)})]})]})]})})]})})},n0=a(56382),n1=a.n(n0);let n6=e=>{let{isoWeek:t,isoDate:a}=e,r=ec();return(0,en.jsxs)("div",{className:n1().childcareLayoutHeader,children:[(0,en.jsx)(ed,{}),(0,en.jsx)("div",{className:eJ()({[n1()["filter--overview"]]:r===x.overview}),children:(0,en.jsx)(nK,{isoDate:a,isoWeek:t})})]})},n5=e=>{let{isoWeek:t,isoDate:a}=e,{t:r}=(0,A.T_)(),n=eM(),s=nY(),l=n.map(e=>s.find(t=>t.id===e)).filter(nm.Z.isNotNullish).sort((e,t)=>e.title.localeCompare(t.title)),i=2===n.length,o=l[1],d="";i&&o?d=`& ${o.title}`:n.length>2&&(d=`(+ ${r(A.ZT.Childcare.CountSelected({count:String(n.length-1)}))})`);let c=r(A.ZT.Childcare.All);l.length>0&&l[0]&&(c=(0,e1.Z)(` ${l[0].title} ${d}`));let u=`${r(A.ZT.Common.WeekAlt)}. ${C.Z.getWeek(t)}`;return a&&(u=C.Z.getReadable(a)),{subtitle:`${u} | ${c}`,selectedGroupsText:c,allSelectedGroupsText:l.length>0?l.map(e=>e.title).join(", "):r(A.ZT.Childcare.All).toLowerCase()}};var n2=e=>{let{isoWeek:t,isoDate:a}=e,r=ec(),{t:n}=(0,A.T_)(),{subtitle:s,selectedGroupsText:l,allSelectedGroupsText:i}=n5({isoWeek:t,isoDate:a}),o="";switch(r){case x.overview:o=n(A.ZT.Common.Overview);break;case x.checkin:o=n(A.ZT.Hub.CheckInCheckOut);break;case x.absence:o=n(A.ZT.Childcare.OverviewSections.Absence)}return{title:o,subtitle:s,selectedGroupsText:l,allSelectedGroupsText:i}},n3=a(3300),n7=a.n(n3),n4=(0,I.memo)(e=>{let{isoDate:t,onGetNextDate:a}=e,{subtitle:r}=n2({isoDate:t,isoWeek:void 0});return(0,eE.Z)()?null:(0,en.jsxs)(tN.Z,{rounded:!0,className:n7().checkinHeader,children:[r?(0,en.jsx)("div",{style:{flex:1},children:(0,en.jsx)("p",{children:r})}):null,(0,en.jsx)(np,{isoDate:t,onGetNextDate:a}),(0,en.jsx)(th.Z,{justify:"flex-end",style:{flex:1},children:(0,en.jsx)(ny,{isoDate:t,onGetNextDate:a})})]})}),n9=a(14375),n8=a(13094);(u=k||(k={})).Pending="pending",u.Checkin="checkin",u.Checkout="checkout";let se=(e,t)=>{switch(e){case"pending":return t(A.ZT.Childcare.OverviewStatus.Expected);case"checkin":return t(A.ZT.Hub.CheckedIn);case"checkout":return t(A.ZT.Childcare.CheckedOutPlain)}},st=e=>({pending:{iconName:"circle-check",onClickTooltip:e(A.ZT.Lobby.Next.Morningcheckin),accentColor:h.PendingColor},checkin:{iconName:"house-person-return",onClickTooltip:e(A.ZT.Lobby.Next.Morningcheckout),onRevertClickTooltip:e(A.ZT.Lobby.Last.Athome),accentColor:"#2ecc71"},checkout:{iconName:"house-person-leave",onRevertClickTooltip:(0,e1.Z)("\xc5ngra utcheckning"),accentColor:h.CheckedOutColor}});(_=Z||(Z={})).asc="asc",_.desc="desc",(m=j||(j={})).first_name="first_name",m.last_name="last_name",m.starts_at="starts_at",m.ends_at="ends_at",m.checked_in_at="checked_in_at",m.checked_out_at="checked_out_at",m.absent="absent",m.group_title="group_title";let sa=(e,t,a,r)=>{let n=e.user?.last_name.toLowerCase()??"",s=t.user?.last_name.toLowerCase()??"",l=e.user?.first_name.toLowerCase()??"",i=t.user?.first_name.toLowerCase()??"";if("last_name"===a){let e="asc"===r?n:s,t="asc"===r?s:n;return(0,n8.Z)(e,t)}let o="asc"===r?l:i,d="asc"===r?i:l;return(0,n8.Z)(o,d)},sr=(e,t,a,r)=>{let n="starts_at"===a?"starts_at":"ends_at",s=e.checkin.calendar_for_checkin[n],l=t.checkin.calendar_for_checkin[n];return sn(e.checkin.deviation?.[n]??s,t.checkin.deviation?.[n]??l,r)},sn=(e,t,a)=>null===e&&null!==t?1:null!==e&&null===t?-1:null===e&&null===t?0:e&&t?("asc"===a?e:t).localeCompare("asc"===a?t:e):0,ss=(e,t,a,r)=>{let n=e.checkin.checkin["checked_in_at"===a?"checked_in_at":"checked_out_at"],s=t.checkin.checkin["checked_in_at"===a?"checked_in_at":"checked_out_at"];return null===n&&null!==s?1:null!==n&&null===s?-1:null===n&&null===s?0:n&&s?sn(n,s,r):0},sl=(e,t,a)=>{if(!e.user||!t.user)return 0;let{class_user_group_title:r}=e.user,{class_user_group_title:n}=t.user;if(!r&&n)return 1;if(r&&!n)return -1;if(r&&n){let e=r.localeCompare(n);return"asc"===a?e:-e}return 0},si=(0,I.memo)(e=>{let{activeTab:t,setActiveTab:a,pendingSectionEntries:r,checkinSectionEntries:n,checkoutSectionEntries:s}=e,{t:l}=(0,A.T_)(),i=Object.values(k),o={[k.Pending]:r,[k.Checkin]:n,[k.Checkout]:s},[d,c]=(0,I.useState)(t);(0,I.useEffect)(()=>{c(t)},[t]);let u=e=>{setTimeout(()=>{a(e)},o[e].length>60?200:0)};return(0,en.jsx)(tN.Z,{style:{borderBottom:"1px solid var(--color-border-neutral-container-light)",paddingBlockEnd:10,overflowX:"auto"},children:(0,en.jsx)(n9.Z,{variant:"neutral",activeTab:d,onChange:e=>{c(e),u(e)},children:i.map(e=>{let t=o[e],a=t?`(${t.length})`:"",r=`${se(e,l)} ${a}`;return(0,en.jsx)(n9.Z.Tab,{value:e,label:r},e)})})})});var so=a(94730),sd=a(2261);let sc=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Z.asc;return e.sort((e,r)=>{switch(t){case j.group_title:return sl(e,r,a);case j.first_name:case j.last_name:return sa(e,r,t,a);case j.ends_at:case j.starts_at:return sr(e,r,t,a);case j.checked_out_at:case j.checked_in_at:return ss(e,r,t,a);default:return 0}})},su=e=>e?.deviation?.id?!e.deviation?.starts_at:!!e?.calendar_for_checkin?.id&&!e.calendar_for_checkin?.starts_at,s_=(e,t,a)=>sc(e.filter(e=>e.user?.first_name?.toLowerCase().includes(t.toLowerCase())||e.user?.last_name?.toLowerCase().includes(t.toLowerCase())),a===j.first_name||a!==j.last_name?a:j.first_name);var sm=e=>{let{entries:t,query:a,sortBy:r=j.first_name,orderOn:n=Z.asc,section:s}=e,{pagination:l,incrementPage:i,decrementPage:o,setPage:d,offset:c,limit:u}=(0,sd.Z)({initialSize:35}),{settings:_}=(0,Y.rV)(),m=(0,I.useCallback)(e=>_.NewChildcare?e.deviation?.absence:e.checkin.absence,[_.NewChildcare]),{presentEntries:h,presentEntriesWithoutFilter:p,absentEntries:g,presentEntriesPaginated:y}=(0,I.useMemo)(()=>{let e=t.filter(e=>{let{checkin:t}=e;if(s===k.Pending){let e=t.calendar_for_checkin.starts_at??t?.deviation?.starts_at;return m(t)||!e||su(t)}return m(t)}),l=t.filter(e=>{let{checkin:t}=e;if(s===k.Pending){let e=t.calendar_for_checkin.starts_at??t?.deviation?.starts_at;return!m(t)&&!su(t)&&e}return!m(t)}),i=sc(l,r,n).slice(c,c+u);return a?{presentEntries:s_(l,a,r),presentEntriesPaginated:s_(l,a,r).slice(c,c+u),absentEntries:s_(e,a,r),presentEntriesWithoutFilter:l}:{presentEntries:sc(l,r,n),absentEntries:sc(e,r,n),presentEntriesWithoutFilter:l,presentEntriesPaginated:i}},[t,r,n,c,u,a,s,m]),x=(0,I.useMemo)(()=>Math.ceil((a&&a.length>0?y.length:p.length)/u),[u,p.length,a,y.length]);return{presentEntries:h,absentEntries:g,presentEntriesWithoutFilter:p,presentEntriesPaginated:y,pagination:l,pages:x,incrementPage:i,decrementPage:o,setPage:d}},sh=a(19532),sp=e=>{let{entries:t,onRevertBatch:a,onClickBatch:r}=e,[n,s]=(0,sh.Z)([]),l=(0,I.useCallback)(e=>n.some(t=>t.id===e.id),[n]),i=()=>{s([])},o=n.length>0&&n.length===t.length,d=(0,I.useCallback)(()=>{let e=t.map(e=>n.some(t=>t.checkin.calendar_for_checkin.user_id===e.checkin.calendar_for_checkin.user_id));s(n.filter((t,a)=>e[a]))},[n,t,s]),c=r?()=>{r(n.map(e=>e.checkin.calendar_for_checkin.user_id)),i()}:void 0,u=a?()=>{a(n.map(e=>e.checkin.calendar_for_checkin.user_id)),i()}:void 0;return{entryIsSelected:l,toggleSelection:e=>{l(e)?s(n.filter(t=>t.id!==e.id)):s([...n,e])},allSelected:o,hasSelections:n.length>0,handleSelectAll:()=>{o?i():s(t)},updateEveryEntry:c,revertEveryEntry:u,onGroupIDChange:d}},sg=a(76863),sy=(0,I.memo)(e=>{let{allChecked:t,onCheckAll:a,loading:r,revertEveryEntry:n,updateEveryEntry:s,hasSelections:l,onRevertTooltip:i,onClickTooltip:o}=e,d=n??s;return(0,en.jsxs)(th.Z,{justify:"space-between",style:{borderBottom:"1px solid var(--color-border-neutral-container-light)",paddingBlockEnd:10,paddingBlockStart:5,paddingInline:15},align:"center",children:[(0,en.jsx)(tu.Z,{checked:t,onChange:a,label:(0,e1.Z)("V\xe4lj alla")}),d?(0,en.jsxs)(th.Z,{gap:5,align:"center",children:[r?(0,en.jsx)(sg.Z,{size:25,strokeWidth:9}):null,n?(0,en.jsx)(tm.Z,{title:i??"",disabled:void 0===i,children:(0,en.jsx)(tR.Z,{"aria-label":i??"",variant:"secondary",onClick:n,disabled:!l,children:(0,en.jsx)(ez.J,{name:"icon-arrow-left-24"})})}):null,s?(0,en.jsx)(tm.Z,{title:o??"",disabled:void 0===o,children:(0,en.jsx)(tR.Z,{"aria-label":o??"",variant:"primary",onClick:s,disabled:!l,children:(0,en.jsx)(ez.J,{name:"icon-arrow-right-24"})})}):null]}):null]})}),sx=a(18246),sf=a.n(sx);let sb={[k.Pending]:[j.checked_in_at,j.checked_out_at],[k.Checkin]:[j.checked_out_at],[k.Checkout]:[]},sv=e=>e===Z.asc?"arrow-up-1-9":"arrow-down-9-1",sk=e=>e===Z.asc?"arrow-up-a-z":"arrow-down-z-a",sZ=e=>({[j.first_name]:sk(e),[j.last_name]:sk(e),[j.checked_in_at]:sv(e),[j.checked_out_at]:sv(e),[j.starts_at]:sv(e),[j.ends_at]:sv(e),[j.absent]:sv(e),[j.group_title]:sv(e)}),sj=e=>{switch(e){case j.absent:return A.ZT.Childcare.Sort.Absent;case j.checked_in_at:return A.ZT.Childcare.Sort.Checkedinat;case j.checked_out_at:return A.ZT.Childcare.Sort.Checkedoutat;case j.ends_at:return A.ZT.Childcare.Sort.Endsat;case j.first_name:return A.ZT.Common.FirstName;case j.group_title:return A.ZT.Childcare.Sort.Grouptitle;case j.last_name:return A.ZT.Common.LastName;case j.starts_at:return A.ZT.Childcare.Sort.Startsat}};var sC=e=>{let{t}=(0,A.T_)(),{sortBy:a,setSortBy:r,section:n,orderOn:s,setOrderOn:l}=e,i=Object.values(j),o=sb[n],d=sZ(s)[a],c=i.filter(e=>!o.includes(e));return(0,en.jsxs)(th.Z,{gap:5,style:{paddingInline:15},children:[(0,en.jsx)(aT.Z,{"aria-label":t(A.ZT.Common.Search),placeholder:t(A.ZT.Common.Search),onChangeValue:e.onChangeValue,className:sf().searchInput,value:e.value,endDecorator:e.value&&(0,en.jsx)(tR.Z,{"aria-label":t(A.ZT.Common.Clear),variant:"tertiary",size:"xs",pill:!0,onClick:()=>{e.onChangeValue("")},children:(0,en.jsx)(ez.J,{name:"icon-xmark-circle-tiny-fill-16"})}),startDecorator:(0,en.jsx)(ez.J,{name:"icon-magnifying-glass-16"})}),(0,en.jsxs)(th.Z,{align:"center",gap:4,children:[(0,en.jsx)(tm.Z,{title:(0,e1.Z)("V\xe4nd ordning"),children:(0,en.jsx)(tR.Z,{"aria-label":(0,e1.Z)("V\xe4nd ordning"),onClick:()=>{l(s===Z.asc?Z.desc:Z.asc)},variant:"secondary",children:(0,en.jsx)(tp.Z,{variant:"regular",fontAwesomeIcon:d})})}),(0,en.jsx)(tm.Z,{title:(0,e1.Z)("Sortera p\xe5"),children:(0,en.jsx)(rV.Z,{"aria-label":(0,e1.Z)("Sortera p\xe5"),value:a,onChangeValue:e=>{r(e)},children:c.map(e=>(0,en.jsx)("option",{value:e,children:t(sj(e))},e))})})]})]})},sS=a(44135),sT=a(98823),sw=a(56726),sD=a.n(sw),sN=e=>{let{checkinForDay:t,renderEmpty:a}=e,{t:r}=(0,A.T_)(),n=t.deviation,s=t.calendar_for_checkin,l=s.comment,i=t.checkin,o=n?.comment,d=n?.updated_at,c=n?.comment_by,u=n?.guardian_comment,_=n?.guardian_comment_by,m=n?.guardian_comment_at,h=i.comment,p=i.updated_by,g=i.updated_at,y=i.guardian_comment,x=i.updated_at,f=s.comment_by,b=n?.guardian_comment_by,v=[f,b,p,i.updated_by??i.created_by,c,_].filter(nm.Z.isNotNullish),k=(0,ef.b1)(v);if(!(u||o||l||y||h||o))return a??null;let Z=k[f],j=b?k[b]:void 0,S=p?k[p]:void 0,T=c?k[c]:void 0,w=n?.guardian_comment_by?k[n?.guardian_comment_by]:void 0;return(0,en.jsxs)("ul",{className:sD().checkInComments,children:[o?(0,en.jsxs)("li",{children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:r(A.ZT.Childcare.QuickMessageFromEmployee)}),(0,en.jsxs)("div",{className:sD().checkInComments__card,children:[(0,en.jsx)(ef.Yt,{size:"sm",user:T}),(0,en.jsxs)("div",{className:sD().checkInComments__description,children:[d?(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:`${C.Z.getISO(d)} • ${C.Z.getISOHour(d)}`}):null,(0,en.jsx)("p",{className:eV.X.Label_SM_Semibold,children:T?.full_name??""}),(0,en.jsx)("p",{className:eJ()(sD().checkInComments__comment,eV.X.Label_SM_Regular),children:o})]})]})]}):null,u?(0,en.jsxs)("li",{children:[(0,en.jsx)("p",{className:eV.X.Label_SM_Semibold,children:r(A.ZT.Childcare.Message)}),(0,en.jsxs)("div",{className:sD().checkInComments__card,children:[(0,en.jsx)(ef.Yt,{size:"sm",user:w}),(0,en.jsxs)("div",{className:sD().checkInComments__description,children:[m?(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:`${C.Z.getISO(m)} • ${C.Z.getISOHour(m)}`}):null,(0,en.jsx)("p",{className:eV.X.Label_SM_Semibold,children:w?.full_name??""}),(0,en.jsx)("p",{className:eJ()(sD().checkInComments__comment,eV.X.Label_SM_Regular),children:u})]})]})]}):null,l?(0,en.jsxs)("li",{children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:(0,e1.Z)("Meddelande")}),(0,en.jsxs)("div",{className:sD().checkInComments__card,children:[(0,en.jsx)(ef.Yt,{size:"sm",user:Z}),(0,en.jsxs)("div",{className:sD().checkInComments__description,children:[(0,en.jsx)("p",{className:eV.X.Label_SM_Semibold,children:Z?.full_name??""}),(0,en.jsx)("p",{className:eJ()(sD().checkInComments__comment,eV.X.Label_SM_Regular),children:l})]})]})]}):null,y?(0,en.jsxs)("li",{children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:(0,e1.Z)("Meddelande")}),(0,en.jsxs)("div",{className:sD().checkInComments__card,children:[b?(0,en.jsx)(ef.Yt,{size:"sm",user:j}):null,(0,en.jsxs)("div",{className:sD().checkInComments__description,children:[j?(0,en.jsx)("p",{className:eV.X.Label_SM_Semibold,children:j.full_name}):null,x?(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:`${C.Z.getISO(x)} • ${C.Z.getISOHour(x)}`}):null,(0,en.jsx)("p",{className:eJ()(sD().checkInComments__comment,eV.X.Label_SM_Regular),children:y})]})]})]}):null,h?(0,en.jsxs)("li",{children:[(0,en.jsx)("p",{className:eV.X.Label_MD_Semibold,children:(0,e1.Z)("Kommentar fr\xe5n f\xf6rskolan")}),(0,en.jsxs)("div",{className:sD().checkInComments__card,children:[p?(0,en.jsx)(ef.Yt,{size:"sm",user:S}):null,(0,en.jsxs)("div",{className:sD().checkInComments__description,children:[S?(0,en.jsx)("p",{className:eV.X.Label_SM_Semibold,children:S.full_name??""}):null,g?(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:`${C.Z.getISO(g)} • ${C.Z.getISOHour(g)}`}):null,(0,en.jsx)("p",{className:eJ()(sD().checkInComments__comment,eV.X.Label_SM_Regular),children:h})]})]})]}):null]})};let sI=new e_.Nl,sA=async(e,t)=>sI.deleteChildcareDeviation({id:e,user_id:t}),sW=async e=>{let{checkInEntry:t,comment:a,absence:r}=e,n=t.deviation;if(n?.id){let e=void 0!==r?r:n?.absence,t=void 0!==a?a:n?.comment;return sI.updateChildcareDeviation({id:n?.id,user_id:n.user_id,comment:t,guardian_comment:n.guardian_comment,absence:e,starts_at:n.starts_at,ends_at:n.ends_at})}let{calendar_for_checkin:s}=t;return sI.createChildcareDeviation({user_id:t.calendar_for_checkin.user_id,comment:void 0!==a?a:null,absence:void 0!==r?r:null,date:t.checkin.date,starts_at:s.starts_at??null,ends_at:s.ends_at??null,guardian_comment:null})};var sO=e=>{let{expanded:t,checkinForDay:a,openConfirm:r,user:n,...s}=e,{t:l}=(0,A.T_)(),{checkin:i,calendar_for_checkin:o,deviation:d}=a,{settings:c}=(0,Y.rV)(),{form:u}=(0,t6.cI)({defaultValues:{comment:c.NewChildcare?d?.comment??"":i.comment??""}}),_=()=>{if(c.NewChildcare){sW({checkInEntry:a,comment:void 0,absence:!d?.absence}).then(e=>{let t={...a,deviation:"updated"in e?e.updated:e.created};s.updateEntry(t),u.reset()});return}ek({userID:o.user_id,date:s.date,checkin:i,absence:!i.absence}).then(e=>{let t={checkin:"updated"in e?e.updated:e.created,calendar_for_checkin:o,deviation:d};u.reset(),s.updateEntry(t)})};if(!t)return null;let m=c.NewChildcare?d?.absence:i.absence;return(0,en.jsxs)(th.Z,{direction:"column",style:{inlineSize:"100%",paddingBlockEnd:8,paddingInlineEnd:10},children:[(0,en.jsx)(sN,{checkinForDay:a}),(0,en.jsx)(sT.Z,{children:l(A.ZT.Common.Absence)}),(0,en.jsx)("div",{children:(0,en.jsx)(tW.Z,{variant:"secondary",destructive:!0,size:"sm",onClick:()=>{if(!(c.NewChildcare?d?.absence:i.absence)||!c.NewChildcare){_();return}r({title:l(A.ZT.Childcare.Alerts.DeleteDeviationTitle({user:n?.full_name??""})),description:l(A.ZT.Childcare.Alerts.DeleteDeviationDescription),primaryActionButtonText:l(A.ZT.Childcare.Alerts.DeleteDeviationPrimaryText),secondaryActionButtonText:l(A.ZT.Childcare.Alerts.DeleteDeviationSecondaryText),onSecondaryAction:()=>{sA(d?.id??"",o.user_id).then(()=>{s.updateEntry({...a,deviation:void 0})})},onPrimaryAction:()=>{_()}})},children:(0,e1.Z)(m?"Ta bort fr\xe5nvaro":"Anm\xe4l fr\xe5nvaro")})}),(0,en.jsxs)(tI.Z,{onSubmit:u.handleSubmit(e=>{if(c.NewChildcare){sW({checkInEntry:a,comment:e.comment,absence:void 0}).then(e=>{let t={...a,deviation:"updated"in e?e.updated:e.created};s.updateEntry(t),u.reset()});return}ek({userID:o.user_id,date:s.date,checkin:i,comment:e.comment}).then(e=>{let t={checkin:"updated"in e?e.updated:e.created,calendar_for_checkin:o,deviation:d};u.reset(),s.updateEntry(t)})}),style:{inlineSize:"100%"},children:[(0,en.jsx)(tA.Z,{label:l(A.ZT.Chat.Message),minRows:2,...u.register("comment"),placeholder:l(A.ZT.Childcare.QuickMessageFromEmployee)}),(0,en.jsx)(tW.Z,{variant:"primary",size:"md",type:"submit",fullWidth:!0,style:{marginBlockStart:10},children:l(A.ZT.Common.Save)})]})]})},sF=a(31936),sE=a.n(sF);let sB=(e,t,a)=>{if(!t&&!a)return!0;let r=C.Z.isoHourToMinutes(e),n=t?C.Z.isoHourToMinutes(t):-1/0,s=a?C.Z.isoHourToMinutes(a):1/0;return r>=n&&r<=s},sR=e=>{let{value:t,onChange:a,minTime:r,maxTime:n}=e,s=C.Z.getHours(),[l,i="00"]=t.split(":");return s.map(e=>{let s=(!!r||!!n)&&!sB(`${e}:${i}`,r,n);return(0,en.jsx)(sP,{disabled:s,selected:e===l,value:e,onClick:()=>{a(`${e}:${t.split(":")[1]||"00"}`)}},e)})},sH=e=>{let{value:t,onChange:a,minTime:r,maxTime:n}=e,s=C.Z.getFiveMinutes(),l=t.split(":")[1];return s.map(e=>{let s=(!!r||!!n)&&!sB(`${t.split(":")[0]||"00"}:${e}`,r,n);return(0,en.jsx)(sP,{selected:e===l,disabled:s,value:e,onClick:()=>{a(`${t.split(":")[0]||C.Z.getFullHour()}:${e}`)}},e)})},sP=e=>{let{onClick:t,selected:a,value:r,disabled:n}=e;return(0,en.jsx)("button",{type:"submit",className:eJ()(sE().timePicker__item,{[sE()["timePicker__item--selected"]]:a}),disabled:n,onClick:t,children:(0,en.jsx)("p",{children:r})})};var sM=e=>{let{value:t,onChange:a,minTime:r,maxTime:n}=e,s=(0,I.useRef)(null),l=(0,I.useRef)(null),i=(0,I.useRef)(!0);return(0,I.useEffect)(()=>{let[e=C.Z.getFullHour(),a=C.Z.getFullMinute()]=t.split(":"),r=i.current?"auto":"smooth";setTimeout(()=>{s.current?.scroll({top:35*(Number(e)-2),behavior:r}),l.current?.scroll({top:35*(Number(a)/5-2),behavior:r}),i.current=!1},0)},[t]),(0,en.jsxs)("div",{className:sE().timePicker,children:[(0,en.jsx)("div",{className:sE().timePicker__column,children:(0,en.jsx)(ti.Z,{ref:s,children:sR({value:t,onChange:a,minTime:r,maxTime:n})})}),(0,en.jsx)("div",{className:sE().timePicker__column,children:(0,en.jsx)(ti.Z,{ref:l,children:sH({value:t,onChange:a,minTime:r,maxTime:n})})})]})};let sL=e=>{let{newTime:t,checkin:a,updateEntry:r,checkout:n=!1}=e,s=s$(t,a.checkin.date);if(!s)return;if(n&&a.checkin.checked_in_at){let e=new Date(a.checkin.checked_in_at);if(s.getTime()<e.getTime()){E.FN.error((0,e1.Z)("Utcheckningstiden kan inte vara f\xf6re incheckningstiden"));return}}else if(!n&&a.checkin.checked_out_at){let e=new Date(a.checkin.checked_out_at);if(s.getTime()>e.getTime()){E.FN.error((0,e1.Z)("Incheckningstiden kan inte vara efter utcheckningstiden"));return}}let l={...a.checkin,[n?"checked_out_at":"checked_in_at"]:t},i=ek({userID:a.calendar_for_checkin.user_id,date:a.checkin.date,checkin:l}).then(()=>{r({checkin:l,calendar_for_checkin:a.calendar_for_checkin,deviation:a.deviation})}),o=n?(0,e1.Z)("Uppdaterade utchecknings-tid!"):(0,e1.Z)("Uppdaterade checkin-tid!");E.FN.promise(i,o)},s$=(e,t)=>{let a=C.Z.parse(t),[r,n]=e.split(":");if(!r||!n)throw Error("Invalid ISO hour");if(a.setHours(parseInt(r)),a.setMinutes(parseInt(n)),a.getTime()>new Date().getTime())throw E.FN.error((0,e1.Z)("Tiden kan inte vara i framtiden")),Error((0,e1.Z)("Time can not be set in the future"));return a};var sU=e=>{let{value:t,color:a,onChange:r,tooltip:n,minTime:s,maxTime:l}=e;return(0,en.jsxs)(aD.ZP.Root,{children:[(0,en.jsx)(aD.ZP.Element,{children:(0,en.jsx)(tN.Z,{border:!0,shadow:!0,rounded:!0,children:(0,en.jsx)(sM,{value:t,onChange:r,maxTime:l,minTime:s})})}),(0,en.jsx)(aD.ZP.Target,{children:(0,en.jsxs)(th.Z,{align:"center",gap:5,style:{cursor:"pointer"},children:[(0,en.jsx)(tm.Z,{title:n,children:(0,en.jsx)("p",{style:{color:a},children:t})}),(0,en.jsx)(tp.Z,{variant:"regular",fontAwesomeIcon:"pencil",size:12,color:a})]})})]})},sz=a(63195),sV=a.n(sz);let sG=e=>{let{checkin:t}=e,a=t.calendar_for_checkin.comment,r=t.checkin.comment;return[a,r,t.checkin.guardian_comment,t.deviation?.comment,t.deviation?.guardian_comment].filter(e=>e&&e.trim().length>0).length};var sJ=(0,I.memo)(e=>{let{entry:t,onClick:a,onRevertClick:r,updateEntry:n,isTablet:s,usersBasePath:l,date:i,isSelected:o,onSelectToggle:d,onRevertClickTooltip:c,onClickTooltip:u,openConfirm:_}=e,{t:m}=(0,A.T_)(),{findStatus:p}=nj(),g=t.user,y=g?.full_name??"",x=t.checkin.checkin,{settings:f}=(0,Y.rV)(),{checked_in_at:b,checked_out_at:v}=x,k=t.checkin,Z=k?p(k):void 0,j=nS({checkinForDay:t.checkin}),S=Z?j[Z].text:"",T=sG(t),[w,D]=(0,I.useState)(!1),N=w?"flex-start":"center";return(0,en.jsxs)("div",{className:sV().checkinEntry,children:[(0,en.jsx)(tu.Z,{checked:o,onChange:()=>{d(t)}}),(0,en.jsxs)(tN.Z,{rounded:!0,border:!0,className:sV().checkinEntry__card,children:[(0,en.jsx)(th.Z,{justify:"space-between",align:"center",style:{overflow:"hidden",flex:1,blockSize:"100%",padding:10},children:(0,en.jsxs)(th.Z,{align:"center",gap:5,style:{overflow:"hidden",inlineSize:"100%"},children:[(0,en.jsxs)("div",{style:{position:"relative",alignSelf:N,height:"100%"},children:[(0,en.jsx)(ef.Yt,{user:g,size:s?"xl":"md"}),T>0?(0,en.jsx)("div",{className:sV().checkinCommentNotification,children:(0,en.jsx)("p",{children:T})}):null]}),(0,en.jsxs)(th.Z,{direction:"column",style:{overflow:"hidden",marginInlineStart:5,flex:1},children:[(0,en.jsxs)(th.Z,{align:s&&w?void 0:"center",justify:"space-between",style:{inlineSize:"100%"},children:[(0,en.jsxs)(t_.Z,{onClick:()=>{D(!w)},style:{display:"flex",alignItems:s?void 0:"center",flexDirection:s?"column":"row",gap:s?0:8,flex:1,inlineSize:"100%"},children:[(0,en.jsx)(tg.Z,{style:{textAlign:"left"},ellipsis:!0,weight:600,children:y}),g?.class_user_group_title&&(0,en.jsx)(e3.Z,{size:"xs",variant:"outlined",children:g.class_user_group_title})]}),!f.NewChildcare&&w&&g&&(0,en.jsx)(sS.Z,{"aria-label":(0,e1.Z)("G\xe5 till profil"),variant:"secondary",href:`${l}/${g.id}/${h.UserCalendarUrl}`,size:"sm",pill:!0,children:(0,en.jsx)(ez.J,{name:"icon-user-24"})})]}),(0,en.jsx)(sO,{expanded:w,checkinForDay:t.checkin,user:t.user,updateEntry:n,date:i,openConfirm:_}),(0,en.jsxs)(th.Z,{align:"left",direction:"column",children:[(0,en.jsx)(tg.Z,{color:"secondary",style:{textAlign:"start"},ellipsis:!0,children:S}),(0,en.jsxs)(th.Z,{gap:10,align:"left",children:[b?(0,en.jsx)(sU,{onChange:e=>{sL({newTime:e,checkin:t.checkin,updateEntry:n})},tooltip:(0,e1.Z)("Incheckad"),maxTime:C.Z.sameDay(i)?C.Z.getISOHour():v??void 0,value:b,color:"#2ecc71"}):null,v?(0,en.jsx)(sU,{onChange:e=>{sL({newTime:e,checkin:t.checkin,updateEntry:n,checkout:!0})},minTime:b??void 0,maxTime:C.Z.sameDay(i)?C.Z.getISOHour():void 0,value:v,tooltip:(0,e1.Z)("Utcheckad"),color:h.CheckedOutColor}):null]})]})]}),(0,en.jsx)(tR.Z,{"aria-label":w?m(A.ZT.Common.Minimize):(0,e1.Z)("Expandera"),variant:"tertiary",onClick:()=>{D(!w)},pill:!0,size:"sm",style:{alignSelf:N},children:(0,en.jsx)(tp.Z,{variant:"regular",fontAwesomeIcon:"chevron-down",rotate:w?180:0})})]})}),(0,en.jsxs)(th.Z,{children:[!w&&r?(0,en.jsx)(tm.Z,{title:c??"",disabled:void 0===c,children:(0,en.jsx)("button",{type:"button",className:eJ()(sV().checkinEntry__button,sV()["checkinEntry__button--variant-soft"]),onClick:()=>{r(t.id)},children:(0,en.jsx)(tp.Z,{variant:"regular",fontAwesomeIcon:"arrow-left"})})}):null,!w&&a?(0,en.jsx)(tm.Z,{title:u??"",disabled:void 0===u,children:(0,en.jsx)("button",{type:"button",className:eJ()(sV().checkinEntry__button,sV()["checkinEntry__button--variant-primary"]),onClick:()=>{a(t.id,t)},children:(0,en.jsx)(tp.Z,{variant:"regular",fontAwesomeIcon:"arrow-right"})})}):null]})]})]})}),sq=e=>{let{absentEntries:t,showPresentEntries:a,getEntryProps:r}=e;return(0,en.jsxs)(en.Fragment,{children:[a&&(0,en.jsx)(at.Z,{margin:5,style:{marginBlockEnd:0}}),(0,en.jsx)(tg.Z,{color:"secondary",style:{paddingInline:15},children:(0,e1.Z)(`Kommer ej idag (${t?.length})`)}),t.map(e=>{let t=r(e);return(0,en.jsx)(sJ,{...t},e.id)})]})},sX=e=>{let{pagination:t,pages:a,decrementPage:r,incrementPage:n,setPage:s}=e;return(0,en.jsxs)(th.Z,{center:!0,gap:10,style:{inlineSize:"100%",marginBlockStart:10},children:[(0,en.jsx)(tR.Z,{"aria-label":(0,e1.Z)("F\xf6reg\xe5ende sida"),variant:"secondary",onClick:()=>{1===t.page?s(a):r()},disabled:1===a,children:(0,en.jsx)(ez.J,{name:"icon-chevron-left-24"})}),(0,en.jsxs)("p",{style:{paddingBlockEnd:2},children:[t.page," / ",a]}),(0,en.jsx)(tR.Z,{"aria-label":(0,e1.Z)("N\xe4sta sida"),variant:"secondary",onClick:()=>{t.page===a?s(1):n()},disabled:1===a,children:(0,en.jsx)(ez.J,{name:"icon-chevron-right-24"})})]})},sY=e=>{let{presentEntriesPaginated:t,pages:a,pagination:r,setPage:n,incrementPage:s,absentEntries:l,decrementPage:i,showPresentEntries:o,getEntryProps:d}=e;return(0,en.jsxs)(en.Fragment,{children:[o?t.map(e=>{let t=d(e);return(0,en.jsx)(sJ,{...t},e.id)}):null,t?.length>0&&(0,en.jsx)(sX,{pagination:r,pages:a,setPage:n,incrementPage:s,decrementPage:i}),(0,en.jsx)(sq,{showPresentEntries:o,getEntryProps:d,absentEntries:l})]})},sQ=a(67161);let sK=e=>{let{virtualizer:t,showPresentEntries:a,absentEntries:r,presentEntries:n,getEntryProps:s}=e;return(0,en.jsxs)(th.Z,{gap:10,direction:"column",children:[a&&t.getVirtualItems().map(e=>{let a=n[e.index];return a?(0,en.jsx)("div",{"data-index":e.index,ref:t.measureElement,children:(0,en.jsx)(sJ,{...s(a)},a.id)},e.key):null}),(0,en.jsx)(sq,{showPresentEntries:a,getEntryProps:s,absentEntries:r})]})};var s0=e=>{let{count:t,children:a,height:r,disabled:n}=e,s=(0,I.useRef)(null),l=(0,sQ.MG)({count:t,getScrollElement:()=>s.current,estimateSize:()=>45}),i=l.getVirtualItems()??[];return n?(0,en.jsx)(ti.Z,{style:{paddingBlock:10},children:a({})}):(0,en.jsx)("div",{ref:s,className:"List",style:{width:"auto",height:r?`${r-133}px`:"50dvh",overflowY:"auto",contain:"strict"},children:(0,en.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${i[0]?.start??0}px)`,paddingBottom:40,paddingTop:20},children:a(l)})})},s1=(0,I.memo)(e=>{let{section:t,onRevertBatch:a,onClickBatch:r,isoDate:n,entries:s,updateEntry:l,gridHeight:i,sectionLoading:o,isLoading:d}=e,{t:c}=(0,A.T_)(),{usersBasePath:u}=nb(),_=(0,eE.Z)("(max-width: 1000px)"),m=(0,eE.Z)("(max-width: 1200px)"),h=st(c),p=(0,E.N4)(),{accentColor:g,iconName:y,onRevertClickTooltip:x,onClickTooltip:f}=h[t],[b,v]=(0,I.useState)(""),[C,S]=(0,I.useState)(t===k.Checkin?j.ends_at:j.first_name),[T,w]=(0,I.useState)(Z.asc),{presentEntries:D,absentEntries:N,presentEntriesWithoutFilter:W,presentEntriesPaginated:O,pages:F,pagination:B,decrementPage:R,incrementPage:H,setPage:P}=sm({entries:s,query:b,sortBy:C,orderOn:T,section:t}),{toggleSelection:M,allSelected:L,entryIsSelected:$,handleSelectAll:U,updateEveryEntry:z,revertEveryEntry:V,onGroupIDChange:G,hasSelections:J}=sp({onClickBatch:r,onRevertBatch:a,entries:_?O:D}),q=()=>{P(1)},X=eM();(0,I.useEffect)(()=>{X&&(q(),G())},[X]);let Y=C!==j.absent,Q=W?.length>0?`(${W?.length})`:"",K=e=>{let t=$(e),s=r?e=>{t&&z?z():r&&r([e])}:void 0,i=a?e=>{t&&V?V():a&&a([e])}:void 0;return{isSelected:t,entry:e,date:n,updateEntry:l,onSelectToggle:M,onClickTooltip:f,onRevertClickTooltip:x,onClick:s,onRevertClick:i,isTablet:m,usersBasePath:u,openConfirm:p.open}};return(0,en.jsxs)(tN.Z,{rounded:!_,border:!_,style:{overflow:C!==j.absent||_?void 0:"auto",borderColor:g},shadow:!_,children:[(0,en.jsx)(E.I4,{...p}),(0,en.jsx)(th.Z,{gap:5,align:"center",justify:"space-between",style:{paddingInline:20,paddingBlock:15},children:(0,en.jsxs)(th.Z,{gap:5,align:"center",children:[(0,en.jsx)(tp.Z,{variant:"solid",fontAwesomeIcon:y,style:{color:g}}),(0,en.jsxs)("p",{style:{fontWeight:"bold"},children:[se(t,c)," ",Q]})]})}),(0,en.jsx)(sC,{value:b,onChangeValue:e=>{v(e),P(1)},orderOn:T,setOrderOn:e=>{w(e),q()},setSortBy:e=>{S(e),q()},sortBy:C,section:t}),(0,en.jsx)(th.Z,{direction:"column",style:{paddingBlockStart:10,paddingBlockEnd:_?20:0},children:d?(0,en.jsx)("div",{style:{paddingInline:15},children:[...Array(15)].map((e,t)=>(0,en.jsx)(so.Z,{variant:"rect",borderRadius:8,height:70,width:"100%"},t))}):D.length>0||N.length>0?(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(sy,{onCheckAll:U,loading:o,onClickTooltip:f,onRevertTooltip:x,allChecked:L,revertEveryEntry:V,hasSelections:J,updateEveryEntry:z}),(0,en.jsx)(th.Z,{gap:10,direction:"column",style:{paddingBlockStart:_?10:0},children:_?(0,en.jsx)(sY,{presentEntriesPaginated:O,pages:F,pagination:B,setPage:P,incrementPage:H,decrementPage:R,getEntryProps:K,showPresentEntries:Y,absentEntries:N}):(0,en.jsx)(s0,{count:D.length,height:i,disabled:C===j.absent,children:e=>(0,en.jsx)(sK,{virtualizer:e,showPresentEntries:Y,getEntryProps:K,absentEntries:N,presentEntries:D})})})]}):(0,en.jsx)(tg.Z,{color:"secondary",style:{paddingInline:20,paddingBlockEnd:60},children:c(b.length>0?A.ZT.Common.NoResultUser:A.ZT.Common.EmptyList)})})]})}),s6=a(69165);let s5=new e_.Nl,s2=async(e,t)=>{let a={user_id:e,date:t,checked_in_at:C.Z.getISOHour(),checked_out_at:null,absence:null,comment:null,guardian_comment:null};return(await s5.createChildcareCheckin(a)).created},s3=async(e,t)=>(await s5.updateChildcareCheckin({id:e.id,user_id:e.user_id,...t})).updated,s7=async e=>{let t={id:e.id,user_id:e.user_id,organization_id:e.organization_id,school_id:e.school_id,checked_out_at:C.Z.getISOHour()};return(await s5.updateChildcareCheckin(t)).updated},s4=async e=>{let t={id:e.id,user_id:e.user_id,organization_id:e.organization_id,school_id:e.school_id,checked_out_at:null};return(await s5.updateChildcareCheckin(t)).updated},s9=async e=>s3(e,{checked_in_at:null,absence:e.absence});var s8=e=>{let{isoDate:t}=e,{childcareCheckins:a,invalidateQuery:r,isLoading:n}=nb(),s=eL(),l=a.filter(e=>e.checkin.date===t&&s.includes(e.calendar_for_checkin.user_id)),i=async e=>{let a=l?l.find(t=>t.checkin.user_id===e):void 0;return a?.checkin.id?s3(a.checkin,{checked_in_at:C.Z.getISOHour(),absence:a.checkin.absence}):s2(e,t??"")},o=async(e,t,a)=>{let n=new O.u;for(let a of e){let e=l.find(e=>e.calendar_for_checkin.user_id===a);e?.checkin.id?c(e,n,t):d(a,n)}try{await n.execute(),r(),a?.()}catch{a?.()}},d=(e,a)=>{a.addCreateChildcareCheckinRequest({user_id:e,date:t||C.Z.getISO(),checked_in_at:C.Z.getISOHour(),checked_out_at:null,absence:null,comment:null,guardian_comment:null})},c=(e,a,r,n)=>{a.addUpdateChildcareCheckinRequest({user_id:e.calendar_for_checkin.user_id,id:e.checkin.id,date:t,...r?n?{checked_out_at:null}:{checked_out_at:C.Z.getISOHour()}:n?{checked_in_at:null}:{checked_in_at:C.Z.getISOHour()}},(0,B.Z)())},u=async(e,t,a)=>{let n=new O.u;for(let a of e){let e=l.find(e=>e.calendar_for_checkin.user_id===a);e?.checkin.id&&c(e,n,t,!0)}try{await n.execute(),r(),a?.()}catch{a?.()}},_=(0,I.useMemo)(()=>[...new Set(l.map(e=>e.calendar_for_checkin.user_id))],[l]);return{checkins:l,users:(0,ef.b1)(_),checkinUser:i,revertCheckin:s9,revertCheckout:s4,checkoutUser:s7,isLoading:n,updateEntry:r,onClickBatch:o,onRevertBatch:u}};let le=()=>{let[e,t]=(0,I.useState)(window.innerHeight);return(0,I.useEffect)(()=>{function e(){t(window.innerHeight)}return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e},lt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=le(),[a,r]=(0,I.useState)(0),n=(0,s6.Z)(e=>{r(e.contentRect.height)});return{height:(0,I.useMemo)(()=>t-a-(70+e+20),[a,e,t]),headerRef:n}},la=(e,t)=>{let a=t[e.calendar_for_checkin.user_id];return{id:e.calendar_for_checkin.user_id,checkin:e,user:a}},lr=e=>{let{checkin:t}=e;return!t.checked_in_at&&!t.checked_out_at};var ln=a(69809),ls=a(95397),ll=a(98017),li=a(29843),lo=a(88272),ld=a.n(lo),lc=e=>{let{userPreview:t,onSetAbsence:a,onRemoveAbsence:r,isoDate:n,checkinCalendar:s,reportedBy:l}=e,{t:i}=(0,A.T_)(),[o,d]=(0,I.useState)(!1),{settings:c}=(0,Y.rV)(),u=s?.checkin;if(!(c.NewChildcare?s?.deviation?.absence:u?.absence))return(0,en.jsx)(t_.Z,{onClick:()=>{a(t.id,n)},children:(0,en.jsx)("div",{className:ld().dayItem,children:(0,en.jsx)("div",{className:ld().dayItem__inner,children:(0,en.jsxs)(th.Z,{align:"center",gap:5,children:[(0,en.jsx)(tp.Z,{fontAwesomeIcon:"circle-plus",variant:"solid"}),(0,en.jsx)("p",{style:{textWrap:"nowrap"},children:i(A.ZT.Hub.Absence.New)})]})})})});let _=()=>c.NewChildcare?s?.deviation?.updated_at||s?.deviation?.created_at:u?.updated_at||u?.created_at;return(0,en.jsxs)(aD.ZP.Root,{...(0,nd.g9)(),open:o,onChangeOpen:d,children:[(0,en.jsx)(aD.ZP.Target,{children:(0,en.jsx)("div",{className:eJ()(ld().dayItem,ld()["dayItem--absent"]),children:(0,en.jsx)("div",{className:ld().dayItem__inner,children:(0,en.jsxs)(th.Z,{align:"center",gap:5,children:[(0,en.jsx)(tp.Z,{fontAwesomeIcon:"pen-circle",variant:"solid"}),(0,en.jsx)("p",{children:(0,e1.Z)("Fr\xe5nvarande")})]})})})}),(0,en.jsx)(aD.ZP.Element,{children:(0,en.jsxs)(tN.Z,{padded:!0,border:!0,shadow:!0,rounded:!0,children:[l&&(0,en.jsxs)(en.Fragment,{children:[(0,en.jsxs)(th.Z,{align:"center",justify:"space-between",gap:5,children:[(0,en.jsxs)("p",{style:{paddingBlockEnd:5,fontWeight:500},children:[(0,e1.Z)("Rapporterad av:")," "]}),(0,en.jsx)(tR.Z,{"aria-label":i(A.ZT.Common.Close),variant:"tertiary",size:"sm",onClick:()=>{d(!1)},children:(0,en.jsx)(ez.J,{name:"icon-xmark-24"})})]}),(0,en.jsxs)(th.Z,{gap:5,children:[(0,en.jsx)(ef.Yt,{size:"sm",user:l}),(0,en.jsxs)("p",{children:[l.first_name," ",l.last_name]})]})]}),_&&(0,en.jsx)(tg.Z,{color:"secondary",children:C.Z.getReadableWithTime(_())}),(0,en.jsx)(tW.Z,{variant:"secondary",size:"md",destructive:!0,startIcon:(0,en.jsx)(ez.J,{name:"icon-trash-can-16"}),onClick:()=>{r(n,t.id)},style:{marginBlockStart:5},children:(0,e1.Z)("Ta bort fr\xe5nvaro")})]})})]})},lu=a(67608),l_=a.n(lu),lm=e=>{let{to:t,children:a}=e;return(0,en.jsx)(t_.Z,{to:t,className:l_().userCellWrapper,children:a})};let lh=e=>{let{offset:t=0,limit:a=50,orderBy:r,fullNameQuery:n}=e,s=eM(),l=D.Ck.useListUserGroupsQuery({query:{params:{equals:{is_childcare:!0}}}}),i=s.length>0?s:l.data?.user_groups?.map(e=>e.id)??[];return D.Ck.useListUserPreviewsAsMembersByGroupIDsQuery({group_ids:i,query:{params:{equals:{user_school_student:{has_childcare:!0}},like:{full_name:n}},nested:[{or_condition:!0,params:{greater_or_equal:{user_school_student:{end_date:C.Z.getISO()}},empty:{user_school_student:{end_date:!0}}}}],offset:t,order_by:r,limit:a}})},lp=new e_.Nl,lg=(0,li.Cl)(),ly=(e,t)=>e.filter(e=>{let{checkin:a,deviation:r}=e;return!!((t?r?.absence:a?.absence)&&(t?r?.updated_by||r?.created_by:a?.updated_by||a?.created_by))}).map(e=>{let{checkin:a,deviation:r}=e;return t?r?.updated_by||r?.created_by:a.updated_by||a.created_by}).filter(nm.Z.isNotNullish),lx=()=>{let{childcareCheckins:e,invalidateQuery:t}=nb(),{settings:a}=(0,Y.rV)(),r=ly(e,a.NewChildcare);return{reportedByQuery:(0,ef.b1)(r),childcareCheckins:e,invalidateQuery:t}},lf=async(e,t)=>lp.deleteChildcareDeviation({id:e,user_id:t}),lb=e=>{let{isoWeek:t}=e,{usersBasePath:a}=nb(),{t:r}=(0,A.T_)(),n=(0,E.N4)(),{limit:s,offset:l,setPage:i,pagination:o,setSize:d}=(0,sd.Z)(),{setSearchValue:c,debouncedSearchValue:u}=(0,n_.Z)(),{setTableOrder:_,order:m}=(0,nx.Z)([{id:"last_name",desc:!1}]),{settings:p}=(0,Y.rV)(),g=lh({limit:s,offset:l,orderBy:m,fullNameQuery:u}),y=g?.data?.users??[],{reportedByQuery:x,invalidateQuery:f,childcareCheckins:b}=lx(),v=eu({isoWeek:t}),k=(e,t)=>{let a=b.find(a=>{let{checkin:r,calendar_for_checkin:{user_id:n}}=a;return n===t&&r.date===e});if(p.NewChildcare){let e=a?.deviation;if(!e)return;let s=y.find(e=>{let{id:a}=e;return a===t});n.open({title:r(A.ZT.Childcare.Alerts.DeleteDeviationTitle({user:s?.full_name??""})),description:r(A.ZT.Childcare.Alerts.DeleteDeviationDescription),primaryActionButtonText:r(A.ZT.Childcare.Alerts.DeleteDeviationPrimaryText),secondaryActionButtonText:r(A.ZT.Childcare.Alerts.DeleteDeviationSecondaryText),onSecondaryAction:()=>{lf(e?.id??"",t).then(()=>{f()})},onPrimaryAction:()=>{lp.updateChildcareDeviation({id:e.id,absence:!1,comment:e.comment,starts_at:e.starts_at,ends_at:e.ends_at,guardian_comment:e.guardian_comment,user_id:t}).then(()=>{f()})}});return}if(!a?.checkin)return;let s=lp.updateChildcareCheckin({id:a.checkin.id,absence:!1,user_id:t}).then(()=>{f()});E.FN.promise(s,(0,e1.Z)("Fr\xe5nvaro togs bort!"))},Z=e=>p.NewChildcare?`${e}/${t}`:`${a}/${e}/${h.UserCalendarUrl}`,j=(e,t)=>{let a=b.find(a=>{let{checkin:r,calendar_for_checkin:{user_id:n}}=a;return n===e&&r.date===t});if(p.NewChildcare){let r=a?.deviation;if(r?.id){let t=lp.updateChildcareDeviation({id:r.id,absence:!0,user_id:e,comment:r.comment,starts_at:r.starts_at,ends_at:r.ends_at,guardian_comment:r.guardian_comment}).then(()=>{f()});E.FN.promise(t,(0,e1.Z)("Fr\xe5nvaro tillagd!"));return}let n=lp.createChildcareDeviation({absence:!0,user_id:e,comment:null,starts_at:a?.calendar_for_checkin?.starts_at??null,ends_at:a?.calendar_for_checkin?.ends_at??null,date:t,guardian_comment:null}).then(()=>{f()});E.FN.promise(n,(0,e1.Z)("Fr\xe5nvaro tillagd!"));return}let r=a?.checkin;if(r?.id){let t=lp.updateChildcareCheckin({id:r.id,absence:!0,user_id:e}).then(()=>{f()});E.FN.promise(t,(0,e1.Z)("Fr\xe5nvaro tillagd!"));return}let n=lp.createChildcareCheckin({user_id:e,date:t,checked_in_at:null,checked_out_at:null,comment:null,absence:!0,guardian_comment:null}).then(()=>{f()});E.FN.promise(n,(0,e1.Z)("Fr\xe5nvaro tillagd!"))},C=v.map(e=>{let{isoDate:t,dayName:a}=e;return lg.display({id:a,header:()=>(0,en.jsxs)("div",{style:{paddingInline:10},children:[(0,en.jsx)(tg.Z,{color:"primary",children:r(tT.i.getDayNameTranslation(a))}),(0,en.jsx)(tg.Z,{color:"secondary",children:t})]}),cell:e=>{let{row:a}=e,r=b.find(e=>{let{checkin:r,calendar_for_checkin:{user_id:n}}=e;return n===a.original.id&&r.date===t}),n=p.NewChildcare?r?.deviation?.updated_by||r?.deviation?.created_by:r?.checkin?.updated_by||r?.checkin?.created_by,s=n?x[n]:void 0;return(0,en.jsx)(lc,{isoDate:t,userPreview:a.original,checkinCalendar:r,reportedBy:s,onSetAbsence:j,onRemoveAbsence:k})}})}),S=[lg.display({id:"first_name",header:()=>(0,en.jsx)("span",{style:{paddingInline:10},children:r(A.ZT.Common.FirstName)}),cell:e=>{let{row:t}=e;return(0,en.jsxs)(lm,{to:Z(t.original.id),children:[(0,en.jsx)(ef.Yt,{size:"sm",user:t.original}),(0,en.jsxs)(th.Z,{direction:"column",children:[(0,en.jsx)("span",{style:{whiteSpace:"nowrap",lineHeight:1},children:t.original?.first_name??""}),t.original.class_user_group_title&&(0,en.jsx)(tg.Z,{size:"0.8rem",color:"secondary",children:t.original.class_user_group_title})]})]})}}),lg.display({id:"last_name",header:()=>(0,en.jsx)("span",{style:{paddingInline:10},children:r(A.ZT.Common.LastName)}),cell:e=>{let{row:t}=e;return(0,en.jsx)(t_.Z,{to:Z(t.original.id),children:(0,en.jsx)("div",{style:{paddingInline:10},children:t.original?.last_name??""})})}}),...C];return{users:y,paginationResponse:{total_count:g.data?.total_count??0},pagination:o,setPage:i,setSize:d,columns:S,isLoading:g.isLoading,handleOnQueryChange:c,handleOnOrderChange:_,confirm:n}};var lv=a(6988),lk=a.n(lv),lZ=a(23144),lj=a(86286),lC=a(27285),lS=a(81052),lT=a(52951),lw=a.n(lT),lD=e=>{let{checkin:t}=e,{t:a}=(0,A.T_)(),r=(0,lC.Z)();return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(tR.Z,{variant:"tertiary","aria-label":(0,e1.Z)("Kommentar"),onClick:r.open,children:(0,en.jsx)("div",{className:lw().checkinComment__comment,children:(0,en.jsx)(ez.J,{name:"icon-comment-lines-fill-16"})})}),(0,en.jsxs)(lS.Z,{"aria-label":(0,e1.Z)("Kommentar"),className:lw().checkinComment__modal,open:r.isOpen,onClose:r.close,children:[(0,en.jsxs)(lS.Z.Header,{mobileCloseButtonLabel:a(A.ZT.Common.Cancel),children:[(0,en.jsx)(lS.Z.Title,{children:(0,e1.Z)("Daglig kommunikation")}),(0,en.jsx)(lS.Z.CloseButton,{})]}),(0,en.jsx)(lS.Z.Content,{className:lw().checkinComment__comments,children:(0,en.jsx)(sN,{renderEmpty:(0,en.jsx)("p",{children:a(A.ZT.Common.EmptyList)}),checkinForDay:t})})]})]})},lN=a(47431),lI=a.n(lN),lA=(0,I.memo)(e=>{let{checkinForDay:t,isClosed:a}=e,r=t?.checkin,{t:n}=(0,A.T_)(),{findStatus:s}=nj(),l=t?s(t):void 0;if(!l)return null;let i=nS({checkinForDay:t})[l],o=!!(t?.calendar_for_checkin.comment||r?.guardian_comment||r?.comment||t.deviation?.comment||t.deviation?.guardian_comment),d=t?.deviation?.id?!t.deviation?.starts_at:!!t?.calendar_for_checkin?.id&&!t.calendar_for_checkin?.starts_at;return(0,en.jsxs)("div",{className:lI().childcareOverviewDay,children:[!a&&i?.iconName?(0,en.jsx)(ez.J,{name:i?.iconName,className:eJ()({[lI().expected]:"Expected"===l,[lI().checkedIn]:"Checkedin"===l,[lI().absent]:"Reportedabsent"===l})}):null,a?(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:n(A.ZT.Childcare.Closed)}):null,a?null:(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:d&&i?.status!=="Reportedabsent"?n(A.ZT.Childcare.Free):i.text}),o&&r&&!a?(0,en.jsx)(lD,{checkin:t}):null]})}),lW=a(68079),lO=a.n(lW),lF=e=>{let{confirmed:t}=e;return(0,en.jsx)(tm.Z,{title:(0,e1.Z)(t?"Bekr\xe4ftad":"Ej bekr\xe4ftad"),children:(0,en.jsx)(e3.Z,{variant:"outlined",size:"xs",className:eJ()({[lO()["chip--confirmed"]]:t,[lO()["chip--notConfirmed"]]:!t}),children:(0,en.jsx)(ez.J,{name:t?"icon-checkmark-16":"icon-xmark-16"})})})},lE=a(7787),lB=()=>{let{isoWeek:e}=(0,er.UO)();if(!e)throw Error("No date provided");let{usersBasePath:t}=nb(),{settings:a}=(0,Y.rV)(),r=(0,er.s0)();return{handleOnClickUser:n=>{if(a.NewChildcare){r(`${n.id}/${e}`);return}r(`${t}/${n.id}/${h.UserCalendarUrl}`)}}},lR=a(65363),lH=a.n(lR),lP=e=>{let{user:t}=e,{handleOnClickUser:a}=lB();return(0,en.jsx)("button",{type:"button",className:lH().lastNameCell,onClick:()=>{a(t)},children:(0,en.jsx)(lE.Z,{text:t.last_name})})},lM=a(1313),lL=a.n(lM),l$=e=>{let{user:t}=e,a=t.class_user_group_title,{handleOnClickUser:r}=lB();return(0,en.jsx)("button",{type:"button",className:lL().avatarWithGroupCell,onClick:()=>{r(t)},children:(0,en.jsxs)("div",{className:lL().avatarWithGroupCell__labels,children:[(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:t.first_name}),a?(0,en.jsx)("p",{className:eJ()(eV.X.Label_XS_Regular,lL().avatarWithGroupCell__groupLabel),children:a}):null]})})},lU=e=>{let{user:t}=e,{handleOnClickUser:a}=lB();return(0,en.jsx)("button",{type:"button",onClick:()=>{a(t)},children:(0,en.jsx)(ef.Yt,{user:t,size:"sm"})})};let lz=(0,li.Cl)(),lV=()=>{let{isoWeek:e}=(0,er.UO)();if(!e)throw Error("Missing isoWeek");let{t}=(0,A.T_)(),{childcareCheckins:a}=nb(),{userID:r}=(0,ex.Tt)(),{baseWeek:n}=eP(r),{schoolCalendarWeek:s}=nN({isoWeek:e}),l=eL(),i=(0,I.useMemo)(()=>a.flatMap(e=>e).filter(e=>l.includes(e.calendar_for_checkin.user_id)),[l,a]),{findStatus:o}=nj(),{checkIfConfirmed:d}=nW(),c=eu({isoWeek:e}),u=s??n??void 0,_=c.map(e=>{let{isoDate:r,dayName:n}=e;return lz.display({id:r,meta:{disableClick:!0,highlight:C.Z.isEqual(r,C.Z.getISO())},header:()=>{let e=C.Z.getDaynameShort(r),a=C.Z.getDay(r),s=C.Z.getMonthnameShort(r),l=$.isClosed(n,u),d=i.filter(e=>C.Z.sameDay(e.checkin.date,r)).reduce((e,t)=>"Expected"!==o(t)||l?e:e+1,0);return(0,en.jsxs)(en.Fragment,{children:[e," ",a," ",s,(0,en.jsx)(tm.Z,{title:t(A.ZT.Childcare.OverviewStatus.Expected),children:(0,en.jsx)("div",{children:d>0?(0,en.jsx)(au.Z,{variant:"neutral-extra-darkest",count:d}):null})})]})},cell:e=>{let{row:t}=e,s=a?.find(e=>{let{checkin:a,calendar_for_checkin:{user_id:n}}=e;return n===t.original.id&&a.date===r}),l=$.isClosed(n,u);return s?(0,en.jsx)(lA,{isClosed:l,checkinForDay:s}):null}})}),{isNotConfirmedVisible:m}=nF(e),h=(0,I.useMemo)(()=>m?[lz.display({id:"confirmed",header:(0,e1.Z)("Bekr\xe4ftade tider"),cell:e=>{let{row:t}=e;return(0,en.jsx)(lF,{confirmed:d(t.original.id)})}})]:[],[d,m]);return{columns:(0,I.useMemo)(()=>[lz.display({id:"avatar_column",size:64,header:"",cell:e=>{let{row:t}=e;return(0,en.jsx)(lU,{user:t.original})},meta:{pinned:"always",ariaLabel:(0,e1.Z)("Profilbild"),disableBorderInlineEnd:!0},enableSorting:!1}),lz.accessor(e=>{let{first_name:t}=e;return t},{id:"first_name",header:t(A.ZT.Common.FirstName),meta:{pinned:"desktop",disablePaddingInlineStart:!0},cell:e=>{let{row:t}=e;return(0,en.jsx)(l$,{user:t.original})}}),lz.accessor("last_name",{header:t(A.ZT.Common.LastName),cell:e=>{let{row:t}=e;return(0,en.jsx)(lP,{user:t.original})},meta:{pinned:"desktop"}}),..._,...h],[h,t,_])}};var lG=a(3e4),lJ=a.n(lG),lq=()=>{let[e,t]=(0,I.useState)(C.Z.getUnix()),[a,r]=(0,I.useState)(!1),{t:n}=(0,A.T_)(),s=(0,D.ge)(),l=()=>{s.invalidateListChildcareCalendarAndCheckinsForWeekQuery({week:parseInt(C.Z.getWeek()),year:parseInt(C.Z.getFullYear())}),t(C.Z.getUnix())},i=C.Z.getDayname(e),o=C.Z.getDayname()===i?(0,e1.Z)("Idag"):i;return(0,en.jsxs)("div",{className:lJ().lastUpdated,children:[(0,en.jsxs)("div",{className:lJ().labels,children:[(0,en.jsx)("p",{className:eV.X.Label_SM_Regular,children:(0,e1.Z)("Senast uppdaterad")}),e?(0,en.jsxs)("p",{className:eJ()(eV.X.Label_XS_Regular,lJ().subtitle),children:[o,"•",C.Z.getISOHour(e)]}):null]}),(0,en.jsx)(tm.Z,{title:n(A.ZT.Common.Update),children:(0,en.jsx)(tR.Z,{"aria-label":n(A.ZT.Common.Update),size:"sm",variant:"secondary",color:"default",onClick:()=>{r(!0),l(),t(C.Z.getUnix()),setTimeout(()=>{r(!1)},500)},children:(0,en.jsx)(ez.J,{name:"icon-clock-rotate-left-24",className:eJ()({[lJ()["icon--rotate"]]:a})})})})]})},lX=a(37647),lY=a.n(lX),lQ=e=>{let{selectedWeek:t,setSelectedWeek:a}=e,{t:r}=(0,A.T_)(),n=C.Z.formatHelper(t,"w - YYYY");return(0,en.jsxs)("div",{className:lY().mobilePeriodSelector,children:[(0,en.jsx)(tR.Z,{"aria-label":r(A.ZT.Date.PreviousWeek),variant:"tertiary",size:"lg",onClick:()=>{a(C.Z.decrementISOWeek(t))},children:(0,en.jsx)(ez.J,{name:"icon-chevron-left-24"})}),(0,en.jsx)(tW.Z,{variant:"tertiary",size:"lg",onClick:()=>{a(C.Z.getISOWeek())},children:t===C.Z.getISOWeek()?`${r(A.ZT.Date.ThisWeek)} (V${n})`:`${(0,e1.Z)("Vecka")} (V${n})`}),(0,en.jsx)(tR.Z,{"aria-label":r(A.ZT.Date.NextWeek),variant:"tertiary",size:"lg",onClick:()=>{a(C.Z.incrementISOWeek(t))},children:(0,en.jsx)(ez.J,{name:"icon-chevron-right-24"})})]})},lK=a(42978),l0=a.n(lK),l1=()=>{let{isoWeek:e}=(0,er.UO)(),t=(0,er.s0)();if(!e)throw Error("Missing isoWeek");let a=eM(),{setSelectedGroups:r,overviewStatus:n,setOverviewStatus:s}=w(),[l,i]=(0,I.useState)(""),[o,d]=(0,I.useState)(e),[c,u]=(0,I.useState)(!1),[_,m]=(0,I.useState)([...a]),[h,p]=(0,I.useState)(n),{t:y}=(0,A.T_)(),{activeOrganizationID:x}=(0,ex.Tt)(),f=nY(),b=a.length>0,v=!!(n&&n!==g.ShowAll),k=f.filter(e=>e.title.toLowerCase().includes(l.toLowerCase())),{isOverViewFilterHeaderVisible:Z}=nB(o);return(0,en.jsxs)("div",{className:l0().mobileChildcareOverviewFilter,children:[(0,en.jsx)(nc.Z,{indicator:b||v,isOpen:c,onClick:()=>{u(e=>!e)}}),(0,en.jsx)(aF.Z,{open:c,onOpenChange:u,children:(0,en.jsxs)(aF.Z.Content,{fullHeight:!0,children:[(0,en.jsx)(aF.Z.Header,{children:(0,en.jsx)(aF.Z.Title,{children:y(A.ZT.Widget.Filtering)})}),(0,en.jsxs)(aF.Z.Body,{className:l0().bottomSheet__body,children:[(0,en.jsx)("div",{className:l0().section,children:(0,en.jsx)(lQ,{selectedWeek:o,setSelectedWeek:d})}),(0,en.jsx)(at.Z,{margin:0}),(0,en.jsx)(lq,{}),(0,en.jsx)(at.Z,{margin:0}),(0,en.jsx)("div",{className:l0().sectionCombobox,children:(0,en.jsx)(nu.Z,{onSelect:e=>{if(_.includes(e)){m(t=>t.filter(t=>t!==e));return}m(t=>[...t,e])},onSearch:i,label:(0,e1.Z)("Filtrera p\xe5 avdelningar"),children:k.map(e=>(0,en.jsx)(nu.Z.Item,{selected:_.includes(e.id),value:e.id,children:e.title},e.id))})}),(0,en.jsx)("div",{className:l0().section,children:Z?(0,en.jsx)(nG,{onTemporaryFilterChange:e=>{p(e)},temporaryFilter:h,isoWeek:o}):null}),(0,en.jsx)(aF.Z.Footer,{className:l0().bottomSheet__footer,children:(0,en.jsx)(tW.Z,{variant:"secondary",size:"md",onClick:()=>{u(!1),t(`../${o}`),r(_,x),s(h),E.FN.success((0,e1.Z)("Filter har till\xe4mpats"))},fullWidth:!0,children:y(A.ZT.Common.Apply)})})]})]})})]})},l6=a(98535),l5=a(77232);let l2={tableLayout:"fixed",width:"100%",padding:"8px",fontSize:"12px",borderCollapse:"collapse"},l3={textAlign:"left",padding:"2px"},l7={borderBottom:"1px solid black",lineHeight:"32px"},l4={padding:"2px"};var l9=e=>{let{columns:t,rows:a,title:r}=e;return(0,en.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,en.jsx)("header",{children:(0,en.jsx)("h3",{children:r})}),(0,en.jsxs)("table",{style:l2,children:[(0,en.jsx)("thead",{children:(0,en.jsxs)("tr",{children:[t.map(e=>(0,en.jsx)("th",{colSpan:1,style:l3,children:e},e)),(0,en.jsx)("th",{colSpan:2,style:l3,children:(0,e1.Z)("Anteckningar")})]})}),(0,en.jsx)("tbody",{children:a.map((e,t)=>(0,en.jsx)("tr",{style:l7,children:e.map((e,t)=>(0,en.jsx)("td",{style:l4,children:e},t))},t))})]})]})},l8=()=>{let{isoWeek:e}=(0,er.UO)();if(!e)throw Error("Missing isoWeek");let{schoolCalendarWeek:t}=nN({isoWeek:e}),{week:a}=C.Z.isoWeekToYearAndWeek(e),{userID:r}=(0,ex.Tt)(),{baseWeek:n}=eP(r),{findStatus:s}=nj(),l=t??n??void 0,{childcareCheckins:i}=nb(),o=(0,I.useCallback)((e,t)=>i?.find(a=>{let{checkin:r,calendar_for_checkin:n}=a;return n.user_id===e&&r.date===t}),[i]),{allSelectedGroupsText:d}=n2({isoWeek:e,isoDate:void 0}),{t:c}=(0,A.T_)(),u=eu({isoWeek:e}),_=u.map(e=>{let{dayName:t}=e;return c(tT.i.getDayNameTranslation(t))}),m=[`${c(A.ZT.Common.WeekAlt)}. ${a}`,"",...u.map(e=>{let{isoDate:t}=e;return C.Z.formatHelper(t,"dd/MM - yy")})],{users:h}=nI();if((0,l6.Z)())return null;let p=[m,...h.map(e=>[e.first_name,e.last_name,...u.map(t=>{let{isoDate:a,dayName:r}=t,n=o(e.id,a),i=n?s(n):void 0,d=nS({checkinForDay:n});if(!i)return"";let u=d[i].text;return n?$.isClosed(r,l)?c(A.ZT.Childcare.Closed):u??"":""})])],g=[c(A.ZT.Common.FirstName),c(A.ZT.Common.LastName),..._];return(0,en.jsx)(th.Z,{justify:"flex-end",style:{flex:1},children:(0,en.jsx)(tW.Z,{size:"md",variant:"primary",endIcon:(0,en.jsx)(ez.J,{name:"icon-printer-16"}),onClick:()=>{(0,l5.J)({title:c(A.ZT.Preschool.ChildSchedule),elements:[(0,en.jsx)(l9,{title:(0,e1.Z)(`Omsorgstider f\xf6r ${d}`),rows:p,columns:g},"print-view")]})},children:c(A.ZT.Common.Print)})})},ie=a(86139),it=a.n(ie),ia=a(26187),ir=a(81750),is=a.n(ir),il=()=>{let{userID:e,careISOWeek:t}=(0,er.UO)();if(!e||!t)throw Error("No userID or initialISOWeek provided");let{t:a}=(0,A.T_)(),r=(0,E.VY)(),{invalidateQuery:n}=nb(),s=(0,er.s0)(),l=(0,ef.dl)(e),[i,o]=(0,I.useState)(!1),[d,c]=(0,I.useState)(),{invalidateQuery:u}=K({userID:e}),_=(0,ia.Z)({defaultOpen:!1,afterClose:()=>{u(),c(void 0)},onAttemptClose:()=>!r.isOpen&&(!i||(r.set({title:a(A.ZT.Childcare.AttemptCloseLabel),content:a(A.ZT.Childcare.AttemptCloseDescription),buttonText:a(A.ZT.Childcare.AttemptCloseContinue),cancelText:a(A.ZT.Childcare.AttemptCloseCancel),destructive:!0,onContinue:()=>{_.close({force:!0}),r.close()}}),r.open(),!1))}),m=(0,ia.Z)({onAttemptClose:()=>!r.isOpen}),h=(0,lC.Z)({defaultOpen:!0,afterClose:()=>{n(),s("../..")},onAttemptClose:()=>!_.isOpen&&!r.isOpen});return(0,en.jsxs)(lS.Z,{open:h.isOpen,onClose:h.close,className:is().modal,"aria-label":(0,e1.Z)("CareHours"),children:[(0,en.jsx)(lS.Z.CloseButton,{}),(0,en.jsxs)(lS.Z.Header,{platform:"mobile",children:[(0,en.jsx)(lS.Z.Title,{children:a(A.ZT.Childcare.TimesFor)}),(0,en.jsx)(lS.Z.Subtitle,{children:l?.full_name??""})]}),(0,en.jsx)("div",{className:eJ()(is().overlay,{[is()["overlay--open"]]:_.isOpen})}),(0,en.jsxs)(lS.Z.Content,{children:[(0,en.jsxs)("div",{className:is().headerTitleWrapper,children:[(0,en.jsx)(rR.HeaderTitle,{title:a(A.ZT.Childcare.TimesFor),settingsSidePanelOpen:m.open,userID:e}),(0,en.jsx)(t3.Z,{open:m.isOpen,onClose:m.close,children:(0,en.jsx)(rR.Settings,{userID:e,isoWeek:t,onClose:m.close})})]}),(0,en.jsxs)("div",{className:is().weekWrapper,children:[(0,en.jsx)(t3.Z,{open:_.isOpen,onClose:_.close,overlayDisabled:!0,children:(0,en.jsx)(t3.Z.Content,{children:(0,en.jsx)(rR.Manage,{userID:e,isoWeek:t,selectedDayData:d,onClose:_.close,formIsDirty:i,setFormIsDirty:o})})}),(0,en.jsx)(rR.Header,{userID:e,isoWeek:t,onWeekOpen:()=>{_.open()},onChangeTo:e=>`../${e}`}),(0,en.jsx)(rR.Week,{onDayClick:e=>{_.open(),c(e)},userID:e,isoWeek:t})]})]}),(0,en.jsxs)(lS.Z.Footer,{platform:"mobile",children:[(0,en.jsx)(tW.Z,{size:"md",variant:"secondary",onClick:m.open,startIcon:(0,en.jsx)(ez.J,{name:"icon-cog-16"}),children:a(A.ZT.Common.Settings)}),(0,en.jsx)(tW.Z,{variant:"primary",size:"md",onClick:()=>{_.open()},startIcon:(0,en.jsx)(ez.J,{name:"icon-calendar-pen-24"}),children:a(A.ZT.Childcare.EditCareHours)})]})]})};let ii=()=>C.Z.isSunday()||C.Z.isSaturday()?C.Z.incrementISOWeek(C.Z.getISOWeek(),1):C.Z.getISOWeek(),io=[{path:"overview",element:(0,en.jsx)(()=>{let{app:e}=nb(),{t}=(0,A.T_)();return(0,rH.fb)({label:t(A.ZT.Common.Overview),path:"LMS"===e?"/childcare/overview":"/school/childcare/overview"}),(0,en.jsx)(er.j3,{})},{}),children:[{index:!0,element:(0,en.jsx)(er.Fg,{to:ii(),replace:!0})},{path:":isoWeek",element:(0,en.jsx)(()=>{let{isoWeek:e}=(0,er.UO)();if(!e)throw Error("No date provided");let t=(0,rH.Dg)(),{t:a}=(0,A.T_)(),r=(0,I.useRef)(null),n=(0,eE.Z)("(pointer:coarse)");(0,lj.Z)("\xd6versikt omsorgstider • Meitner");let{setSelectedUserIDs:s}=(0,lZ.zl)(),{setOverviewStatus:l}=w(),[i,o]=(0,I.useState)([]),{subtitle:d}=n2({isoWeek:e,isoDate:void 0}),{app:c}=nb(),u="LMS"===c?"/communication/feed/new":"/school/communication",{columns:_}=lV(),{users:m,isLoading:h,handleOnOrderChange:p,handleOnQueryChange:y}=nI(),x=()=>[...new Set(i.flatMap(e=>m.find(t=>t.id===e)?.guardian_user_ids??[]))],f=[{label:a(A.ZT.Childcare.MessageGuardian),callback:()=>{s(x()),t.push(u,"Admin"===c?"next-app-router":void 0)},icon:(0,en.jsx)(ez.J,{name:"icon-comment-plus-16"})}],b=()=>{l(g.ShowAll)},v={position:"bottom",content:(0,en.jsx)("div",{className:it().statusFilter,children:(0,en.jsx)(nG,{isoWeek:e})})},{isOverViewFilterHeaderVisible:k}=nB(e),Z=n?void 0:{title:a(A.ZT.Hub.ViewCheckin),subtitle:d};return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(er.j3,{}),(0,en.jsxs)("header",{className:it().tableHeadings,children:[(0,en.jsxs)("div",{children:[(0,en.jsx)("h2",{className:eV.X.Heading_XL,children:a(A.ZT.Hub.ViewCheckin)}),(0,en.jsx)("h3",{className:eV.X.Paragraph_SM_Regular,children:d})]}),(0,en.jsx)(l8,{})]}),(0,en.jsx)(ln.Z,{ref:r,onChangeSelected:o,columns:_,data:m,isLoading:h,onChangeOrder:p,onChangeQuery:y,headings:Z,headerContent:k&&!n?v:void 0,headerRight:(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)(l1,{}),(0,en.jsxs)("div",{className:it().childcareOverviewHeaderInner,children:[(0,en.jsx)("div",{}),(0,en.jsx)(ls.Z,{date:e,mode:ll.j.Week,onDecrement:()=>{t.push(`../${C.Z.decrementISOWeek(e)}`),b()},onIncrement:()=>{t.push(`../${C.Z.incrementISOWeek(e)}`),b()},onCurrent:()=>{t.push(`../${C.Z.getISOWeek()}`)}}),(0,en.jsxs)("div",{className:it().updateAndPrintArea,children:[(0,en.jsx)(lq,{}),(0,en.jsx)(at.Z,{orientation:"vertical",className:it().divider}),(0,en.jsx)(l8,{})]})]})]}),selectable:!0}),(0,en.jsx)(rP.Z,{onClearSelected:()=>r.current?.resetRowSelection(),actions:f,selectedCount:i.length})]})},{}),children:[{path:":userID",children:[{index:!0,element:(0,en.jsx)(er.Fg,{to:ii()})},{path:":careISOWeek",element:(0,en.jsx)(il,{})}]}]}]},{path:"checkin",element:(0,en.jsx)(()=>{let{app:e}=nb(),{t}=(0,A.T_)();return(0,rH.fb)({label:t(A.ZT.Hub.CheckInCheckOut),path:"LMS"===e?"/childcare/checkin":"/school/childcare/checkin"}),(0,en.jsx)(er.j3,{})},{}),children:[{index:!0,element:(0,en.jsx)(er.Fg,{to:C.Z.getISO()})},{path:":isoDate",element:(0,en.jsx)(()=>{let{isoDate:e}=(0,er.UO)();if(!e)throw Error("No date provided");let[t,a]=(0,I.useState)(k.Pending),[r,n]=(0,I.useState)(),{checkins:s,isLoading:l,users:i,updateEntry:o,onClickBatch:d,onRevertBatch:c}=s8({isoDate:e}),u=(0,eE.Z)("(max-width: 1000px)"),_=u?1:3,m=(0,I.useMemo)(()=>s.filter(e=>!e.checkin.id||lr(e)).map(e=>la(e,i)).filter(e=>e.user?.first_name),[s,i]),h=(0,I.useMemo)(()=>s.filter(e=>{let{checkin:t}=e;return t.id&&!t.checked_out_at&&t.checked_in_at}).map(e=>la(e,i)).filter(e=>e.user?.first_name),[s,i]),p=(0,I.useMemo)(()=>s.filter(e=>!!e.checkin.checked_out_at).map(e=>la(e,i)).filter(e=>e.user?.first_name),[s,i]),g=()=>{n(void 0)},{height:y,headerRef:x}=lt();return(0,en.jsxs)(en.Fragment,{children:[(0,en.jsx)("div",{ref:x,children:(0,en.jsx)(n4,{isoDate:e,onGetNextDate:e=>`../${e}`})}),u?(0,en.jsx)(si,{pendingSectionEntries:m,checkinSectionEntries:h,checkoutSectionEntries:p,activeTab:t,setActiveTab:a}):null,(0,en.jsxs)(r9.Z,{templateColumns:`repeat(${_}, 1fr)`,gap:_>1?10:void 0,style:{flex:1,minHeight:u?void 0:`${y}px`,maxHeight:u?void 0:`${y}px`,marginBlockStart:_>1?20:0},children:[u&&t!==k.Pending?null:(0,en.jsx)(s1,{isLoading:l,entries:m,updateEntry:o,onClickBatch:e=>{n(k.Pending),d(e,!1,g)},section:k.Pending,gridHeight:y,isoDate:e,sectionLoading:r===k.Pending}),u&&t!==k.Checkin?null:(0,en.jsx)(s1,{isLoading:l,entries:h,updateEntry:o,isoDate:e,onRevertBatch:e=>{n(k.Checkin),c(e,!1,g)},onClickBatch:e=>{n(k.Checkin),d(e,!0,g)},sectionLoading:r===k.Checkin,section:k.Checkin,gridHeight:y}),u&&t!==k.Checkout?null:(0,en.jsx)(s1,{isLoading:l,entries:p,updateEntry:o,onRevertBatch:e=>{n(k.Checkout),c(e,!0,g)},isoDate:e,sectionLoading:r===k.Checkout,section:k.Checkout,gridHeight:y})]})]})},{})}]},{path:"absence",element:(0,en.jsx)(()=>{let{app:e}=nb(),{t}=(0,A.T_)();return(0,rH.fb)({label:t(A.ZT.Childcare.OverviewSections.Absence),path:"LMS"===e?"/childcare/absence":"/school/childcare/absence"}),(0,en.jsx)(er.j3,{})},{}),children:[{index:!0,element:(0,en.jsx)(er.Fg,{to:ii(),replace:!0})},{path:":isoWeek",element:(0,en.jsx)(()=>{let{isoWeek:e}=(0,er.UO)();if(!e)throw Error("No date provided");let{columns:t,users:a,setPage:r,pagination:n,setSize:s,isLoading:l,paginationResponse:i,handleOnQueryChange:o,handleOnOrderChange:d,confirm:c}=lb({isoWeek:e}),{title:u,subtitle:_}=n2({isoWeek:e,isoDate:void 0}),m=(0,er.s0)(),h=(0,eE.Z)();return(0,en.jsxs)("div",{children:[(0,en.jsx)(er.j3,{}),(0,en.jsx)(E.I4,{...c}),(0,en.jsx)(ln.Z,{onChangeQuery:o,onChangeOrder:d,data:a,onChangePage:r,onChangeSize:s,pagination:n,paginationResponse:i,headings:{title:u,subtitle:_},headerRight:h?void 0:(0,en.jsx)("div",{className:lk().headerRight,children:(0,en.jsx)(ls.Z,{mode:ll.j.Week,date:e,onCurrent:()=>{m(`../${C.Z.getISOWeek()}`)},onDecrement:()=>{m(`../${C.Z.decrementISOWeek(e)}`)},onIncrement:()=>{m(`../${C.Z.incrementISOWeek(e)}`)}})}),isLoading:l,columns:t})]})},{}),children:[{path:":userID",children:[{index:!0,element:(0,en.jsx)(er.Fg,{to:ii()})},{path:":careISOWeek",element:(0,en.jsx)(il,{})}]}]}]}],id=[{index:!0,element:(0,en.jsx)(er.Fg,{to:"overview",replace:!0})},...no],ic=[...id,{element:(0,en.jsx)(e=>{let{app:t}=e,{isoDate:a,isoWeek:r}=(0,er.UO)(),{t:n}=(0,A.T_)();(0,rH.fb)({label:n(A.ZT.Hub.ViewCheckin),path:"LMS"===t?"/childcare":"/school/childcare"});let{childcareCheckinsBody:s,childcareCheckins:l,isLoading:i,invalidateQuery:o}=nk({isoDate:a,isoWeek:r});return(0,en.jsx)(nf.Provider,{value:{childcareCheckinsBody:s,childcareCheckins:l,isLoading:i,app:t,usersBasePath:"LMS"===t?"/users":"/school/users/students",invalidateQuery:o},children:(0,en.jsx)(ti.Z,{style:{flex:1,backgroundColor:"var(--color-surface-base-container)"},children:(0,en.jsxs)(rH.T3,{children:[(0,en.jsx)(n6,{isoDate:a,isoWeek:r}),(0,en.jsx)(er.j3,{})]})})})},{app:"LMS"}),children:io}];[...id]},23144:function(e,t,a){"use strict";a.d(t,{v0:function(){return eS},zl:function(){return W}});var r,n,s,l,i,o,d,c,u=a(27573),_=a(98138),m=a(49660),h=a(96669),p=a(91138),g=a(59373),y=a(8230),x=a(80580),f=a(21009),b=a(26165),v=a(54375),k=a(31283),Z=a(79162),j=a(92575),C=a(59245),S=a(35725),T=a(7653),w=a(83499);(r=i||(i={})).Email="Email",r.SMS="SMS";let D=new w.KD,N=e=>{let{userIDs:t,channel:a}=e,[r,n]=(0,T.useState)([]);return(0,T.useEffect)(()=>{(()=>{if(0===t.length){n([]);return}let e=a===i.Email?{email_address1:!0}:{phone_number1:!0};D.listUserPreviews({query:{params:{in:{id:t},empty:e}},include_archived_students:!1}).then(e=>{n(e.users??[])})})()},[t.length,a]),r};var I=a(66641),A=a(72791);let W=(0,I.Ue)()((0,A.tJ)(e=>({selectedUserIDs:[],setSelectedUserIDs:t=>{e({selectedUserIDs:t})}}),{name:"grading-storage",storage:(0,A.FL)(()=>localStorage)}));var O=a(31943),F=a(66221),E=a(69702),B=a(69038),R=a(9037),H=a(15902),P=a.n(H);let M=(0,T.forwardRef)((e,t)=>{let{invalidUsers:a,userPath:r}=e,{t:n}=(0,j.T_)();return(0,u.jsxs)(B.ZP,{closedByDefault:!0,ref:t,width:"small",height:"medium",children:[(0,u.jsx)(B.ZP.Header,{children:(0,u.jsx)("h1",{children:n(j.ZT.Communication.MissingContactDetails({count:String(a.length)}))})}),(0,u.jsx)(B.ZP.Content,{children:(0,u.jsx)("ul",{children:a.map(e=>(0,u.jsxs)("li",{className:P().list__item,children:[(0,u.jsxs)("div",{className:P().list__item__startSection,children:[(0,u.jsx)(b.Yt,{user:e,size:"sm"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:C.X.Paragraph_SM_Semibold,children:e.full_name}),(0,u.jsx)("p",{className:C.X.Paragraph_XS_Regular,children:n(b.p5.getCategoryTranslation(e.category))})]})]}),(0,u.jsx)("div",{children:r?(0,u.jsx)(R.Z,{variant:"tertiary",size:"md",href:`${r}/${e.category.toLowerCase()}s/${e.id}`,targetRouter:"react-router",target:"_blank",children:n(j.ZT.Common.Show)}):null})]},e.id))})})]})});var L=e=>{let{invalidUsers:t,userPath:a}=e,r=(0,O.d)();return 0===t.length?null:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(M,{invalidUsers:t,userPath:a,ref:r.ref}),(0,u.jsxs)(h.Z,{align:"center",gap:5,style:{marginBlockStart:10},children:[(0,u.jsx)(F.Z,{variant:"duotone",fontAwesomeIcon:"circle-exclamation",color:"warning"}),(0,u.jsx)(E.Z,{onClick:r.open,children:(0,u.jsx)(g.Z,{color:"secondary",weight:500,children:(0,S.Z)(`${t.length} anv\xe4ndare saknar kontaktuppgifter`)})})]})]})},$=a(14375),U=a(839),z=a(76863),V=a(69203),G=a(45531),J=a.n(G),q=a(96808),X=a.n(q),Y=e=>{let{children:t}=e;return(0,u.jsx)("div",{className:X().listItem,children:t})},Q=a(36554),K=a.n(Q),ee=e=>{let{items:t,contentLeft:a,getOptions:r,onChangeQuery:n}=e,{t:s}=(0,j.T_)();return(0,u.jsxs)(u.Fragment,{children:[n?(0,u.jsx)("div",{className:K().listHeader,children:(0,u.jsx)(m.Z,{"aria-label":s(j.ZT.Common.Search),startDecorator:(0,u.jsx)(Z.J,{name:"icon-magnifying-glass-16"}),placeholder:s(j.ZT.Common.Search),onChangeValue:n,className:K().searchInput})}):null,(0,u.jsx)("div",{className:K().listContent,children:t.map(e=>(0,u.jsxs)(Y,{children:[(0,u.jsx)("div",{className:K().listItemInfo,children:a(e)}),(0,u.jsx)("div",{className:K().listItemOptions,children:r(e).map(e=>(0,u.jsxs)("button",{type:"button",onClick:e.disabled?void 0:e.onClick,disabled:e.disabled,className:J()(K().listItemOptions__option,{[K()["listItemOptions__option--selected"]]:e.selected}),children:[s(e.label),(0,u.jsx)(F.Z,{variant:"regular",fontAwesomeIcon:e.selected?"check":"plus"})]},e.label.key))})]},e.id))})]})},et=a(2261);let ea=new w.KD,er=e=>{let[t,a]=(0,T.useState)([]),r=async()=>{let e=await ea.selectionUserGroup({user_groups:t.map(e=>({user_group_id:e.entryID,member:e.members,moderator:e.moderators,guardians_for_member:e.guardiansForMembers}))});return a([]),e.user_ids};return(0,T.useEffect)(()=>()=>{a([])},[e]),{selections:t,setSelections:a,apply:r}};var en=(0,T.memo)(e=>{let{selections:t,setSelections:a}=e,{limit:r,offset:n,setResponse:s}=(0,et.Z)(),[l,i]=(0,T.useState)([]),[o,d]=(0,T.useState)("");(0,T.useEffect)(()=>{ea.listUserGroups({query:{params:{like:{title:o}},limit:r,offset:n}}).then(e=>{i(e.user_groups),s({total_count:e.total_count})})},[o,r,n,s]);let c=(0,T.useCallback)((e,t)=>{a(a=>{let r=a.find(t=>t.entryID===e),n={entryID:e,members:!1,moderators:!1,guardiansForMembers:!1,...r,[t]:!r||!r[t]};return r&&!(n.members||n.moderators||n.guardiansForMembers)?a.filter(t=>t.entryID!==e):r?a.map(t=>t.entryID===e?n:t):a.concat(n)})},[a]),_=(0,T.useCallback)(e=>[{label:j.ZT.UserSelection.OptionStudents,selected:t.some(t=>t.entryID===e.id&&t.members),onClick:()=>{c(e.id,"members")}},{label:j.ZT.UserSelection.OptionEmployees,selected:t.some(t=>t.entryID===e.id&&t.moderators),onClick:()=>{c(e.id,"moderators")}},{label:j.ZT.UserSelection.OptionGuardiansOfStudents,selected:t.some(t=>t.entryID===e.id&&t.guardiansForMembers),onClick:()=>{c(e.id,"guardiansForMembers")}}],[t,c]);return(0,u.jsx)(ee,{items:l,contentLeft:e=>(0,u.jsx)(g.Z,{children:e.title}),getOptions:_,onChangeQuery:d})});let es=new w.KD,el=e=>{let[t,a]=(0,T.useState)([]),r=async()=>{let e=await es.selectionSchoolYear({school_years:t.map(e=>({school_year:e.entryID,student:e.students,guardians_for_student:e.guardiansForStudents}))});return a([]),e.user_ids};return(0,T.useEffect)(()=>()=>{a([])},[e]),{selections:t,setSelections:a,apply:r}};var ei=(0,T.memo)(e=>{let{selections:t,setSelections:a}=e,{t:r}=(0,j.T_)(),n=(0,T.useCallback)((e,t)=>{a(a=>{let r=a.find(t=>t.entryID===e),n={entryID:e,students:!1,guardiansForStudents:!1,...r,[t]:!r||!r[t]};return r&&!(n.students||n.guardiansForStudents)?a.filter(t=>t.entryID!==e):r?a.map(t=>t.entryID===e?n:t):a.concat(n)})},[a]),s=(0,T.useCallback)(e=>[{label:j.ZT.UserSelection.OptionStudents,selected:t.some(t=>t.entryID===e.id&&t.students),onClick:()=>{n(e.id,"students")}},{label:j.ZT.UserSelection.OptionGuardiansOfStudents,selected:t.some(t=>t.entryID===e.id&&t.guardiansForStudents),onClick:()=>{n(e.id,"guardiansForStudents")}}],[t,n]),{schoolYearOptions:l}=(0,f.k3)(),i=l.map(e=>({id:e}));return(0,u.jsx)(ee,{items:i,contentLeft:e=>(0,u.jsx)("p",{children:r(b.p5.getSchoolYearTranslation(e.id))}),getOptions:s})}),eo=a(4444),ed=a.n(eo);let ec=new w.KD,eu=e=>{let[t,a]=(0,T.useState)([]),r=async()=>{let e=await ec.selectionSchool({schools:t.map(e=>({school_id:e.entryID,student:e.students,employee:e.employees,guardian:e.guardians}))});return a([]),e.user_ids};return(0,T.useEffect)(()=>()=>{a([])},[e]),{selections:t,setSelections:a,apply:r}};var e_=(0,T.memo)(e=>{let{selections:t,setSelections:a}=e,{organization:r}=(0,f.kV)(),n=(0,T.useCallback)((e,t)=>{a(a=>{let r=a.find(t=>t.entryID===e),n={entryID:e,students:!1,employees:!1,guardians:!1,...r,[t]:!r||!r[t]};return r&&!(n.students||n.employees||n.guardians)?a.filter(t=>t.entryID!==e):r?a.map(t=>t.entryID===e?n:t):a.concat(n)})},[a]),s=(0,T.useCallback)(e=>[{label:j.ZT.UserSelection.OptionStudents,selected:t.some(t=>t.entryID===e.id&&t.students),onClick:()=>{n(e.id,"students")}},{label:j.ZT.UserSelection.OptionEmployees,selected:t.some(t=>t.entryID===e.id&&t.employees),onClick:()=>{n(e.id,"employees")}},{label:j.ZT.UserSelection.OptionGuardians,selected:t.some(t=>t.entryID===e.id&&t.guardians),onClick:()=>{n(e.id,"guardians")}}],[t,n]);return(0,u.jsx)(ee,{items:r?[r]:[],contentLeft:e=>(0,u.jsxs)(h.Z,{gap:10,align:"center",children:[e.logo_file_url?(0,u.jsx)("div",{className:ed().schoolLogo,children:(0,u.jsx)("img",{src:e.logo_file_url,alt:"School logo"})}):null,(0,u.jsx)("p",{style:{lineHeight:1.2},children:e.display_name})]}),getOptions:s})});let em=new w.KD,eh=e=>{let[t,a]=(0,T.useState)([]),r=async()=>{let e=t.filter(e=>e.user).map(e=>e.entryID),r=t.filter(e=>e.guardians||e.children),n=[];if(e.length>0&&(n=n.concat(e)),r.length>0){let e=await em.selectionUser({users:t.map(e=>({user_id:e.entryID,guardians_for_user:e.guardians,students_for_user:e.children})).filter(e=>e.students_for_user||e.guardians_for_user)});n=n.concat(e.user_ids)}return a([]),n};return(0,T.useEffect)(()=>()=>{a([])},[e]),{selections:t,setSelections:a,apply:r}};var ep=(0,T.memo)(e=>{let{selections:t,setSelections:a}=e,{limit:r,offset:n,setResponse:s}=(0,et.Z)(),{t:l}=(0,j.T_)(),[i,o]=(0,T.useState)([]),[d,c]=(0,T.useState)("");(0,T.useEffect)(()=>{em.listUserPreviews({query:{params:{like:{full_name:d}},limit:r,offset:n},include_archived_students:!1}).then(e=>{o(e.users),s({total_count:e.total_count})})},[d,r,n,s]);let _=(0,T.useCallback)((e,t)=>{a(a=>{let r=a.find(t=>t.entryID===e),n={entryID:e,user:!1,guardians:!1,children:!1,...r,[t]:!r||!r[t]};return r&&!(n.user||n.guardians||n.children)?a.filter(t=>t.entryID!==e):r?a.map(t=>t.entryID===e?n:t):a.concat(n)})},[a]),m=(0,T.useCallback)(e=>[{label:j.ZT.UserSelection.OptionUser,selected:t.some(t=>t.entryID===e.id&&t.user),onClick:()=>{_(e.id,"user")}},{label:j.ZT.UserSelection.OptionGuardiansOfUser,selected:t.some(t=>t.entryID===e.id&&t.guardians),disabled:"Student"!==e.category,onClick:()=>{_(e.id,"guardians")}},{label:j.ZT.UserSelection.OptionChildrenOfUser,selected:t.some(t=>t.entryID===e.id&&t.children),disabled:"Guardian"!==e.category,onClick:()=>{_(e.id,"children")}}],[t,_]);return(0,u.jsx)(ee,{items:i,contentLeft:e=>(0,u.jsxs)(h.Z,{gap:10,align:"center",children:[(0,u.jsx)(b.Yt,{user:e,size:"sm"}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{style:{lineHeight:1.4},children:e.full_name}),(0,u.jsx)(g.Z,{color:"secondary",size:12,lineHeight:1.4,children:l(b.p5.getCategoryTranslation(e.category))})]})]}),getOptions:m,onChangeQuery:c})}),eg=a(57748),ey=a(25913),ex=a(63583),ef=a(10326),eb=a.n(ef);let ev=e=>{let{pagination:t,incrementPage:a,decrementPage:r,limit:n,offset:s}=(0,et.Z)(),{data:l}=eg.Ck.useListUserPreviewsQuery({query:{params:{in:{id:e}},limit:n,offset:s},include_archived_students:!1},{enabled:0!==e.length,placeholderData:0!==e.length?ex.Wk:void 0});return{users:l?.users??[],pagination:t,incrementPage:a,decrementPage:r}};var ek=e=>{let{userIDs:t,onRemoveUserID:a}=e,{t:r}=(0,j.T_)(),{users:n,pagination:s,incrementPage:l,decrementPage:i}=ev(t);return 0===t.length?(0,u.jsx)("p",{style:{textAlign:"center",margin:50},children:r(j.ZT.UserSelection.MakeSelection)}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:eb().listHeader,children:[(0,u.jsx)(ey.Z,{"aria-label":(0,S.Z)("F\xf6reg\xe5ende sida"),variant:"tertiary",onClick:i,disabled:1===s.page,children:(0,u.jsx)(Z.J,{name:"icon-chevron-left-24"})}),(0,u.jsxs)("p",{children:[s?.page," /"," ",Math.ceil(t.length/s.size)]}),(0,u.jsx)(ey.Z,{"aria-label":(0,S.Z)("F\xf6reg\xe5ende sida"),variant:"tertiary",onClick:l,disabled:s.page===Math.ceil(t.length/s.size),children:(0,u.jsx)(Z.J,{name:"icon-chevron-right-24"})})]}),(0,u.jsx)("div",{className:eb().listContent,children:n.map(e=>(0,u.jsxs)(Y,{children:[(0,u.jsxs)(h.Z,{gap:10,align:"center",children:[(0,u.jsx)(b.Yt,{user:e,size:"sm"}),(0,u.jsxs)("div",{children:[(0,u.jsxs)("p",{style:{lineHeight:1.4},children:[e.full_name," "]}),(0,u.jsx)(g.Z,{color:"secondary",size:12,lineHeight:1.4,children:r(b.p5.getCategoryTranslation(e.category))})]})]}),(0,u.jsx)(ey.Z,{"aria-label":r(j.ZT.Common.Remove),pill:!0,variant:"tertiary",onClick:()=>{a(e.id)},children:(0,u.jsx)(Z.J,{name:"icon-trash-can-24"})})]},e.id))})]})},eZ=a(79563),ej=a.n(eZ);(n=o||(o={})).Schools="schools",n.SchoolYears="school_years",n.Groups="groups",n.Users="users",(s=d||(d={})).selectItems="select-items",s.viewItems="view-items";let eC=(0,T.forwardRef)((e,t)=>{let{open:a,onClose:r,onSave:n,clearOnSave:s=!1,initialUserIDs:l}=e,{t:i}=(0,j.T_)(),d=(0,V.Z)(),[c,_]=(0,T.useState)("select-items"),[m,g]=(0,T.useState)(o.Schools),y=eh(m),x=er(m),f=el(m),b=eu(m),[v,k]=(0,T.useState)(l??[]),[C,w]=(0,T.useState)(!1),[D,N]=(0,T.useState)(!1);(0,T.useImperativeHandle)(t,()=>({clear:()=>{k([])}}));let I=0!==y.selections.length||0!==x.selections.length||0!==f.selections.length||0!==b.selections.length,A="select-items"===c||!d,W="view-items"===c||!d,O=(0,T.useCallback)(e=>{k(t=>Array.from(new Set(t.concat(e))))},[]),R=(0,T.useCallback)(e=>{k(t=>t.filter(t=>t!==e))},[]),H=e=>{N(!1),O(e),w(!0),setTimeout(()=>{w(!1)},15e3)},P=()=>{N(!0),m===o.Users?y.apply().then(H):m===o.Groups?x.apply().then(H):m===o.SchoolYears?f.apply().then(H):m===o.Schools&&b.apply().then(H)};return(0,u.jsxs)(B.ZP,{visible:a,onClose:r,height:"large",width:"medium",children:[(0,u.jsx)(B.ZP.Header,{children:(0,u.jsx)("h1",{children:i(j.ZT.UserSelection.SelectUsers)})}),(0,u.jsxs)("div",{className:ej().modalContent,children:[d&&(0,u.jsx)(h.Z,{style:{marginBlockStart:20,marginInline:10},children:(0,u.jsxs)($.Z,{variant:"neutral",activeTab:c,onChange:_,children:[(0,u.jsx)($.Z.Tab,{value:"select-items",label:i(j.ZT.Communication.ViewMode.SelectItems)}),(0,u.jsx)($.Z.Tab,{value:"view-items",label:i(j.ZT.Communication.ViewMode.ViewItems)})]})}),A?(0,u.jsx)("div",{className:ej().column,children:(0,u.jsxs)(U.Z,{children:[(0,u.jsx)("div",{className:ej().column__header,children:(0,u.jsxs)($.Z,{variant:"neutral",activeTab:m,onChange:g,children:[(0,u.jsx)($.Z.Tab,{value:o.Schools,label:i(j.ZT.UserSelection.TabSchools)}),(0,u.jsx)($.Z.Tab,{value:o.SchoolYears,label:i(j.ZT.UserSelection.TabSchoolYears)}),(0,u.jsx)($.Z.Tab,{value:o.Groups,label:i(j.ZT.UserSelection.TabGroupsAndClasses)}),(0,u.jsx)($.Z.Tab,{value:o.Users,label:i(j.ZT.UserSelection.TabUsers)})]})}),m===o.Users?(0,u.jsx)(ep,{selections:y.selections,setSelections:y.setSelections}):m===o.Groups?(0,u.jsx)(en,{selections:x.selections,setSelections:x.setSelections}):m===o.SchoolYears?(0,u.jsx)(ei,{selections:f.selections,setSelections:f.setSelections}):m===o.Schools?(0,u.jsx)(e_,{selections:b.selections,setSelections:b.setSelections}):null]})}):null,W?(0,u.jsxs)("div",{className:ej().column,children:[(0,u.jsxs)(U.Z,{children:[(0,u.jsxs)("div",{className:ej().column__header,style:{borderTop:d?"1px solid var(--color-border-neutral-container-light) ":"none"},children:[(0,u.jsx)("h3",{children:i(j.ZT.UserSelection.SelectedUsers({amount:String(v.length)}))}),v.length>0?(0,u.jsx)(p.Z,{variant:"secondary",size:"sm",startIcon:(0,u.jsx)(Z.J,{name:"icon-trash-can-16"}),onClick:()=>{k([])},children:i(j.ZT.UserSelection.ClearSelection)}):null]}),(0,u.jsx)(ek,{userIDs:v,onRemoveUserID:R})]}),I?(0,u.jsxs)(E.Z,{className:ej().overlay,onClick:P,children:[D?(0,u.jsx)(z.Z,{size:47}):(0,u.jsx)(F.Z,{variant:"solid",fontAwesomeIcon:"circle-plus"}),(0,u.jsx)("h3",{children:i(j.ZT.UserSelection.AddSelection)})]}):null]}):null,d&&I&&!W?(0,u.jsx)(h.Z,{center:!0,style:{paddingInline:20,paddingBlock:10},children:(0,u.jsx)(p.Z,{variant:"primary",size:"md",startIcon:(0,u.jsx)(Z.J,{name:"icon-plus-24"}),fullWidth:!0,loading:D,onClick:P,children:i(j.ZT.UserSelection.AddSelection)})}):null,d&&!W&&C&&(0,u.jsx)(h.Z,{center:!0,style:{paddingInline:20,paddingBlock:10},children:(0,u.jsx)(p.Z,{variant:"primary",size:"md",fullWidth:!0,endIcon:(0,u.jsx)(Z.J,{name:"icon-chevron-right-24"}),onClick:()=>{_("view-items")},children:(0,S.Z)("G\xe5 till valda anv\xe4ndare")})})]}),(0,u.jsxs)(B.ZP.Footer,{children:[(0,u.jsx)("div",{}),(0,u.jsxs)("div",{children:[(0,u.jsx)(p.Z,{variant:"secondary",size:"md",onClick:r,children:i(j.ZT.Common.Cancel)}),(0,u.jsx)(p.Z,{variant:"primary",size:"md",onClick:()=>{n(v),s&&k([]),r()},disabled:!v||0===v.length,children:i(j.ZT.Common.Save)})]})]})]})});(l=c||(c={})).NoContent="NoContent",l.NoRecipients="NoRecipients",l.Unknown="Unknown,";var eS=e=>{let{userPath:t,onSubmit:a,variant:r,message:n,loading:s=!1}=e,{t:l}=(0,j.T_)(),o=(0,k.Z)(),d=(0,T.useRef)(null),c=(0,T.useRef)(null),{selectedUserIDs:w,setSelectedUserIDs:D}=W();(0,T.useEffect)(()=>{D([])},[D]);let{organization:I}=(0,f.kV)(),{currentUser:A}=(0,b.xJ)(),[O,F]=(0,T.useState)(""),[E,B]=(0,T.useState)([]),[R,H]=(0,T.useState)(w??[]),[P,M]=(0,T.useState)(!1),[$,U]=(0,T.useState)(!0),[z,V]=(0,T.useState)(!1),[G,J]=(0,T.useState)(A?.email_address1||""),q=N({userIDs:z?R:[],channel:i.Email}),X=async()=>{let e=d.current?.getContent();if(!e?.text){o.new("NoContent");return}if("create"===r&&0===R.length){o.new("NoRecipients");return}o.clear();try{await a({title:O,richTextContent:e,files:E,recipientUserIDs:R,sendAsEmail:z,postToPlatform:$,replyTo:G}),F(""),B([]),J(""),H([]),U(!0),V(!1),d.current?.clearContent(),c.current?.clear()}catch{o.new("Unknown,")}};return(0,T.useEffect)(()=>{n?.feed&&(F(n.feed.title),B(n.feed.files??[]),V(n.feed.sent_as_email))},[n]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(eC,{open:P,onClose:()=>{M(!1)},initialUserIDs:w,onSave:H,ref:c}),(0,u.jsxs)(_.Z,{onSubmit:X,children:[(0,u.jsxs)(_.Z.Column,{children:[(0,u.jsx)(m.Z,{label:l(j.ZT.Common.Title),value:O,onChangeValue:F,required:!0,autoFocus:!0}),(0,u.jsx)(x.Z,{label:l(j.ZT.Common.Description),description:l(j.ZT.Communication.DescriptionPlaceholder),showAsterix:!0,error:"NoContent"===o.text,onSubmit:X,ref:d,defaultValue:n?.feed?.rich_text_content.content}),(0,u.jsxs)("div",{children:[(0,u.jsx)("p",{className:C.X.Label_SM_Semibold,style:{marginBlockEnd:5},children:l(j.ZT.Common.Files)}),(0,u.jsx)(v.rE,{onAddFiles:e=>{B(t=>t.concat(e))},maxFileSize:185e5,maxSizeTotal:z,onRemoveFile:e=>{B(t=>t.filter(t=>t!==e))},files:E})]}),"create"===r?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m.Z,{label:(0,S.Z)("Svara till"),description:(0,S.Z)(`Om ingen e-postadress \xe4r ifylld kommer svaren g\xe5 till ${I?.email_address??"noreply@meitner.se"}`),value:G,type:"email",onChangeValue:J}),(0,u.jsxs)(h.Z,{align:"center",gap:10,children:[(0,u.jsx)(p.Z,{variant:"secondary",size:"md",onClick:()=>{M(!0)},children:l(j.ZT.UserSelection.SelectUsers)}),(0,u.jsx)("p",{children:l(j.ZT.Choose.RecipientsChosen({amount:String(R.length)}))})]}),"NoRecipients"===o.text?(0,u.jsx)(g.Z,{color:"danger",weight:"bold",children:(0,S.Z)("Inga mottagare valda!")}):null,(0,u.jsx)(L,{invalidUsers:q,userPath:t}),(0,u.jsxs)(h.Z,{direction:"column",gap:5,children:[(0,u.jsx)("p",{className:C.X.Label_SM_Semibold,children:(0,S.Z)("Skicka som")}),(0,u.jsx)(y.Z,{label:(0,S.Z)("E-post"),checked:z,onChange:()=>{V(e=>!e)}}),(0,u.jsx)(y.Z,{label:(0,S.Z)("Information i Meitner"),checked:$,onChange:()=>{U(e=>!e)}})]})]}):null]}),(0,u.jsx)(p.Z,{variant:"primary",size:"md",loading:s,type:"submit",startIcon:(0,u.jsx)(Z.J,{name:"icon-floppy-disk-16"}),style:{marginBlockStart:20},children:l("update"===r?j.ZT.Common.Save:j.ZT.Common.Publish)}),"update"===r&&z?(0,u.jsxs)("p",{style:{marginBlockStart:10,display:"flex",alignItems:"center",gap:5},children:[(0,u.jsx)(Z.J,{name:"icon-info-circle-fill-16"}),(0,S.Z)("Tidigare skickat e-post-utskick kommer ej uppdateras.")]}):null]})]})}},76648:function(e,t,a){"use strict";a.d(t,{_W:function(){return A},k4:function(){return c},Kt:function(){return n},w1:function(){return d}});var r=a(74934),n=(0,a(66641).Ue)()(e=>({courses:{},addCourses:t=>{e(e=>({courses:{...e.courses,...r.Z.convertToRecord(t,"id")}}))},deleteCourse:t=>{e(e=>{let a={...e.courses};return delete a[t],{courses:a}})}})),s=a(24297),l=a(66006);let i=new s.NF,o=async e=>(await i.listByIDs({ids:e})).courses;var d=e=>{let{courses:t,addCourses:a}=n();return(0,l.Z)({ids:e,data:t,fetchData:o,addData:e=>{a(e)}})},c=e=>d(e?[e]:[])[e??""],u=a(27573),_=a(31493),m=a(45531),h=a.n(m),p=a(81459),g=a.n(p),y=e=>{let{value:t,children:a,elementaryCourse:r,className:n,selected:s}=e,{ref:l,getItemProps:i,handleSelect:o,isActive:d}=(0,_.Z)();return(0,u.jsx)("div",{ref:l,...i({onClick:()=>{o(t)}}),className:h()(g().comboboxPopupItem,n,{[g()["comboboxPopupItem--active"]]:d,[g()["comboboxPopupItem--selected"]]:s,[g().comboboxPopupItem__elementaryCourse]:r,[g()["comboboxPopupItem__elementaryCourse--active"]]:d&&r,[g()["comboboxPopupItem__elementaryCourse--selected"]]:s&&r,[g()["comboboxPopupItem__elementaryCourse--hidden"]]:!r}),children:"string"==typeof a?(0,u.jsx)("p",{children:a}):a})},x=a(60960),f=a(8230),b=a(86660),v=a(21009),k=a(99210),Z=a(92575),j=a(35725),C=a(26821),S=a(2560),T=a(93502),w=a.n(T);let D=new s.NF,N=e=>{let t=(0,C.NL)(),a=(0,S.a)({queryKey:["courses",e],queryFn:async()=>D.listByIDs({ids:e}),enabled:0!==e.length,staleTime:1/0}),r=a.data?.courses??[];return{courses:r,prefetchWithCourse:a=>{t.setQueryData(["courses",[...e,a.id]],{courses:[...r,a]})},prefetchWithoutCourse:a=>{t.setQueryData(["courses",e.filter(e=>e!==a)],{courses:r.filter(e=>e.id!==a)})}}},I=()=>{let{debouncedSearchValue:e,setSearchValue:t}=(0,k.Z)(),a=(0,S.a)({queryKey:["courses",e],queryFn:async()=>D.list({title:e,pagination:{page:1,size:10}})});return{courses:a.data?.courses??[],setSearchValue:t}};var A=e=>{let{value:t,onChange:a,error:r,disabled:n,portal:s=!1}=e,{t:l}=(0,Z.T_)(),i=(0,v.zP)(),o=i?.id,{hasUseElementaryCourses:d}=(0,v.wh)(),{courses:c,prefetchWithCourse:_,prefetchWithoutCourse:m}=N(t),{courses:h,setSearchValue:p}=I();return(0,u.jsxs)("div",{children:[(0,u.jsx)(x.Z,{label:l(Z.ZT.Common.Courses),portal:s,disabled:n,onSearch:p,onSelect:e=>{if(t.includes(e))a(t.filter(t=>t!==e)),m(e);else{a([...t,e]);let r=h.find(t=>t.id===e);r&&_(r)}},error:r,children:h.map(e=>{let a=d&&e.school_type_id!==o;return(0,u.jsx)(y,{value:e.id,elementaryCourse:a,selected:t.includes(e.id),children:(0,u.jsxs)("div",{className:w().comboboxCourseItem,children:[(0,u.jsx)(f.Z,{checked:t.includes(e.id),readOnly:!0}),(0,u.jsx)("p",{children:e.title}),(0,u.jsx)(b.Z,{pill:!0,variant:"outlined",size:"md",children:(0,j.Z)("Grundskole\xe4mne")})]})},e.id)})}),0===c.length?null:(0,u.jsx)("div",{className:w().chips,children:c.map(e=>(0,u.jsx)(b.Z,{variant:"outlined",size:"md",onDelete:()=>{a(t.filter(t=>t!==e.id)),m(e.id)},children:e.title},e.id))})]})}},70537:function(e,t,a){"use strict";a.d(t,{dl:function(){return x},Tw:function(){return r},n5:function(){return y},l_:function(){return T},iw:function(){return k},G7:function(){return Z},Am:function(){return h},Et:function(){return u},DD:function(){return b},md:function(){return o}});var r=["A","B","C","D","E","F","-"],n=a(24297),s=a(2560);let l=new n.Mt,i=async()=>(await l.typeList({filter:{filter:null,order_by:[]}})).task_types,o=()=>{let{data:e}=(0,s.a)({queryKey:["taskTypes"],queryFn:async()=>i(),staleTime:1/0});return{taskTypes:e??[]}},d=async(e,t,a)=>({...(await l.get({workspace_id:e,id:t,user_id:a})).task,status:void 0}),c=async e=>({...(await l.getArchivedAsTeacher({id:e})).task,status:void 0}),u=e=>{let{workspaceID:t,taskID:a,userID:r,enabled:n}=e,l=(0,s.a)({queryKey:["task",t,a,r],queryFn:async()=>t?d(t,a,r):c(a),enabled:n,staleTime:1/0});return{task:l.data,isLoading:l.isPending,refetch:l.refetch}},_=async(e,t,a)=>{let r=l.getPublished({workspace_id:e,id:t,user_id:a}),n=l.listTaskStatusesByUser({user_id:a,task_ids:[t]}),[s,i]=await Promise.all([r,n]);return{...s.task,status:i?.statuses.find(e=>e.task_id===t)?.status}},m=async(e,t)=>{let a=l.getArchivedAsStudent({id:e}),r=l.listTaskStatusesByUser({user_id:t,task_ids:[e]}),[n,s]=await Promise.all([a,r]);return{...n.task,status:s?.statuses.find(t=>t.task_id===e)?.status}},h=e=>{let{workspaceID:t,taskID:a,userID:r,enabled:n}=e,l=(0,s.a)({queryKey:["task",t,a,r],queryFn:async()=>t?_(t,a,r):m(a,r),enabled:n});return{task:l.data,isLoading:l.isPending,refetch:l.refetch}};var p=a(66641),g=a(72791);let y="task-storage",x=["AssessmentPublished","SubmissionPublished","AssessmentPending","SubmissionNotPublished","AssessmentNeedCompletion","SubmissionOptional","SubmissionNone"],f=["SubmissionNotPublished","AssessmentNeedCompletion"],b=(0,p.Ue)()((0,g.tJ)(e=>({searchTerm:"",selectedStatuses:f,selectedStatusesToBeApplied:f,filterOnOldTasks:!1,setSearchTerm:t=>{e(()=>({searchTerm:t}))},setSelectedStatuses:t=>{e(()=>({selectedStatuses:t}))},setSelectedStatusesToBeApplied:t=>{e(()=>({selectedStatusesToBeApplied:t}))},setFilterOnOldTasks:t=>{e(()=>({filterOnOldTasks:t}))}}),{name:y,storage:(0,g.FL)(()=>localStorage)}));var v=a(13094);let k=e=>e?.sort((e,t)=>{let a=r.indexOf(e.grade),n=r.indexOf(t.grade);return a&&n?a-n:0}),Z=(e,t)=>Array.from(e??[])?.map(e=>{let a=e.student_ids.map(e=>t.find(t=>e===t.id));return{...e,user_id:a?.[0]?.id,last_name:a[0]?.last_name??""}}).sort((e,t)=>e.user_id&&t.user_id?e.user_id.localeCompare(t.user_id):0).sort((e,t)=>v.Z(e.last_name,t.last_name));var j=a(12157),C=a(92575);class S{static #e=this.getSubmissionForUserID=(e,t)=>e?.submissions?.find(e=>e.student_ids.includes(t));static #t=this.canStudentUpdateSubmission=(e,t)=>{if(null===e.workspace_id)return!1;let a=S.getSubmissionForUserID(e,t);return!(!a||a?.published||a?.assessment?.id&&!a?.assessment?.need_completion)};static #a=this.canStudentUnpublishSubmission=(e,t)=>{let a=S.getSubmissionForUserID(e,t);return!!a?.published&&(!(a.assessment.publish_at>a.last_published)||!!a.assessment.need_completion)};static #r=this.canStudentViewAssessment=(e,t)=>{let a=S.getSubmissionForUserID(e,t);return!!(a&&(a?.assessment?.id||a?.published))};static #n=this.doesSubmissionHavePublishedAssessment=(e,t)=>{let a=S.getSubmissionForUserID(e,t);return!(!a?.assessment?.id||!a?.assessment?.publish_at||a.published&&a?.last_published>a?.assessment?.publish_at)};static #s=this.doesSubmissionNeedCompletion=(e,t)=>{let a=S.getSubmissionForUserID(e,t);return!!(a?.assessment?.id&&a?.assessment?.need_completion)&&!(a.last_published>a.assessment.publish_at)};static #l=this.getTaskStatusTranslation=e=>{switch(e){case"SubmissionNone":return C.ZT.Submission.SubmissionNone;case"SubmissionPublished":return C.ZT.Submission.Submitted;case"AssessmentPending":return C.ZT.Submission.Waiting;case"SubmissionOptional":return C.ZT.Submission.Optional;case"SubmissionNotPublished":return C.ZT.Submission.NotSubmitted;case"AssessmentPublished":return C.ZT.Assessment.Assessed;case"AssessmentNeedCompletion":return C.ZT.Assessment.NeedsCompletion}};static #i=this.getTaskStatusType=e=>{switch(e){case"AssessmentPublished":return{translation:C.ZT.Assessment.Assessed,iconName:"icon-checkmark-16",type:"success"};case"SubmissionPublished":return{translation:C.ZT.Submission.Submitted,iconName:"icon-checkmark-16",type:"success"};case"AssessmentPending":return{translation:C.ZT.Submission.Waiting,iconName:"icon-clock-circle-outline-16",type:"neutral"};case"SubmissionNotPublished":return{translation:C.ZT.Submission.NotSubmitted,iconName:"icon-exclamation-triangle-outline-16",type:"error"};case"SubmissionOptional":return{translation:C.ZT.Submission.Optional,type:"neutral-lightest"};case"AssessmentNeedCompletion":return{translation:C.ZT.Assessment.NeedsCompletion,iconName:"icon-exclamation-circle-outline-16",type:"warning"};default:return}};static #o=this.getTaskStatus=(e,t)=>{if("AssessmentPublished"===e)return{text:C.ZT.Assessment.Assessed,color:"var(--old-success-color-light)",borderColor:"var(--old-success-color)"};if("SubmissionPublished"===e)return{text:C.ZT.Submission.Submitted,color:"var(--old-success-color-light)",borderColor:"var(--old-success-color)"};if("AssessmentPending"===e)return{text:C.ZT.Submission.Waiting,color:"#aeaeae4D",borderColor:"#aeaeae"};if("SubmissionNotPublished"===e){let e=j.Z.getDiffDays(new Date,t);return e<=1||j.Z.before(t)?{text:C.ZT.Submission.NotSubmitted,color:"var(--old-danger-color-light)",borderColor:"var(--old-danger-color)"}:e<=6?{text:C.ZT.Submission.NotSubmitted,color:"var(--old-warning-color-light)",borderColor:"var(--old-warning-color)"}:{text:C.ZT.Submission.NotSubmitted,color:"#aeaeae4D",borderColor:"#aeaeae"}}return"SubmissionOptional"===e?{text:C.ZT.Submission.Optional,color:"#aeaeae4D",borderColor:"#aeaeae"}:"AssessmentNeedCompletion"===e?{text:C.ZT.Assessment.NeedsCompletion,color:"var(--old-warning-color-light)",borderColor:"var(--old-warning-color)"}:void 0};static #d=this.getAssessStatus=e=>{let t=e?.submissions?.length??0,a=e?.submissions?.filter(e=>e?.assessment?.id&&e?.assessment?.publish_at>0)?.length??0;return t>0?a>0?t===a?{text:C.ZT.Assessment.AllAssessed,color:"var(--old-success-color-light)",borderColor:"var(--old-success-color)"}:{text:C.ZT.Assessment.SomeAssessed({count_1:String(a),count_2:String(t)}),color:"var(--old-warning-color-light)",borderColor:"var(--old-warning-color)"}:{text:C.ZT.Assessment.NoAssessed,color:"var(--old-danger-color-light)",borderColor:"var(--old-danger-color)"}:{text:C.ZT.Submission.NoSubmissions,color:"#aeaeae4D",borderColor:"#aeaeae"}};static #c=this.submissionsToSubmissionStudentIDs=e=>e.map(e=>({submission_id:e.id,user_ids:e.student_ids}));static #u=this.isTaskArchived=e=>null===e.workspace_id}var T=S},859:function(e,t,a){"use strict";var r=a(7653);let n=e=>e.reduce((e,t,a)=>({...e,[t.id]:{index:a,desc:t.desc}}),{}),s=e=>e.map(e=>({field:e.id,order:e.desc?"desc":"asc"}));t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,a]=(0,r.useState)(e),l=(0,r.useMemo)(()=>n(t),[t]),i=(0,r.useMemo)(()=>s(t),[t]);return{tableOrder:t,order:l,legacyOrder:i,setTableOrder:a}}},19532:function(e,t,a){"use strict";var r=a(7653);t.Z=e=>{let[t,a]=(0,r.useState)(e),n=(0,r.useRef)(e);return(0,r.useEffect)(()=>{n.current=t},[t]),[t,a,n]}},69165:function(e,t,a){"use strict";var r=a(7653);t.Z=e=>{let[t,a]=(0,r.useState)(null),n=(0,r.useRef)(null),s=(0,r.useCallback)(e=>{a(e)},[]);(0,r.useEffect)(()=>{n?.current&&t&&n.current.unobserve(t);let a=new ResizeObserver(t=>{let a=t[0];a&&e(a)});return n.current=a,l(),()=>{n?.current&&t&&n.current.unobserve(t)}},[t]);let l=()=>{t&&t&&n.current&&n.current.observe(t)};return s}},98272:function(e,t,a){"use strict";a.d(t,{Z:function(){return S}});var r=a(27573),n=a(42274),s=a(25913),l=a(69702),i=a(59373),o=a(66221),d=a(69203),c=a(66242),u=a(79162),_=a(92575),m=a(35725),h=a(7653),p=a(41608),g=a(3161),y=a(91138);let x=e=>{let{action:t}=e,[a,s]=(0,h.useState)(!1);return t.popupElement?(0,r.jsxs)(p.ZP.Root,{placement:"top",open:a,onChangeOpen:s,dismissOptions:{enabled:t.closePopupElementOnClickOutside},middleware:["shift","autoUpdate","offset"],offsetOptions:{mainAxis:20},...(0,g.js)(),children:[(0,r.jsx)(p.ZP.Target,{children:(0,r.jsx)(n.Z,{title:t.tooltip??"",disabled:void 0===t.tooltip||0===t.tooltip.length,children:(0,r.jsx)(f,{action:t,loading:t.loading})})}),(0,r.jsx)(p.ZP.Element,{children:"function"==typeof t.popupElement?t.popupElement(a,()=>{s(!1)}):t.popupElement})]}):(0,r.jsx)(n.Z,{title:t.tooltip??"",disabled:void 0===t.tooltip||0===t.tooltip.length,children:(0,r.jsx)(f,{action:t,onClick:t.callback})})},f=(0,h.forwardRef)((e,t)=>{let{action:a,onClick:n}=e;return a.hidden?null:(0,r.jsx)(y.Z,{variant:"secondary",size:"md",ref:t,onClick:n,loading:a.loading,startIcon:a.icon,destructive:a.destructive,disabled:a.disabled,children:a.label},a.label)});var b=a(90441),v=a(26181),k=a(96669),Z=e=>{let{minimized:t,children:a}=e;return(0,d.Z)()?(0,r.jsx)(b.Z,{open:!t,children:(0,r.jsx)(v.Z,{templateColumns:"repeat(1, 1fr)",gap:10,style:{inlineSize:"100%",padding:20},children:a})}):(0,r.jsx)(k.Z,{gap:10,align:"center",wrap:"wrap",justify:"center",style:{flex:1},children:a})},j=a(96248),C=a.n(j),S=e=>{let{actions:t,selectedCount:a,onClearSelected:p,selectedCountText:g}=e,{t:y}=(0,_.T_)(),f=(0,d.Z)(),[b,v]=(0,h.useState)(f);(0,c.Z)("keydown",e=>{"Escape"===e.key&&p&&a&&p()});let k=g??`${a} ${(0,m.Z)("valda")}`,j=()=>p?(0,r.jsx)(n.Z,{title:y(_.ZT.Table.EmptyFields),children:(0,r.jsx)(s.Z,{"aria-label":y(_.ZT.Table.EmptyFields),variant:"tertiary",onClick:p,children:(0,r.jsx)(u.J,{name:"icon-xmark-24"})})}):null,S=a>0;return(0,h.useEffect)(()=>{S||v(f)},[S,f]),(0,r.jsx)(r.Fragment,{children:S?(0,r.jsx)("div",{className:C().batchActionBarWrapper,children:(0,r.jsxs)("div",{className:C().batchActionBarContainer,children:[(0,r.jsxs)(l.Z,{className:C().batchActionBarTitleWrapper,onClick:()=>{f&&v(!b)},children:[f&&(0,r.jsx)(j,{}),(0,r.jsx)(i.Z,{color:"theme",style:{paddingInlineEnd:f?0:10},weight:500,children:k}),f&&(0,r.jsx)(s.Z,{"aria-label":b?(0,m.Z)("Expandera"):y(_.ZT.Common.Minimize),variant:"tertiary",onClick:()=>{v(!b)},children:(0,r.jsx)(o.Z,{variant:"regular",fontAwesomeIcon:"chevron-down",rotate:b?0:180})})]}),(0,r.jsxs)(Z,{minimized:b,children:[t.map(e=>(0,r.jsx)(x,{action:e},e.label)),!f&&(0,r.jsx)(j,{})]})]})}):null})}},4192:function(e,t,a){"use strict";var r=a(27573),n=a(42274),s=a(69702),l=a(79162),i=a(92575),o=a(45531),d=a.n(o),c=a(32473),u=a.n(c);t.Z=e=>{let{onDecrement:t,onIncrement:a,onToday:o,decrementTooltip:c,incrementTooltip:_,todayLabel:m,decrementTo:h,relativeTo:p,incrementTo:g,todayTo:y}=e,{t:x}=(0,i.T_)(),f=m??x(i.ZT.Common.Today);return(0,r.jsxs)("div",{className:u().dateButtonGroup,children:[(0,r.jsx)(n.Z,{title:c,children:(0,r.jsx)(s.Z,{className:d()(u().dateButtonGroup__button,u()["dateButtonGroup__button--icon-only"]),onClick:t,to:h,relative:p,children:(0,r.jsx)(l.J,{name:"icon-chevron-left-24"})})}),(0,r.jsx)(s.Z,{className:u().dateButtonGroup__button,onClick:o,to:y,relative:p,children:f}),(0,r.jsx)(n.Z,{title:_,children:(0,r.jsx)(s.Z,{className:d()(u().dateButtonGroup__button,u()["dateButtonGroup__button--icon-only"]),onClick:a,to:g,relative:p,children:(0,r.jsx)(l.J,{name:"icon-chevron-right-24"})})})]})}},84287:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var r=a(27573),n=a(96669),s=a(69203),l=a(92575),i=a(65880),o=a(7653),d={src:"/_next/static/media/empty_1.57eef553.svg",height:1245,width:998,blurWidth:0,blurHeight:0},c={src:"/_next/static/media/empty_2.ea5df759.svg",height:1080,width:884,blurWidth:0,blurHeight:0},u={src:"/_next/static/media/empty_3.b46108d1.svg",height:1652,width:707,blurWidth:0,blurHeight:0};let _=(e,t)=>Math.floor(Math.random()*(t-e+1)+e);var m=e=>{let{t}=(0,l.T_)(),[a]=(0,o.useState)(_(1,3)),m=e.imageIndex?e.imageIndex:a,h=(0,s.Z)(),p=(0,o.useMemo)(()=>m?1===m?d:2===m?c:u:void 0,[m]);return p?(0,r.jsxs)(n.Z,{direction:"column",center:!0,style:{inlineSize:"100%",...e.containerStyle},children:[(0,r.jsx)(i.default,{src:p,alt:"Girl shrugging",height:h?150:250,style:e.style}),e.children?e.children:e.hideText?null:(0,r.jsx)("p",{style:{fontWeight:500,paddingBlockStart:16,...e.textStyle},children:e.text?e.text:t(l.ZT.Common.EmptyList)})]}):null}},98823:function(e,t,a){"use strict";var r=a(27573),n=a(45531),s=a.n(n),l=a(75466),i=a.n(l);t.Z=e=>(0,r.jsx)("label",{...e,className:s()(i().label,e.className)})},2420:function(e,t,a){"use strict";a.d(t,{Z:function(){return k}});var r=a(27573),n=a(49660),s=a(96669),l=a(79162),i=a(92575),o=a(84287),d=a(65680),c=a(69702),u=a(45531),_=a.n(u),m=a(8420),h=a.n(m),p=e=>{let{item:t,contentLeft:a,contentRight:n,clickable:s=!1,onClick:l,to:i,targetRouter:o}=e,d=s||!!i||!!l;return(0,r.jsxs)("li",{className:_()(h().listItem,{[h()["listItem--clickable"]]:d}),children:[(0,r.jsx)(c.Z,{options:{type:d?i?"link":"element":null},to:"function"==typeof i?i(t):i,onClick:()=>{l&&l(t)},className:h().listItem__section,targetRouter:o,children:a(t)}),n&&(0,r.jsx)("div",{className:h().listItem__section,children:n(t)})]})},g=a(94730),y=a(79656),x=a.n(y),f=()=>(0,r.jsx)("div",{className:x().loadingListItem,children:(0,r.jsx)(g.Z,{height:14,style:{marginBottom:0}})}),b=a(43695),v=a.n(b),k=e=>{let{data:t,contentLeft:a,contentRight:c,loading:u,clickable:_,onClick:m,to:h,loadingRows:g=25,pagination:y,onChangePage:x,onChangeQuery:b,renderEmpty:k,showEmpty:Z=!0,listContainerStyle:j,query:C,useModalStyle:S=!1,paginationResponse:T,inputHeaderStyle:w,targetRouter:D}=e,{t:N}=(0,i.T_)();return(0,r.jsxs)("div",{style:S?{minHeight:"100%",display:"flex",flexDirection:"column"}:void 0,children:[b?(0,r.jsx)("div",{className:v().inputHeader,style:w,children:(0,r.jsx)(n.Z,{"aria-label":N(i.ZT.Common.Search),variant:"filled",startDecorator:(0,r.jsx)(l.J,{name:"icon-magnifying-glass-16"}),value:C,onChangeValue:e=>{b&&b(e),x&&x(1)},placeholder:N(i.ZT.Common.Search)})}):null,(0,r.jsxs)("div",{style:{height:"100%",flex:S?1:"unset",display:"flex",flexDirection:"column",...j},children:[u?Array(g).fill(null).map((e,t)=>(0,r.jsx)(f,{},t)):null,t&&t.length>0?(0,r.jsx)("ul",{children:t.map((e,t)=>(0,r.jsx)(p,{item:e,contentLeft:a,contentRight:c,clickable:_,onClick:m,to:h,targetRouter:D},t))}):null,!u&&t&&0===t.length?(0,r.jsxs)(r.Fragment,{children:[Z&&(0,r.jsx)(s.Z,{direction:"column",center:!0,className:v().emptyWrapper,children:(0,r.jsx)(o.Z,{})}),k]}):null]}),x&&y?(0,r.jsx)("div",{className:v().footer,children:(0,r.jsx)(d.Z,{pagination:y,paginationResponse:T,onChangePage:x,data:t})}):null]})}},80450:function(e,t,a){"use strict";var r=a(27573),n=a(76863);t.Z=e=>{let{useMinimumTime:t=!0}=e;return(0,r.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",position:"absolute",alignItems:"center",justifyContent:"center",...e.style},className:e.className,children:(0,r.jsx)(n.Z,{useMinimumTime:t})})}},65680:function(e,t,a){"use strict";var r=a(27573),n=a(96669),s=a(49660),l=a(79367),i=a(25913),o=a(79162),d=a(35725),c=a(7653);t.Z=e=>{let{onChangePage:t,pagination:a,paginationResponse:u,data:_}=e,[m,h]=(0,c.useState)(a?.page??1),p=()=>{t&&a&&(t(a?.page+1),h(Number(a?.page+1)))},g=()=>{t&&a&&(t(a?.page-1),h(Number(a?.page-1)))};(0,c.useEffect)(()=>{a?.page&&h(a?.page)},[a?.page]);let y=!!a&&(u?u.total_count>a.page*a.size:_?.length===a.size);return t&&a?u?(0,r.jsxs)(n.Z,{align:"center",gap:5,children:[(0,r.jsxs)(n.Z,{gap:6,align:"center",children:[(0,r.jsx)(s.Z,{"aria-label":(0,d.Z)("Sida"),value:String(m),onChangeValue:e=>{h(Number(e)),e?.length>0&&t(0===Number(e)?1:Number(e))},size:"sm",variant:"outlined",disabled:u?.total_count<=a?.size}),(0,r.jsxs)("p",{style:{fontSize:15},children:["/"," ",Math.ceil(u?.total_count/a?.size)," "]})]}),(0,r.jsx)(l.Z,{orientation:"vertical",size:30,style:{marginBlock:0,marginInlineStart:15,marginInlineEnd:5}}),(0,r.jsxs)("p",{style:{paddingInlineStart:8},children:[a?.size*a?.page-a?.size+1," ","-",a?.page===1?a?.page*a?.size:a?.page*a?.size+1," ","(",u?.total_count,")"]}),(0,r.jsx)(i.Z,{"aria-label":(0,d.Z)("F\xf6reg\xe5ende sida"),variant:"tertiary",onClick:g,disabled:a?.page===1,children:(0,r.jsx)(o.J,{name:"icon-chevron-left-24"})}),(0,r.jsx)(i.Z,{"aria-label":(0,d.Z)("F\xf6reg\xe5ende sida"),variant:"tertiary",onClick:p,disabled:!y,children:(0,r.jsx)(o.J,{name:"icon-chevron-right-24"})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{children:[(a?.page-1)*a?.size+1," - ",_?.length>0?(a?.page-1)*a?.size+_?.length:a?.page*a?.size]}),(0,r.jsx)(i.Z,{"aria-label":(0,d.Z)("F\xf6reg\xe5ende sida"),variant:"tertiary",onClick:g,disabled:a?.page===1,children:(0,r.jsx)(o.J,{name:"icon-chevron-left-24"})}),(0,r.jsx)(i.Z,{"aria-label":(0,d.Z)("F\xf6reg\xe5ende sida"),variant:"tertiary",onClick:p,disabled:!y,children:(0,r.jsx)(o.J,{name:"icon-chevron-right-24"})})]}):null}},77232:function(e,t,a){"use strict";a.d(t,{J:function(){return l}});var r=a(27573),n=a(3458),s=a(42291);let l=e=>{let{elements:t,title:a,mode:l="portrait"}=e,i=window.open("","_blank","width=800px,height=600px,scrollbars=no,menubar=no,toolbar=no,location=no,status=no,titlebar=no");if(!i)return;let o=document.createElement("div"),d=(0,s.createRoot)(o);(0,n.flushSync)(()=>{d.render((0,r.jsx)(r.Fragment,{children:t}))});let c=`
    <style>
    @page {
        size: A4 ${l};
        margin: 10mm;
        font-family: Manrope, Helvetica, Arial, sans-serif;
    }
    </style>
    `,u=`
        <!DOCTYPE html>
        <html>
            ${c}
            <body>
            ${o.innerHTML}
            </body>
        </html>
    `;i.document.open(),i.document.write(u),i.document.title=a,i.print(),i.close()}},15709:function(e,t,a){"use strict";a.d(t,{Y:function(){return s}});var r,n,s,l=a(36448),i=a(38556),o=a(40785);(r=s||(s={})).initialize=e=>{o.Z.isProduction&&l.S1(i.D.AMPLITUDE_API_KEY,e,{serverZone:"EU",defaultTracking:{sessions:!0,pageViews:!0,formInteractions:!0,fileDownloads:!0},serverUrl:"https://amplitude.meitner.se"})},r.trackEvent=(e,t)=>{o.Z.isProduction&&l.j(e,t)},(n=r.Event||(r.Event={})).StudentClassChanged="ADMIN: student class changed",n.AssignmentCreated="LMS: assignment created",n.ChatCreated="LMS: chat created",n.NoteCreated="LMS: note created",n.MailSent="LMS: mail sent",n.PlatformPostCreated="LMS: platform post created",n.AbsenceCreatedEmployee="LMS: absence created employee",n.AbsenceCreatedGuardian="LMS: absence created guardian",n.AbsenceCreatedStudent="LMS: absence created student",n.OnboardingComplete="LMS: onboarding complete",n.SpecificCaretimeChanged="LMS: specific caretime changed",n.OrdinaryCaretimeChanged="LMS: ordinary caretime changed",n.SchedulePrinted="LMS: schedule printed",n.ScheduleDownloaded="LMS: schedule downloaded",n.FormSubmitted="LMS: form submitted",n.Error="error",n.Click="click",n.FormData="form data",n.ClicksOnTaskFromHub="LMS: task list, clicks on task from hub",n.ClicksOnTaskFromView="LMS: task list, clicks on task from view",n.ShowAll="LMS: clicks on Show All button",n.CriterionSavedResultFromOverview="LMS: criterion, saved result from overview",n.CriterionSavedResultFromStudentView="LMS: criterion, saved result from student view"},35555:function(e,t){"use strict";t.Z=e=>{navigator.clipboard.writeText(e)}},27968:function(e,t,a){"use strict";let r=e=>Math.round(10*e)/10;t.Z=e=>`${r(100*e)}%`},23507:function(e){e.exports={barIndicator:"style_barIndicator__m8aYM","barIndicator--vertical":"style_barIndicator--vertical__nbXY9","barIndicator--horizontal":"style_barIndicator--horizontal__3_5i4","barIndicator--size-16":"style_barIndicator--size-16__RuIeW","barIndicator--size-full":"style_barIndicator--size-full__aSTaX","barIndicator--default":"style_barIndicator--default__ZazAv","barIndicator--success":"style_barIndicator--success__KoszS","barIndicator--warning":"style_barIndicator--warning__ZwsIO","barIndicator--error":"style_barIndicator--error__bj26m","barIndicator--disabled":"style_barIndicator--disabled__jsyR8","barIndicator--neutral":"style_barIndicator--neutral__wlGcl","barIndicator--information":"style_barIndicator--information__wyiCC"}},83609:function(e){e.exports={input:"style_input__gDX68",inputError:"style_inputError__EwQF7",inputActive:"style_inputActive__u5ekF",inputLabel:"style_inputLabel__F2K7d",inputColor:"style_inputColor__mXKDo"}},16034:function(e){e.exports={popup:"style_popup__RXxQo",popupColor:"style_popupColor__5JZsp"}},62155:function(e){e.exports={touchable:"style_touchable__n1Lrc"}},4940:function(e){e.exports={colorBlob:"style_colorBlob__Ye8ny",colorCell:"style_colorCell__nj6L_",popupContainer:"style_popupContainer__lTmcE"}},46659:function(e){e.exports={targetContainer:"style_targetContainer__H60i9"}},91237:function(e){e.exports={fab:"style_fab__Jqu83","fab--only-icon":"style_fab--only-icon__g5mJq"}},86480:function(e){e.exports={modalCloseButton:"style_modalCloseButton__jW4WC"}},13498:function(e){e.exports={modal__content:"style_modal__content__ZW6RV","modal__content--paddedOnMobile":"style_modal__content--paddedOnMobile__D6FEm"}},53794:function(e){e.exports={modal__footer:"style_modal__footer___ZED2","modal__footer--platform-all":"style_modal__footer--platform-all__0MmQE","modal__footer--platform-desktop":"style_modal__footer--platform-desktop__e8VZJ","modal__footer--stretchButtons":"style_modal__footer--stretchButtons__YKMoe","modal__footer--platform-mobile":"style_modal__footer--platform-mobile__YSB3L"}},17331:function(e){e.exports={modal__form:"style_modal__form__BJ_uX"}},1125:function(e){e.exports={modal__header:"style_modal__header__asd_M","modal__header--platform-all":"style_modal__header--platform-all__qNOL0","modal__header--platform-desktop":"style_modal__header--platform-desktop__5zowU",modal__mobileCloseButton:"style_modal__mobileCloseButton__c6Tvt","modal__header--platform-mobile":"style_modal__header--platform-mobile__JBukB"}},9737:function(e){e.exports={modal__subtitle:"style_modal__subtitle__KJaoE"}},17691:function(e){e.exports={overlay:"style_overlay__hlI_B","overlay--open":"style_overlay--open__Il3BH",modal:"style_modal__hfanz","modal--open":"style_modal--open__ARsez"}},65188:function(e){e.exports={progress:"style_progress__YVFKW"}},74889:function(e){e.exports={identityNumberCell:"style_identityNumberCell__2O1MW",identityNumberCell__action:"style_identityNumberCell__action__veQLW","identityNumberCell--showChevron":"style_identityNumberCell--showChevron__iDcDK"}},42174:function(e){e.exports={textCell:"style_textCell__7SJUE","textCell--align-right":"style_textCell--align-right__oRNVC"}},70449:function(e){e.exports={toggle:"style_toggle__qNOsv","toggle--size-sm":"style_toggle--size-sm__rnNqV","toggle--size-md":"style_toggle--size-md__v5Snu","toggle--size-lg":"style_toggle--size-lg__DmcKK"}},13380:function(e){e.exports={weekPicker:"style_weekPicker___vtCe",weekPicker__content:"style_weekPicker__content__oZkMi",weekPicker__footer:"style_weekPicker__footer__o09II",weekPicker__info:"style_weekPicker__info__nkltK",weekPicker__buttons:"style_weekPicker__buttons__kUrVk",weekPicker__weekContainer:"style_weekPicker__weekContainer__N2evR",weekContainer__title:"style_weekContainer__title__oAN0I",weekContainer__list:"style_weekContainer__list__OT6ic",weekContainer__listItem:"style_weekContainer__listItem__LhhWU","weekContainer__listItem--selected":"style_weekContainer__listItem--selected__6oEcg","weekContainer__listItem--disabled":"style_weekContainer__listItem--disabled__Z96gb","weekContainer__listItem--currentWeek":"style_weekContainer__listItem--currentWeek__OQuQT","weekContainer__listItem--locked":"style_weekContainer__listItem--locked__8Yh58","weekContainer__listItem--deviating":"style_weekContainer__listItem--deviating__NRypb"}},13777:function(e){e.exports={periodSelector:"style_periodSelector__xKy0j",periodSelector__todayButton:"style_periodSelector__todayButton__31Yfk",periodSelector__navButtons:"style_periodSelector__navButtons__XDQeC","periodSelector--weekLabel":"style_periodSelector--weekLabel__cRrCB","periodSelector--monthLabel":"style_periodSelector--monthLabel__UW_ew"}},31936:function(e){e.exports={timePicker:"style_timePicker__EmbiY",timePicker__column:"style_timePicker__column__dcxkY",timePicker__item:"style_timePicker__item__aK_71","timePicker__item--selected":"style_timePicker__item--selected__Aaw7J"}},78198:function(e){e.exports={absencePartialBottomSheetBody:"style_absencePartialBottomSheetBody__uXJxl"}},81484:function(e){e.exports={absencePartialForm:"style_absencePartialForm__hzwQt",absencePartialForm__input:"style_absencePartialForm__input__VjUmq",absencePartialForm__duration:"style_absencePartialForm__duration__mOBlZ"}},62476:function(e){e.exports={popup:"style_popup__aaWKj",popup__header:"style_popup__header__LTmaf"}},23072:function(e){e.exports={cell__container:"style_cell__container__AkSfq",cell:"style_cell__xUOWb",cell__information:"style_cell__information__cWZVa",cell__time:"style_cell__time___5ds9"}},4537:function(e){e.exports={headerContent:"style_headerContent__aQbd_",headerContent__title:"style_headerContent__title__Iz807",dateButtonGroup:"style_dateButtonGroup__dPTdZ",groupSelect:"style_groupSelect__E41cG",mobileReportButton:"style_mobileReportButton__lntpn",groupSelect__select:"style_groupSelect__select__5dq8G",desktopReportButton:"style_desktopReportButton__mVOBv",desktopDivider:"style_desktopDivider__CGZUs"}},45744:function(e){e.exports={userItem:"style_userItem__IJO9M",chipWrapper:"style_chipWrapper__Iblrf"}},23246:function(e){e.exports={attendanceHeader__empty:"style_attendanceHeader__empty__Nntam"}},66065:function(e){e.exports={attendanceOverviewTable:"style_attendanceOverviewTable__4ga1e"}},10844:function(e){e.exports={attendanceOverviewWrapper:"style_attendanceOverviewWrapper__Kd6bb"}},56957:function(e){e.exports={detailsHeader:"style_detailsHeader__X7fd8",detailsHeader__box:"style_detailsHeader__box__FKsSv"}},7181:function(e){e.exports={attendeeItem:"style_attendeeItem__VjYIc"}},86793:function(e){e.exports={"attendanceStatisticsTable__chip--warning":"style_attendanceStatisticsTable__chip--warning__BzS20"}},13470:function(e){e.exports={attendanceStatisticsTable:"style_attendanceStatisticsTable__sjZL6",attendanceStatisticsTable__empty:"style_attendanceStatisticsTable__empty__C_npu"}},72608:function(e){e.exports={"attendanceStatisticsTable__chip--success":"style_attendanceStatisticsTable__chip--success__Wv2JL","attendanceStatisticsTable__chip--warning":"style_attendanceStatisticsTable__chip--warning__2P9QB"}},5697:function(e){e.exports={attendanceStatisticsTable:"style_attendanceStatisticsTable__lnl9D",attendanceStatisticsTable__empty:"style_attendanceStatisticsTable__empty__nGWCx"}},6772:function(e){e.exports={attendanceStatisticsFilter:"style_attendanceStatisticsFilter__uW7ku",attendanceStatisticsFilter__date:"style_attendanceStatisticsFilter__date__9MGK6",attendanceStatisticsFilter__percentage:"style_attendanceStatisticsFilter__percentage__vHpVw",percentage__label:"style_percentage__label__t6hO1",percentage__type:"style_percentage__type__KHD9E",percentage__amount:"style_percentage__amount__CsjS2",attendanceStatisticsFilter__representBy:"style_attendanceStatisticsFilter__representBy__7gm_w",representBy__type:"style_representBy__type__prK78",representBy__togglePercentage:"style_representBy__togglePercentage__HVIbA",attendanceStatisticsFilter__action:"style_attendanceStatisticsFilter__action__B1y9S"}},89314:function(e){e.exports={attendanceStatisticsFirstVisit:"style_attendanceStatisticsFirstVisit__LlF6h",attendanceStatisticsFirstVisit__text:"style_attendanceStatisticsFirstVisit__text__EF0l9"}},87987:function(e){e.exports={attendanceModal:"style_attendanceModal__sCLQJ"}},68516:function(e){e.exports={barCell:"style_barCell__bXXoI"}},69806:function(e){e.exports={"studentCell--mentor":"style_studentCell--mentor__f9T_B"}},7373:function(e){e.exports={attendeeNotification:"style_attendeeNotification__TygiG","attendeeNotification--handled":"style_attendeeNotification--handled__cYTfQ"}},38095:function(e){e.exports={popup:"style_popup__poShj"}},67806:function(e){e.exports={attendeeNotifications:"style_attendeeNotifications__f_SId",attendeeNotifications__header:"style_attendeeNotifications__header__vJDlq",attendeeNotifications__table:"style_attendeeNotifications__table__vqHwD",userCard:"style_userCard__QL_0N"}},88977:function(e){e.exports={expandable:"style_expandable__6rhoh",expandable__header:"style_expandable__header__8eMpn",expandable__content:"style_expandable__content__98eCv",attendanceButton:"style_attendanceButton__ZlbLH","attendanceButton--selectedSuccess":"style_attendanceButton--selectedSuccess__JW1zU","attendanceButton--selectedWarning":"style_attendanceButton--selectedWarning__wAbEc","attendanceButton--selectedDanger":"style_attendanceButton--selectedDanger___EL_g","attendanceButton--selectedNeutral":"style_attendanceButton--selectedNeutral__atMsk",partialAttendanceMobileButton:"style_partialAttendanceMobileButton__5KCIB",partialAttendanceDesktopButton:"style_partialAttendanceDesktopButton__8f7A8","attendanceButton--selected":"style_attendanceButton--selected__ulw91"}},33643:function(e){e.exports={legends:"style_legends__QLgMJ","legends--twoColumns":"style_legends--twoColumns__ab3Z7",legend__container:"style_legend__container__orx3D",legend__icon:"style_legend__icon__0MLBs","legend--danger":"style_legend--danger___mGai","legend--warning":"style_legend--warning__yIDW_","legend--success":"style_legend--success__GWzED","legend--primary":"style_legend--primary__UZBNb","legend--primary-border":"style_legend--primary-border__HT4Vg","legend--neutral":"style_legend--neutral__ahbfq"}},21469:function(e){e.exports={reportList:"style_reportList__1XVUV",reportItem:"style_reportItem__IHLH6",reportItem__deleteOverlay:"style_reportItem__deleteOverlay__G2A3L"}},65423:function(e){e.exports={header:"style_header__x2tp0",subHeader:"style_subHeader__0RDDG",content:"style_content__1Pyhp"}},12255:function(e){e.exports={reportChip:"style_reportChip__n2q5q"}},71550:function(e){e.exports={eventItem:"style_eventItem__9vGlc",eventItem__inner:"style_eventItem__inner__ZnSdw",itemWrapper:"style_itemWrapper__y1Lm0",itemStripe:"style_itemStripe___lzQ9"}},76824:function(e){e.exports={dragSection:"style_dragSection__xNYsT",dragSection__day:"style_dragSection__day__RHWE0",dragSection__step:"style_dragSection__step__N03dL","dragSection__step--active":"style_dragSection__step--active__vIo3Z"}},6663:function(e){e.exports={resizeHandle:"style_resizeHandle__RwPJu","resizeHandle--direction-up":"style_resizeHandle--direction-up__51oyl","resizeHandle--direction-down":"style_resizeHandle--direction-down__e0Bk_"}},80056:function(e){e.exports={timeline:"style_timeline__PZjJk",timeline__spacer:"style_timeline__spacer__pARmy",timeline__hour:"style_timeline__hour__Upld3"}},16568:function(e){e.exports={weekDay:"style_weekDay__AE6ri","weekDay--today":"style_weekDay--today__oCYeQ",slots:"style_slots___Z9zv",slots__slotGroup:"style_slots__slotGroup__skQ6a",slots__slot:"style_slots__slot__pNrku",events:"style_events__V5pIO"}},15491:function(e){e.exports={header:"style_header__rU6AM","header--today":"style_header--today__Aeost"}},83469:function(e){e.exports={calendarWeek:"style_calendarWeek__WE6QO",calendarWeek__header:"style_calendarWeek__header__B8yPJ",calendarWeek__body:"style_calendarWeek__body__3z30H"}},50078:function(e){e.exports={dateTimeController:"style_dateTimeController__Mq5BI",dateTimeController__inputs:"style_dateTimeController__inputs__M_NWv"}},55637:function(e){e.exports={textInput:"style_textInput__E9zqz"}},76711:function(e){e.exports={careHoursDayFlexRow:"style_careHoursDayFlexRow__e_aVx"}},76798:function(e){e.exports={careHoursDayStatusBox:"style_careHoursDayStatusBox__K51ai","careHoursDayStatusBox--on-schedule":"style_careHoursDayStatusBox--on-schedule__ePDfD","careHoursDayStatusBox--empty":"style_careHoursDayStatusBox--empty__2bCDl","careHoursDayStatusBox--absent":"style_careHoursDayStatusBox--absent__S_BL1","careHoursDayStatusBox--locked":"style_careHoursDayStatusBox--locked__HgLpH","careHoursDayStatusBox--locked-guardian":"style_careHoursDayStatusBox--locked-guardian__zIC_7","careHoursDayStatusBox--closed":"style_careHoursDayStatusBox--closed__Sa479","careHoursDayStatusBox--free":"style_careHoursDayStatusBox--free__9sGf3","careHoursDayStatusBox--day-gone":"style_careHoursDayStatusBox--day-gone__2Jpsd","careHoursDayStatusBox--no-calendar":"style_careHoursDayStatusBox--no-calendar__rPRXQ","careHoursDayStatusBox--outside-hours":"style_careHoursDayStatusBox--outside-hours__etMbX","careHoursDayStatusBox--has-deviation":"style_careHoursDayStatusBox--has-deviation__L2j7d","careHoursDayStatusBox--deviant-opening-hours":"style_careHoursDayStatusBox--deviant-opening-hours__FhOK6"}},83835:function(e){e.exports={careHoursDayStatusRow:"style_careHoursDayStatusRow__zxo49"}},3141:function(e){e.exports={container:"style_container__GM4gC",careHoursDay:"style_careHoursDay__rzS44",iconPlaceholder:"style_iconPlaceholder__T6Zro","careHoursDay--empty":"style_careHoursDay--empty__HQLvs","careHoursDay--currentWeek":"style_careHoursDay--currentWeek__Shcqj","careHoursDay--closed":"style_careHoursDay--closed__2sw_T",careHoursDay__info:"style_careHoursDay__info__qqdCO",careHoursDayFlexRow:"style_careHoursDayFlexRow__a6PS8",careHoursDayText:"style_careHoursDayText__CtNM4"}},63456:function(e){e.exports={container:"style_container__wPAio",childcareHeader:"style_childcareHeader__u9AH0",childcareHeader__title:"style_childcareHeader__title__5Uzgp",childcareHeader__action:"style_childcareHeader__action__voQtm",childcareHeader__weekpicker:"style_childcareHeader__weekpicker__PEVNv"}},71024:function(e){e.exports={header:"style_header__XfKPg",header__title:"style_header__title__mjIAC"}},50602:function(e){e.exports={careHoursLabel:"style_careHoursLabel__l3eFb"}},34046:function(e){e.exports={editChildcareWrapper:"style_editChildcareWrapper__9C9Dn",formWrapper:"style_formWrapper__DPDj_"}},71761:function(e){e.exports={actionRow:"style_actionRow__Ivz7e",absenceBox:"style_absenceBox__6__sv",absenceBox__row:"style_absenceBox__row__vJQop",commentBox:"style_commentBox__D4z5t",textAreaBox:"style_textAreaBox__9JSLk","actionRow--inner":"style_actionRow--inner__r4kcQ"}},15630:function(e){e.exports={lowerRow:"style_lowerRow__tnSzD",openingHourLabel:"style_openingHourLabel__ZAVlt"}},39473:function(e){e.exports={radioButtons:"style_radioButtons__TueE_",absenceBox:"style_absenceBox__EX7yd",absenceBox__row:"style_absenceBox__row__A4_9E",commentBox:"style_commentBox__oNrV8",textAreaBox:"style_textAreaBox__f8Wam",commentSectionRow:"style_commentSectionRow__xoJIV",commentsWrapper:"style_commentsWrapper__A6i8B",commentSection:"style_commentSection__G1xpu",displayComment:"style_displayComment__C8ogX",comment:"style_comment__m_YNJ","displayComment--header":"style_displayComment--header__FetH_","displayComment--guardian":"style_displayComment--guardian___WgES","displayComment--comment":"style_displayComment--comment__lrK2D",radioButtonsWrapper:"style_radioButtonsWrapper__nbr4A"}},38749:function(e){e.exports={editCareHoursDayCard:"style_editCareHoursDayCard__TEkw2",innerWrapper:"style_innerWrapper__fGGnQ",upperRow:"style_upperRow__Fid7F","upperRow--inner":"style_upperRow--inner__t4mi4"}},13975:function(e){e.exports={wrapper:"style_wrapper__j_DZa",headerWrapper:"style_headerWrapper__evwNH",headerInfo:"style_headerInfo__2M156",closeButtonDesktop:"style_closeButtonDesktop__EY4WZ",closeButtonMobile:"style_closeButtonMobile__IhFm_"}},39092:function(e){e.exports={labelBox:"style_labelBox__ObugX",labelBoxButton:"style_labelBoxButton__oWLzt",labelBoxInner:"style_labelBoxInner__xQcFy",labelBoxText:"style_labelBoxText__MIJQr",labelBoxSubtitle:"style_labelBoxSubtitle__PV080",labelBoxIcon:"style_labelBoxIcon__UeZ9W","labelBoxIcon--rotated":"style_labelBoxIcon--rotated__U8_TY"}},33452:function(e){e.exports={specificWeekTriggerWrapper:"style_specificWeekTriggerWrapper___VKhg",specificWeekPickerButton:"style_specificWeekPickerButton__6ueDi",specificWeekPickerButton__text:"style_specificWeekPickerButton__text__cLkKj",specificWeekPickerButton__label:"style_specificWeekPickerButton__label__62Vfr","specificWeekPickerButton__text--empty":"style_specificWeekPickerButton__text--empty__Db3m8"}},23650:function(e){e.exports={recurrenceWrapper:"style_recurrenceWrapper__Xtxls",recurrenceRow:"style_recurrenceRow__IQuR7",recurrenceRow__description:"style_recurrenceRow__description__mSrkN",rowWrapper:"style_rowWrapper__iTyul",blockMargin:"style_blockMargin__Xq_GH",selectorWrapper:"style_selectorWrapper__e2XER",horizontalPadding:"style_horizontalPadding__gHuPd","selector--inactive":"style_selector--inactive__g_h2E",selector:"style_selector__PPF9m",selectorButton:"style_selectorButton__gfW4q"}},92409:function(e){e.exports={lowerRow:"style_lowerRow__SAHJ_",timeInput:"style_timeInput__a0vSS",openingHourLabel:"style_openingHourLabel__NB2BK",timeInputError:"style_timeInputError__HPJxz",editCareHoursDayCard:"style_editCareHoursDayCard__V39FH",innerWrapper:"style_innerWrapper__BPDhl",upperRow:"style_upperRow__O1eK9","upperRow--inner":"style_upperRow--inner__38AZz",actionRow:"style_actionRow__5lKL5"}},39443:function(e){e.exports={editChildcareWrapper:"style_editChildcareWrapper__qg0xX",formWrapper:"style_formWrapper__ldHvw",footer:"style_footer__CmfrX",submitButton:"style_submitButton__SBKsE",dailyMaxHours:"style_dailyMaxHours__BnaSV",dailyMaxHours__header:"style_dailyMaxHours__header__RyHXA"}},87314:function(e){e.exports={wrapper:"style_wrapper__E78ZZ",headerWrapper:"style_headerWrapper__g9zvY",headerInfo:"style_headerInfo__nRIIQ",closeButtonDesktop:"style_closeButtonDesktop__cwVuL",closeButtonMobile:"style_closeButtonMobile__K8H6z"}},60872:function(e){e.exports={lowerHeaderWrapper:"style_lowerHeaderWrapper__og7ZL",progressBarWrapper:"style_progressBarWrapper__VcYeT"}},45091:function(e){e.exports={alertWrapper:"style_alertWrapper__2WLej"}},66859:function(e){e.exports={careHoursWeek:"style_careHoursWeek__cJUC_"}},60655:function(e){e.exports={weekSelector:"style_weekSelector__n0CbD",weekSelectorWrapper:"style_weekSelectorWrapper__MlRdv",startFade:"style_startFade__z_jfA",endFade:"style_endFade__jYLBi"}},76480:function(e){e.exports={weekSelectorWrapper:"style_weekSelectorWrapper__RckI5"}},59536:function(e){e.exports={yearChip:"style_yearChip__BqHCv",weekWrapper:"style_weekWrapper__ALKF3",week:"style_week__PWbiX","week--inactive":"style_week--inactive__lXA2w","week--current":"style_week--current__vr6Y9","week_status--locked":"style_week_status--locked__nxhFg","week_status--deviating":"style_week_status--deviating__Wrl08","week--active":"style_week--active__d8xkU",currentWeekIndicator:"style_currentWeekIndicator__Mkkyp"}},77277:function(e){e.exports={childcareCommentBox:"style_childcareCommentBox__3x4uu",alternativeDayBadge:"style_alternativeDayBadge__K2A81",childcareTableDataClickable:"style_childcareTableDataClickable__OEOJV"}},58408:function(e){e.exports={childcareWeekColumn:"style_childcareWeekColumn__UbLNR",childcareWeekColumn__toggle:"style_childcareWeekColumn__toggle__uLXwC"}},96501:function(e){e.exports={childcareTableData:"style_childcareTableData__TOoD8"}},31617:function(e){e.exports={childcareCalendarTableWrapper:"style_childcareCalendarTableWrapper__lOSry",childcareCalendarTable:"style_childcareCalendarTable__wC9KZ",selectedOverlay:"style_selectedOverlay__AKgxg"}},5570:function(e){e.exports={childcareFilterHeader:"style_childcareFilterHeader__qMjnL"}},70785:function(e){e.exports={childcareTabsWrapper:"style_childcareTabsWrapper__fd0fQ"}},56382:function(e){e.exports={childcareLayoutHeader:"style_childcareLayoutHeader__wOb03","filter--overview":"style_filter--overview__omWDg"}},56726:function(e){e.exports={checkInComments:"style_checkInComments__0nLQX",checkInComments__card:"style_checkInComments__card__yL2Ec",checkInComments__description:"style_checkInComments__description__Dp1Mf",checkInComments__comment:"style_checkInComments__comment__gR6b8"}},63195:function(e){e.exports={checkinEntry:"style_checkinEntry__L8DIw",checkinEntry__card:"style_checkinEntry__card__4tR98",checkinCommentNotification:"style_checkinCommentNotification__Lyi4h",checkinEntry__button:"style_checkinEntry__button__5lFic","checkinEntry__button--variant-primary":"style_checkinEntry__button--variant-primary___NsTR","checkinEntry__button--variant-soft":"style_checkinEntry__button--variant-soft__ncH_E"}},18246:function(e){e.exports={searchInput:"style_searchInput__zxeI0"}},3300:function(e){e.exports={checkinHeader:"style_checkinHeader__NO_Pn"}},88272:function(e){e.exports={dayItem:"style_dayItem__VheI_","dayItem--absent":"style_dayItem--absent__NxF0_",dayItem__inner:"style_dayItem__inner__BaTUg"}},67608:function(e){e.exports={userCellWrapper:"style_userCellWrapper__jtRp6"}},6988:function(e){e.exports={headerRight:"style_headerRight__kX9WY"}},81750:function(e){e.exports={modal:"style_modal__n0LS5",overlay:"style_overlay__Tm8ql","overlay--open":"style_overlay--open__aYJW7",weekWrapper:"style_weekWrapper__BqFm_",headerTitleWrapper:"style_headerTitleWrapper__8RJhr"}},52951:function(e){e.exports={checkinComment__comment:"style_checkinComment__comment__d7isK",checkinComment__modal:"style_checkinComment__modal__cST1D",checkinComment__comments:"style_checkinComment__comments__89XtP"}},47431:function(e){e.exports={childcareOverviewDay:"style_childcareOverviewDay__kFsS_",expected:"style_expected__FJeCP",checkedIn:"style_checkedIn__RCOzW",absent:"style_absent__AN22Z"}},83275:function(e){e.exports={filter:"style_filter__tQ_FP",filterButtons:"style_filterButtons__46Oj5",dividerMobile:"style_dividerMobile__5JjDi",dividerDesktop:"style_dividerDesktop__6A3cT",legend:"style_legend__vxWQe"}},68079:function(e){e.exports={"chip--confirmed":"style_chip--confirmed__tsoR_","chip--notConfirmed":"style_chip--notConfirmed__EGSHD"}},65363:function(e){e.exports={lastNameCell:"style_lastNameCell__auM5U"}},3e4:function(e){e.exports={lastUpdated:"style_lastUpdated__KllDA",subtitle:"style_subtitle__ZENxI","icon--rotate":"style_icon--rotate__G6RMb",rotateLastUpdatedIcon:"style_rotateLastUpdatedIcon__10puZ",labels:"style_labels__sam_t"}},37647:function(e){e.exports={mobilePeriodSelector:"style_mobilePeriodSelector__D_MDq"}},42978:function(e){e.exports={section:"style_section__bUz_A",sectionCombobox:"style_sectionCombobox__3myvy",bottomSheet__body:"style_bottomSheet__body__HAG5s",bottomSheet__footer:"style_bottomSheet__footer__eO299",mobileChildcareOverviewFilter:"style_mobileChildcareOverviewFilter__JdoW6"}},1313:function(e){e.exports={avatarWithGroupCell:"style_avatarWithGroupCell__Tr7s0",avatarWithGroupCell__labels:"style_avatarWithGroupCell__labels__8gL8h",avatarWithGroupCell__groupLabel:"style_avatarWithGroupCell__groupLabel__MzR07"}},41791:function(e){e.exports={filterButtons:"style_filterButtons__viMxW",dividerMobile:"style_dividerMobile__VnAj4"}},17184:function(e){e.exports={label:"style_label__vViCg",input:"style_input__MM8R4",filter:"style_filter__X08y5","filter--active":"style_filter--active__ctXkD","filter--expected":"style_filter--expected__VTzv_","filter--checked-in":"style_filter--checked-in__kgd5B","filter--absent":"style_filter--absent__VdeOB","filter--showAll":"style_filter--showAll__H8uDK","filter--notConfirmed":"style_filter--notConfirmed__cIvF_"}},86139:function(e){e.exports={updateAndPrintArea:"style_updateAndPrintArea__sKnWP",divider:"style_divider__joIzp",tableHeadings:"style_tableHeadings__WmlON",childcareOverviewHeaderInner:"style_childcareOverviewHeaderInner___I8rv",statusFilter:"style_statusFilter__BSWb3"}},54698:function(e){e.exports={textInputDays:"style_textInputDays__F9vO_",textInputWeeks:"style_textInputWeeks__AJ_K8"}},55457:function(e){e.exports={checkbox__toggleClose:"style_checkbox__toggleClose__C0Q61"}},51282:function(e){e.exports={textInputDays:"style_textInputDays__MWXtp",textInputWeeks:"style_textInputWeeks__JDQ12",checkbox__breakPeriod:"style_checkbox__breakPeriod__aQbG5"}},15902:function(e){e.exports={list__item:"style_list__item__W7pjQ",list__item__startSection:"style_list__item__startSection__jP_fO"}},96808:function(e){e.exports={listItem:"style_listItem__XMNPu"}},36554:function(e){e.exports={listHeader:"style_listHeader__iJeEA",listContent:"style_listContent__FaoAc",searchInput:"style_searchInput__t7IZm",listItemInfo:"style_listItemInfo__Cuxfz",listItemOptions:"style_listItemOptions__zLBH9",listItemOptions__option:"style_listItemOptions__option__TrD3j","listItemOptions__option--selected":"style_listItemOptions__option--selected__d0Sjw"}},4444:function(e){e.exports={schoolLogo:"style_schoolLogo__gRMIm"}},10326:function(e){e.exports={listHeader:"style_listHeader__WtB5m",listContent:"style_listContent__f5AUO"}},79563:function(e){e.exports={modalContent:"style_modalContent__rCBk8",column:"style_column__t2V_8",column__header:"style_column__header__gmkk8",overlay:"style_overlay___7QIY"}},81459:function(e){e.exports={comboboxPopupItem:"style_comboboxPopupItem__e2m_o","comboboxPopupItem--selected":"style_comboboxPopupItem--selected__pFzxK","comboboxPopupItem--active":"style_comboboxPopupItem--active___6d8j",comboboxPopupItem__elementaryCourse:"style_comboboxPopupItem__elementaryCourse__2omF6","comboboxPopupItem__elementaryCourse--active":"style_comboboxPopupItem__elementaryCourse--active__HGmN3","comboboxPopupItem__elementaryCourse--hidden":"style_comboboxPopupItem__elementaryCourse--hidden__wkcjX","comboboxPopupItem__elementaryCourse--selected":"style_comboboxPopupItem__elementaryCourse--selected__UG_rv"}},93502:function(e){e.exports={comboboxCourseItem:"style_comboboxCourseItem__kG3_7",chips:"style_chips__kveGZ"}},96248:function(e){e.exports={batchActionBarWrapper:"style_batchActionBarWrapper__PaNJ2",batchActionBarContainer:"style_batchActionBarContainer__ZBTxC",batchActionBarTitleWrapper:"style_batchActionBarTitleWrapper__73NuS"}},32473:function(e){e.exports={dateButtonGroup:"style_dateButtonGroup__zOoFh",dateButtonGroup__button:"style_dateButtonGroup__button__3_qq8","dateButtonGroup__button--icon-only":"style_dateButtonGroup__button--icon-only__rCxGN"}},75466:function(e){e.exports={label:"style_label__vVJcl"}},8420:function(e){e.exports={listItem:"style_listItem__3Rlrb","listItem--clickable":"style_listItem--clickable__n9g8y",listItem__section:"style_listItem__section__Dx2CP"}},79656:function(e){e.exports={loadingListItem:"style_loadingListItem__c1FLr"}},43695:function(e){e.exports={inputHeader:"style_inputHeader__S0jFY",emptyWrapper:"style_emptyWrapper__YjBS6",footer:"style_footer__JemOl"}}}]);