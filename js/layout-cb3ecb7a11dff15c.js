!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="86b175d2-da8f-4f5b-8a8d-0426e9a87d7f",e._sentryDebugIdIdentifier="sentry-dbid-86b175d2-da8f-4f5b-8a8d-0426e9a87d7f")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{2009:function(e,t,s){Promise.resolve().then(s.bind(s,86611)),Promise.resolve().then(s.bind(s,41152)),Promise.resolve().then(s.bind(s,96816)),Promise.resolve().then(s.bind(s,71969)),Promise.resolve().then(s.t.bind(s,644,23)),Promise.resolve().then(s.t.bind(s,41809,23)),Promise.resolve().then(s.t.bind(s,44720,23)),Promise.resolve().then(s.t.bind(s,61898,23)),Promise.resolve().then(s.t.bind(s,91178,23)),Promise.resolve().then(s.t.bind(s,63937,23)),Promise.resolve().then(s.t.bind(s,76114,23)),Promise.resolve().then(s.t.bind(s,6974,23)),Promise.resolve().then(s.bind(s,21009)),Promise.resolve().then(s.bind(s,55613)),Promise.resolve().then(s.bind(s,9519)),Promise.resolve().then(s.bind(s,4172)),Promise.resolve().then(s.bind(s,83497)),Promise.resolve().then(s.bind(s,79633))},86611:function(e,t,s){"use strict";var r=s(27573),n=s(21009),i=s(15709),a=s(7653);t.default=e=>{let{children:t}=e,{userID:s}=(0,n.Tt)();return(0,a.useEffect)(()=>{i.Y.initialize(s)},[s]),(0,r.jsx)(r.Fragment,{children:t})}},56607:function(e,t,s){"use strict";s.d(t,{Z:function(){return v}});var r=s(27573),n=s(24297),i=s(69038),a=s(42274),o=s(25913),l=s(96669),c=s(54375),u=s(66339),h=s(23618),d=()=>{let{state:e}=(0,h.TH)();return e||{}},m=s(66242),f=s(79162),p=s(92575),_=s(7653);let y=new n.al,g=e=>{let{files:t,activeFile:s}=e,n=(0,h.s0)(),{t:i}=(0,p.T_)(),u=t.findIndex(e=>e.id===s.id)??0,d=c.vH[s?.mime_type??""],_=(0,h.bS)("/communication/chat/:chatID/*"),y=()=>{if(!t||!_?.params.chatID)return;let e=t?.[u-1]?.id||t?.[t?.length-1]?.id||t?.[u]?.id;e&&n(`/communication/chat/${_?.params?.chatID}?media=${e}`,{state:{files:t}})},g=()=>{if(!t||!_?.params.chatID)return;let e=t?.[u+1]?.id||t?.[0]?.id||t?.[u]?.id;e&&n(`/communication/chat/${_?.params?.chatID}?media=${e}`,{state:{files:t},replace:!0})};return(0,m.Z)("keydown",e=>{e?.key==="ArrowLeft"?y():e?.key==="ArrowRight"&&g()}),(0,r.jsx)(l.Z,{center:!0,direction:"column",style:{backgroundColor:"rgba(0,0,0,0.1)",maxWidth:1e3,overflow:"visible",blockSize:"100%"},children:(0,r.jsxs)(l.Z,{justify:"space-between",align:"center",style:{inlineSize:"100%"},children:[(0,r.jsx)(l.Z,{center:!0,justify:"center",style:{flex:1},children:(0,r.jsx)("div",{style:{position:"absolute",marginLeft:60},children:t?.length>1?(0,r.jsx)(a.Z,{title:i(p.ZT.Common.Back),children:(0,r.jsx)(o.Z,{"aria-label":i(p.ZT.Common.Back),variant:"secondary",size:"sm",pill:!0,onClick:y,children:(0,r.jsx)(f.J,{name:"icon-arrow-left-24"})})}):null})}),d?.type_of==="video"?(0,r.jsx)("video",{src:s?.url,autoPlay:!0,controls:!0,style:{height:450,width:1e3}}):(0,r.jsx)("img",{src:s?.url,alt:"lightbox",style:{minHeight:"50dvh",maxHeight:"90dvh",objectFit:"contain",padding:0,width:"100%"}}),(0,r.jsx)(l.Z,{center:!0,style:{flex:1},children:(0,r.jsx)("div",{style:{position:"absolute",marginRight:60},children:t.length>1?(0,r.jsx)(a.Z,{title:i(p.ZT.Common.Forward),children:(0,r.jsx)(o.Z,{"aria-label":i(p.ZT.Common.Forward),variant:"secondary",size:"sm",pill:!0,onClick:g,children:(0,r.jsx)(f.J,{name:"icon-arrow-right-24"})})}):null})})]})})};var v=e=>{let{modalProps:t}=e,{params:s}=(0,u.Z)(),{t:n}=(0,p.T_)(),l=d(),m=(0,h.s0)(),[v,b]=(0,_.useState)(l?.files??[]),[C,S]=(0,_.useState)(!1),x=(0,h.bS)("/communication/chat/:chatID/*"),w=(0,_.useCallback)(async()=>{if(!x?.params?.chatID||!C||v)return;let e=await y.listChatFiles({chat_id:x?.params?.chatID,pagination:{size:0,page:0}});e.files.length&&b(e.files.filter(c.P4.isImageOrVideo).sort((e,t)=>e.created_at-t.created_at))},[v,x?.params?.chatID,C]),Z=()=>{S(!1),setTimeout(()=>{m(window?.location?.pathname?.replace(`?media=${s?.media}`,""),{replace:!0})},200)};(0,_.useEffect)(()=>{s?.media&&S(!0)},[s?.media]),(0,_.useEffect)(()=>{C&&w()},[w,C]),(0,_.useEffect)(()=>{b(e=>l?.files?l.files:e)},[l?.files]);let T=v&&v?.length>0?v?.find(e=>e?.id===s?.media):void 0;return v?(0,r.jsxs)(i.ZP,{visible:C,onClose:Z,...t,children:[(0,r.jsx)(a.Z,{title:n(p.ZT.Common.Close),children:(0,r.jsx)(o.Z,{"aria-label":n(p.ZT.Common.Close),variant:"secondary",pill:!0,onClick:Z,style:{position:"absolute",right:15,top:15},children:(0,r.jsx)(f.J,{name:"icon-xmark-24"})})}),T&&v&&(0,r.jsx)(g,{files:v,activeFile:T})]}):null}},41152:function(e,t,s){"use strict";var r=s(27573),n=s(38556),i=s(38493),a=s.n(i),o=s(7653),l=s(33226),c=s(94648);t.default=e=>{let{children:t}=e,{refetchHasUnreadChats:s}=(0,l.Z)();return(0,o.useEffect)(()=>{let e=`${n.D.API_ENDPOINT}/oto/PushService.Chat`,t=new(a())(e,{withCredentials:!0,headers:{"Access-Control-Allow-Credentials":!0},method:"POST"});return t.onmessage=e=>{try{let t=JSON.parse(e.data);c.vc.dispatch(t)}catch{console.error("Could not parse push data!")}finally{s()}},()=>{t.close()}},[s]),(0,r.jsx)(r.Fragment,{children:t})}},96816:function(e,t,s){"use strict";var r=s(83499),n=s(21009),i=s(80561),a=s(35176),o=s(89752),l=s(7653);let c=new r.$A;t.default=e=>{let{children:t}=e,{organizationCategory:s}=(0,n.Tt)(),r=(0,o.Z)(e=>e.setPermissions),u=(0,n.zP)(),{checkIfUserHasAddedToken:h}=(0,i.jx)();(0,l.useEffect)(()=>{h(),c.listPermissionsByClaims({}).then(e=>{r(e.permissions)})},[r,h]);let{hasLoaded:d}=(0,a.rV)();return d&&("School"!==s||u)?t:null}},71969:function(e,t,s){"use strict";s.d(t,{default:function(){return h},v:function(){return u}});var r=s(27573),n=s(24297);class i{constructor({callbackFn:e,intervalMS:t=1e3,timeoutMS:s=6e4,onTimeout:r}){this.interval=void 0,this.onTimeout=void 0,this.intervalMS=t,this.timeoutMS=s,this.callbackFn=e,this.onTimeout=r}start(){this.callbackFn(),this.interval=setInterval(()=>{this.callbackFn()},this.intervalMS),setTimeout(()=>{this.stop(),this.onTimeout&&this.onTimeout()},this.timeoutMS)}stop(){this.interval&&clearInterval(this.interval)}}var a=s(7653);let o=new n.Bq,l=e=>!e.web_view_link_public,c=(0,a.createContext)({googleFiles:[],addGoogleFiles:()=>{},fetchGoogleFilesByIDs:()=>{}}),u=e=>{let{googleFiles:t,addGoogleFiles:s,fetchGoogleFilesByIDs:r}=(0,a.useContext)(c),n=(0,a.useMemo)(()=>e?t.filter(t=>e.includes(t.id)):[],[t,e]);return(0,a.useEffect)(()=>{e&&r(e)},[r,e]),{googleFiles:n,addGoogleFiles:s}};var h=e=>{let{children:t}=e,[s,n]=(0,a.useState)([]),[u,h]=(0,a.useState)({}),d=(0,a.useRef)([]),m=(0,a.useRef)([]),f=(0,a.useRef)([]),p=(0,a.useCallback)(async e=>{let t=e.filter(e=>!(s.some(t=>t.id===e)||d.current.includes(e)||m.current.includes(e)));if(0!==t.length){d.current=d.current.concat(t);try{let e=await o.listFilesByIDs({google_file_ids:t}),s=e.google_files.map(e=>e.google_file.id);d.current=d.current.filter(e=>!t.includes(e)),m.current=m.current.concat(t.filter(e=>!s.includes(e)));let r=e.google_files.filter(e=>l(e.google_file)).map(e=>e.google_file.id);f.current=f.current.concat(r),n(t=>Array.from(new Set([...t,...e.google_files.map(e=>e.google_file)])))}catch{m.current=m.current.concat(t),d.current=d.current.filter(e=>!t.includes(e))}}},[s]),_=(0,a.useCallback)(e=>{n(t=>t.concat(e));let t=e.map(e=>e.id);f.current=f.current.concat(t)},[]),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(0!==f.current.length)return y.current=new i({callbackFn:async()=>{let e=await o.listFilesPermissionsForUser({google_file_ids:f.current});h(t=>({...t,...e.google_file_idto_permission})),f.current=f.current.filter(t=>!Object.keys(e.google_file_idto_permission).includes(t)),0===f.current.length&&(y.current?.stop(),y.current=null)},intervalMS:1e3,timeoutMS:2e4,onTimeout:()=>{y.current?.stop(),y.current=null}}),y.current.start(),()=>{y.current?.stop(),y.current=null}},[s]);let g=(0,a.useMemo)(()=>s.map(e=>({...e,permission:u[e.id]?.permission??null})),[s,u]);return(0,r.jsx)(c.Provider,{value:{googleFiles:g,addGoogleFiles:_,fetchGoogleFilesByIDs:p},children:t})}},35616:function(e,t,s){"use strict";var r=s(12157),n=s(26165),i=s(92575),a=s(74934);class o{static #e=this.getAvailableRoleOptionsForUser=(e,t)=>e&&t?"Employee"===e.category?["Employee","Guardian","Student"]:"Student"===e.category&&t.ChatAllowStudentInitiateToEmployee||"Guardian"===e.category&&t.ChatAllowGuardianInitiateToEmployee?["Employee"]:[]:[];static #t=this.canUserInitiateChat=(e,t)=>!!e&&!!t&&0!==this.getAvailableRoleOptionsForUser(e,t).length;static #s=this.userIsCreatorOfChat=(e,t)=>e.created_by===t;static #r=this.canUserLeaveChat=(e,t)=>!("Group"!==e.type||this.userIsCreatorOfChat(e,t));static #n=this.userCanEditChat=(e,t)=>!!(e&&"Group"===e.type&&this.userIsCreatorOfChat(e,t));static #i=this.userHasViewed=(e,t)=>{if(!e.latest_message)return!0;let s=e.chat.users.find(e=>e.user_id===t);return!(!s?.viewed_at||r.Z.before(s?.viewed_at,e.latest_message?.created_at))};static #a=this.getChatEventText=(e,t,s,r)=>{let o;if(!s)return"";let l=r[t.user_id],c=l?.id===s.id,u=t.event_user_ids??[],h=(0,n.nY)(u.map(e=>r[e]).filter(a.Z.isNotNullish)).reduce((e,t,s)=>`${e}${0!==s?", ":""}${t.first_name} ${t.last_name}`,""),d=t.rich_text_content.content,m=c?e(i.ZT.Common.You):l?`${l.first_name} ${l.last_name.charAt(0)}`:"AddedUsers"===d?e(i.ZT.Common.Meitner):"LeftChat"===d?e(i.ZT.Common.Someone):"";switch(d){case"LeftChat":o=i.ZT.Chat.Announcements.Leftchat({name:m});break;case"AddedUsers":o=i.ZT.Chat.Announcements.Addedusers({name:m,affected:h});break;case"ChangedImg":o=i.ZT.Chat.Announcements.Changedimg({name:m});break;case"ChangedName":o=i.ZT.Chat.Announcements.Changedname({name:m});break;case"CreatedChat":o=i.ZT.Chat.Announcements.Createdchat({name:m});break;case"DeletedUsers":o=i.ZT.Chat.Announcements.Deletedusers({name:m,affected:h});break;case"DeletedMessage":o=i.ZT.Chat.Announcements.Deletedmessage({name:m})}return e(o)};static #o=this.getDisplayTextForChatItem=e=>{let{t,chat:s,currentUser:r,users:n}=e;if(!r)return"";if(!s.latest_message)return t(i.ZT.Chat.NoMessages);let a=s.latest_message.rich_text_content.text,o=n[s.latest_message.user_id]?.first_name;return s.latest_message?.is_event?this.getChatEventText(t,s.latest_message,r,n):s.latest_message?.files?.length&&!s.latest_message.rich_text_content.text?t(s.latest_message.user_id===r.id?i.ZT.Chat.YouSentFile:i.ZT.Chat.UserSentFile({user:o??""})):s.latest_message.user_id===r.id?`${t(i.ZT.Common.You)}: ${a}`:o&&("Group"===s.chat.type||"Synced"===s.chat.type)?`${o}: ${a}`:a};static #l=this.getUsers=e=>e?.users?.filter(e=>!e.left_chat)??[];static #c=this.getName=(e,t,s,r)=>{let i;if(!e||!t)return"";if(""!==e.name)return e.name;if("Synced"===e.type)return r?.title??"";let o=this.getUsers(e),l=o.map(e=>e.user_id);o.length>1&&(l=l.filter(e=>e!==t.id));let c=(0,n.nY)(l.map(e=>s[e]).filter(a.Z.isNotNullish)).filter(e=>e.first_name);return"Group"===e.type?c.reduce((e,t,s)=>`${e}${0!==s?", ":""}${t.first_name} ${t.last_name[0]??""}`,""):(i=c.length>1?c.find(e=>e.id!==t.id):c[0])?`${i.first_name} ${i.last_name}`:""}}t.Z=o},79843:function(e,t,s){"use strict";var r=s(27573),n=s(88324),i=s(66221),a=s(21009),o=s(26165);t.Z=e=>{let{chat:t,name:s,size:l}=e,c=(0,o.LM)(e=>e.userPreviews),{userID:u}=(0,a.Tt)();if("Private"===t.type){let e=t.users?.find(e=>e.user_id!==u)??t.users[0],s=e?c[e.user_id]:void 0;return(0,r.jsx)(o.Yt,{user:s,size:l})}return(0,r.jsx)(n.Z,{src:t.image_file_url,alt:s,size:l,children:(0,r.jsx)(i.Z,{variant:"solid",fontAwesomeIcon:"users"})})}},84354:function(e,t,s){"use strict";var r=s(27573),n=s(88406),i=s.n(n);t.Z=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:i().chatMain,children:t})}},96302:function(e,t,s){"use strict";var r=s(27573),n=s(65391),i=s.n(n);t.Z=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:i().chatWrapper,children:t})}},57039:function(e,t,s){"use strict";var r=s(27573),n=s(49660),i=s(42274),a=s(44135),o=s(35176),l=s(26165),c=s(79162),u=s(92575),h=s(11815),d=s(35616),m=s(7549),f=s.n(m);let p=e=>{let{variant:t,input:s,setInput:m}=e,{t:p}=(0,u.T_)(),_=(0,h.dJ)(),{currentUser:y}=(0,l.xJ)(),{settings:g}=(0,o.rV)(),v=_.has("message_feed_send"),b=d.Z.canUserInitiateChat(y,g);return(0,r.jsxs)("div",{className:f().searchWrapper,children:[(0,r.jsx)(n.Z,{variant:"filled","aria-label":p(u.ZT.Common.Search),placeholder:p(u.ZT.Common.Search),className:f().searchInput,required:!1,value:s,onChangeValue:m,autoCorrect:"none",autoComplete:"none",startDecorator:(0,r.jsx)(c.J,{name:"icon-magnifying-glass-16"})}),("chat"===t?b:v)?(0,r.jsx)(i.Z,{title:p(u.ZT.Common.Create),children:(0,r.jsx)(a.Z,{"aria-label":p(u.ZT.Common.Create),variant:"primary",href:"new",children:(0,r.jsx)(c.J,{name:"icon-plus-24"})})}):void 0]})};t.Z=e=>{let{variant:t,input:s,setInput:n}=e;return(0,r.jsx)(p,{variant:t,input:s,setInput:n})}},70443:function(e,t,s){"use strict";var r=s(69203),n=s(23618);t.Z=()=>{let e=(0,r.Z)("(max-width: 768px)"),t=(0,n.bS)({path:"/communication/chat",end:!0}),s=(0,n.bS)({path:"/communication/feed",end:!0}),i=!!t||!!s||!e;return{isMobile:e,shouldDisplayList:i,shouldDisplayNavigation:i}}},94648:function(e,t,s){"use strict";s.d(t,{vc:function(){return Q},ZP:function(){return B},mx:function(){return H},PY:function(){return $}});var r=s(27573),n=s(24297),i=s(83499),a=s(12157),o=s(21009),l=s(4172),c=s(74934),u=s(35725),h=s(7653),d=s(23618),m=s(56607),f=s(839),p=s(96669),_=s(76863),y=s(26165),g=s(92575),v=s(35616),b=s(79704),C=s(2393),S=s(59245),x=s(45531),w=s.n(x),Z=s(79843),T=s(23870),j=s.n(T),I=e=>{let{chat:t,syncedGroup:s}=e,{userID:n}=(0,o.Tt)(),{currentUser:i}=(0,y.xJ)(),l=(0,y.LM)(e=>e.userPreviews),{t:c}=(0,g.T_)(),u=v.Z.getName(t.chat,i,l,s),h=v.Z.getDisplayTextForChatItem({t:c,chat:t,currentUser:i,users:l}),d=t.latest_message?.created_at,m=v.Z.userHasViewed(t,n);return(0,r.jsxs)(b.Z,{href:`/communication/chat/${t.chat.id}`,className:w()(j().chatItem,{[j()["chatItem--unread"]]:!m}),children:[(0,r.jsx)(Z.Z,{chat:t.chat,name:u,size:"md"}),(0,r.jsxs)("div",{className:j().chatItem__content,children:[(0,r.jsxs)("div",{className:j().chatItem__row,children:[(0,r.jsx)("p",{children:u}),d?(0,r.jsx)("p",{className:S.X.Label_XSS_Regular,children:a.Z.formatHelper(d,"dd'/'MM")}):null]}),(0,r.jsxs)("div",{className:j().chatItem__row,children:[(0,r.jsx)("p",{className:S.X.Label_XS_Regular,children:h}),m?t.latest_message?.id?(0,r.jsx)("p",{className:S.X.Label_XS_Regular,children:a.Z.getISOHour(d)}):null:(0,r.jsx)(C.Z,{variant:"primary-darkest",count:t.unread_message_count})]})]})]})},D=s(57039),P=s(51280),k=s.n(P),E=e=>{let{loading:t,chats:s,groups:n,onScrollBottom:i}=e,{t:a}=(0,g.T_)(),{currentUser:o}=(0,y.xJ)(),l=(0,h.useMemo)(()=>s.flatMap(e=>e.chat.users.map(e=>e.user_id)),[s]),c=(0,y.b1)(l),[u,d]=(0,h.useState)(""),m=s.filter(e=>""===u||!!v.Z.getName(e.chat,o,c,n[e.chat.synced_group_id??""]).toLowerCase().includes(u.toLowerCase())).sort((e,t)=>(t.latest_message?.created_at??0)-(e.latest_message?.created_at??0));return(0,r.jsxs)(f.Z,{className:k().chatList,onScrollBottom:i,children:[(0,r.jsx)(D.Z,{variant:"chat",input:u,setInput:d}),t?(0,r.jsx)(p.Z,{justify:"center",style:{marginBlockStart:16},children:(0,r.jsx)(_.Z,{useMinimumTime:!0,size:40})}):0===m.length?(0,r.jsx)("p",{style:{paddingTop:30,textAlign:"center"},children:a(g.ZT.Chat.NoChats)}):m.map(e=>(0,r.jsx)(I,{chat:e,syncedGroup:n[e.chat.synced_group_id??""]},e.chat.id))]})},A=s(84354),O=s(96302),M=s(70443),N=s(51236);let q=new n.al,F=new i.KD,L="PUSH_EVENT";class Q{static #e=this.subscribe=e=>{document.addEventListener(L,e)};static #t=this.unsubscribe=e=>{document.removeEventListener(L,e)};static #s=this.dispatch=e=>{let t=new CustomEvent(L,{detail:e});document.dispatchEvent(t)}}let R=async e=>await q.listChats({pagination:{size:25,page:e}}),U=()=>{let[e,t]=(0,h.useState)(1),[s,r]=(0,h.useState)(!0),[n,i]=(0,h.useState)(!0),[a,o]=(0,h.useReducer)(N.Z,{chats:[]}),[l,u]=(0,h.useState)({});(0,h.useEffect)(()=>{R(e).then(t=>{1===e?o({type:N.t.SetChats,chats:t.chats}):o({type:N.t.AddChats,chats:t.chats}),r(25*e<t.pagination_response.total_count)}).finally(()=>{i(!1)})},[e]);let d=(0,h.useMemo)(()=>a.chats.map(e=>e.chat.synced_group_id).filter(c.Z.isNotNullish),[a.chats]);return(0,h.useEffect)(()=>{0!==d.length&&F.listUserGroupsByIDs({ids:d}).then(e=>{u(c.Z.convertToRecord(e.user_groups,"id"))})},[d]),{chats:a.chats,groups:l,loading:n,hasNextPage:s,fetchNextPage:()=>{t(e=>e+1)},dispatch:o}},V=(0,h.createContext)({chats:[],dispatch:()=>{}}),H=()=>(0,h.useContext)(V),z=(0,h.createContext)({groups:{}}),$=()=>(0,h.useContext)(z);var B=()=>{let{userID:e}=(0,o.Tt)();(0,l.fb)({path:"/communication/chat",label:(0,u.Z)("Chatt")});let{chats:t,groups:s,loading:n,hasNextPage:i,fetchNextPage:c,dispatch:f}=U(),{isMobile:p,shouldDisplayNavigation:_,shouldDisplayList:y}=(0,M.Z)(),g=(t,s)=>{f({type:N.t.SetChat,chatID:t.chat_id,chat:{latest_message:t,...s?{chat:s}:{}}}),t.created_by&&f({type:N.t.SetViewedAt,chatID:t.chat_id,userID:t.created_by,viewedAt:a.Z.getUTC()}),t.created_by!==e&&(window.location.pathname.includes(t.chat_id)?(q.updateChatUserViewedAt({chat_id:t.chat_id,viewed_at:a.Z.getUTC()}),f({type:N.t.ReadChat,chatID:t.chat_id,userID:e})):f({type:N.t.IncrementUnreadCount,chatID:t.chat_id}))},v=e=>{let{detail:t}=e;"read_receipt"in t?f({type:N.t.SetViewedAt,chatID:t.read_receipt.chat_id,userID:t.read_receipt.reader_user_id,viewedAt:t.read_receipt.viewed_at}):"message"in t?g(t.message):"event"in t&&g(t.event,t.chat)};return(0,h.useEffect)(()=>{Q.subscribe(v)},[]),(0,r.jsx)(V.Provider,{value:{chats:t,dispatch:f},children:(0,r.jsx)(z.Provider,{value:{groups:s},children:(0,r.jsx)(l.T3,{fullScreen:!0,disableScrolling:!0,enableMobileSubbar:_,disableMobileBottombar:!_,children:(0,r.jsxs)(O.Z,{children:[y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E,{loading:n,chats:t,groups:s,onScrollBottom:()=>{i&&c()}}),p?null:(0,r.jsx)(A.Z,{children:(0,r.jsx)(d.j3,{})})]}):(0,r.jsx)(A.Z,{children:(0,r.jsx)(d.j3,{})}),(0,r.jsx)(m.Z,{})]})})})})}},51236:function(e,t,s){"use strict";s.d(t,{t:function(){return n}});var r,n,i=s(12157);(r=n||(n={})).SetChats="SetChats",r.AddChats="AddChats",r.DeleteChat="DeleteChat",r.SetChat="SetChat",r.ReadChat="ReadChat",r.SetViewedAt="SetViewedAt",r.IncrementUnreadCount="IncrementUnreadCount",r.SendMessage="SendMessage",t.Z=(e,t)=>{switch(t.type){case"SetChats":return{...e,chats:t.chats};case"AddChats":return{...e,chats:e.chats.concat(t.chats)};case"DeleteChat":return{...e,chats:e.chats.filter(e=>e.chat.id!==t.chatID)};case"SetChat":{if(e.chats.find(e=>e.chat.id===t.chatID))return{...e,chats:e.chats.map(e=>e.chat.id===t.chatID?{...e,...t.chat}:e)};let s=t.chat.chat;if(!s)return e;return{...e,chats:e.chats.concat({chat:s,latest_message:null,unread_message_count:0})}}case"ReadChat":return{...e,chats:e.chats.map(e=>e.chat.id===t.chatID?{...e,chat:{...e.chat,users:e.chat.users.map(e=>e.user_id===t.userID?{...e,viewed_at:i.Z.getUTC()}:e)},unread_message_count:0}:e)};case"SetViewedAt":return{...e,chats:e.chats.map(e=>e.chat.id===t.chatID?{...e,chat:{...e.chat,users:e.chat.users.map(e=>e.user_id===t.userID?{...e,viewed_at:t.viewedAt}:e)}}:e)};case"IncrementUnreadCount":return{...e,chats:e.chats.map(e=>e.chat.id===t.chatID?{...e,unread_message_count:e.unread_message_count+1}:e)};case"SendMessage":return{...e,chats:e.chats.map(e=>e.chat.id===t.chatID?{...e,chat:{...e.chat,users:e.chat.users.map(e=>e.user_id===t.userID?{...e,viewed_at:i.Z.getUTC(t.message.created_at)}:e)},latest_message:t.message}:e)}}}},38493:function(e,t,s){!function(t){"use strict";function s(){this.data={}}function r(){this.listeners=new s}function n(e){setTimeout(function(){throw e},0)}function i(e){this.type=e,this.target=null}function a(e,t){i.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}s.prototype={get:function(e){return this.data[e+"~"]},set:function(e,t){this.data[e+"~"]=t},delete:function(e){delete this.data[e+"~"]}},r.prototype={dispatchEvent:function(e){e.target=this;var t=String(e.type),s=this.listeners.get(t);if(s)for(var r=s.length,i=-1,a=null;++i<r;){a=s[i];try{a.call(this,e)}catch(e){n(e)}}},addEventListener:function(e,t){e=String(e);var s=this.listeners,r=s.get(e);r||(r=[],s.set(e,r));for(var n=r.length;--n>=0;)if(r[n]===t)return;r.push(t)},removeEventListener:function(e,t){e=String(e);var s=this.listeners,r=s.get(e);if(r){for(var n=r.length,i=[],a=-1;++a<n;)r[a]!==t&&i.push(r[a]);0===i.length?s.delete(e):s.set(e,i)}}},a.prototype=i.prototype;var o=t.XMLHttpRequest,l=t.XDomainRequest,c=!!(o&&void 0!==new o().withCredentials),u=c?o:l,h=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i;function d(e,t){var s=Number(e)||t;return s<1e3?1e3:s>18e6?18e6:s}function m(e,t,s){try{"function"==typeof t&&t.call(e,s)}catch(e){n(e)}}function f(e,s){e=String(e);var n=!!(c&&s&&s.withCredentials),o=d(s?s.retry:NaN,1e3),l=d(s?s.heartbeatTimeout:NaN,45e3),f=s&&s.lastEventId&&String(s.lastEventId)||"",p=this,_=o,y=!1,g=new u,v=0,b=0,C=0,S=-1,x=[],w="",Z=s.headers,T="",j=null,I=s.body,D=s.method,P=4,k="",E="";function A(e){var t=(1===S||0===S)&&g.responseText||"",s=null,r=!1;if(0===S){var n=0,u="",b="";if(c)try{n=Number(g.status||0),u=String(g.statusText||""),b=String(g.getResponseHeader("Content-Type")||"")}catch(e){n=0}else n=200,b=g.contentType;if(200===n&&h.test(b)){if(S=1,y=!0,_=o,p.readyState=1,s=new i("open"),p.dispatchEvent(s),m(p,p.onopen,s),2===S)return}else if(0!==n){var Z="";Z=200!==n?"EventSource's response has a status "+n+" "+u.replace(/\s+/g," ")+" that is not 200. Aborting the connection.":"EventSource's response has a Content-Type specifying an unsupported type: "+b.replace(/\s+/g," ")+". Aborting the connection.",setTimeout(function(){throw Error(Z)}),r=!0}}if(1===S){t.length>C&&(y=!0);for(var I=C-1,D=t.length,A="\n";++I<D;)if(A=t[I],3===P&&"\n"===A)P=4;else if(3===P&&(P=4),"\r"===A||"\n"===A){if("data"===k?x.push(E):"id"===k?w=E:"event"===k?T=E:"retry"===k?_=o=d(E,o):"heartbeatTimeout"===k&&(l=d(E,l),0!==v&&(clearTimeout(v),v=setTimeout(j,l))),E="",k="",4===P){if(0!==x.length&&(f=w,""===T&&(T="message"),s=new a(T,{data:x.join("\n"),lastEventId:w}),p.dispatchEvent(s),"message"===T&&m(p,p.onmessage,s),2===S))return;x.length=0,T=""}P="\r"===A?3:4}else 4===P&&(P=5),5===P?":"===A?P=6:k+=A:6===P?(" "!==A&&(E+=A),P=7):7===P&&(E+=A);C=D}(1===S||0===S)&&(e||r||C>1048576||0===v&&!y)?(S=-1,g.abort(),0!==v&&(clearTimeout(v),v=0),_>16*o&&(_=16*o),_>18e6&&(_=18e6),v=setTimeout(j,_),_=2*_+1,p.readyState=0,s=new i("error"),p.dispatchEvent(s),m(p,p.onerror,s)):0===v&&(y=!1,v=setTimeout(j,l))}function O(){A(!1)}function M(){A(!0)}s=null,c&&(b=setTimeout(function e(){3===g.readyState&&O(),b=setTimeout(e,500)},0)),j=function(){if(v=0,-1!==S){A(!1);return}if(c&&(void 0!==g.sendAsBinary||void 0===g.onloadend)&&t.document&&t.document.readyState&&"complete"!==t.document.readyState){v=setTimeout(j,4);return}if(g.onload=g.onerror=M,c&&(g.onabort=M,g.onreadystatechange=O),g.onprogress=O,y=!1,v=setTimeout(j,l),C=0,S=0,x.length=0,T="",w=f,E="",k="",P=4,g.open(D,e,!0),c){for(let e of(g.withCredentials=n,g.responseType="text",Object.keys(Z)))g.setRequestHeader(e,Z[e]);g.setRequestHeader("Accept","text/event-stream")}g.send(JSON.stringify(I))},r.call(this),this.close=function(){S=2,null!==g&&(g.abort(),g=null),0!==v&&(clearTimeout(v),v=0),0!==b&&(clearTimeout(b),b=0),p.readyState=2},this.url=e,this.readyState=0,this.withCredentials=n,this.onopen=null,this.onmessage=null,this.onerror=null,j()}function p(){this.CONNECTING=0,this.OPEN=1,this.CLOSED=2}p.prototype=r.prototype,f.prototype=new p,p.call(f),e.exports=f}(s(22484))},22484:function(e){var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{if(!__global__)return t();return __global__}finally{delete Object.prototype.__global__}}()},50916:function(e,t,s){"use strict";var r=s(27573),n=s(45531),i=s.n(n),a=s(7653),o=s(43622),l=s.n(o);let c=(0,a.forwardRef)((e,t)=>{let{className:s,fullHeight:n,isLayered:a,children:o,isOpen:c,labelID:u,descriptionID:h,floatingProps:d,style:m}=e;return(0,r.jsx)("div",{...d,ref:t,className:i()(l().bottomSheetPopup,s,{[l()["bottomSheetPopup--open"]]:c,[l()["bottomSheetPopup--fullHeight"]]:n,[l()["bottomSheetPopup--isLayered"]]:a}),style:m,"aria-labelledby":u,"aria-describedby":h,children:o})});t.Z=c},93193:function(e,t,s){"use strict";s.d(t,{Z:function(){return Z}});var r=s(27573),n=s(71539),i=s(7653);let a=(0,i.createContext)({setOpen:()=>{},labelID:"",descriptionID:"",refs:null,context:null,getReferenceProps:()=>({}),getFloatingProps:()=>({})}),o=()=>(0,i.useContext)(a);var l=s(45531),c=s.n(l),u=s(839),h=s(21537),d=s.n(h),m=s(72025),f=s(50916),p=s(46041),_=s.n(p),y=s(7057),g=s.n(y),v=s(92575),b=s(91138),C=s(36475),S=s.n(C),x=s(74028),w=s.n(x),Z=Object.assign(e=>{let{open:t,onOpenChange:s,children:o}=e,[l,c]=(0,i.useState)(!1),u=s??c,{refs:h,context:d}=(0,n.YF)({open:t??l,onOpenChange:u}),m=(0,n.eS)(d),f=(0,n.bQ)(d,{outsidePressEvent:"click"}),p=(0,n.qs)(d),{getFloatingProps:_,getReferenceProps:y}=(0,n.NI)([m,f,p]),g=(0,i.useId)(),v=(0,i.useId)();return(0,r.jsx)(a.Provider,{value:{setOpen:u,labelID:g,descriptionID:v,context:d,refs:h,getFloatingProps:_,getReferenceProps:y},children:o})},{Target:e=>{let{children:t,targetProps:s}=e,{getReferenceProps:r,refs:a}=o(),l=(0,n.qq)([a?.setReference,...t?.props.ref?[t.props.ref]:[]]);return(0,i.cloneElement)(t,{...r(s),ref:l})},Content:e=>{let{children:t,fullHeight:s}=e,{labelID:i,descriptionID:a,context:l,refs:u,getFloatingProps:h}=o();if(!l)throw Error("BottomSheet.Content must be used within a BottomSheet");let{isMounted:d,status:p}=(0,n.hU)(l,{duration:m.t});return d?(0,r.jsx)(n.ll,{children:(0,r.jsx)(n.y0,{lockScroll:!0,className:c()(_().overlay,{[_()["overlay--open"]]:"open"===p}),children:(0,r.jsx)(n.wD,{context:l,children:(0,r.jsx)(f.Z,{ref:u?.setFloating,fullHeight:s,isOpen:"open"===p,labelID:i,descriptionID:a,floatingProps:h(),children:t})})})}):null},Header:e=>{let{closeButtonLabel:t,children:s,onClose:n}=e,{setOpen:i}=o(),{t:a}=(0,v.T_)();return(0,r.jsxs)("div",{className:S().bottomSheet__header,children:[(0,r.jsx)("div",{children:s}),(0,r.jsx)(b.Z,{variant:"tertiary",size:"lg",onClick:()=>{n?n():i(!1)},children:t??a(v.ZT.Common.Cancel)})]})},Title:e=>{let{children:t}=e,{labelID:s}=o();return(0,r.jsx)("p",{className:w().bottomSheet__title,id:s,children:t})},Subtitle:e=>{let{children:t}=e,{descriptionID:s}=o();return(0,r.jsx)("p",{id:s,children:t})},Body:e=>{let{children:t,className:s}=e;return(0,r.jsx)(u.Z,{className:c()(d().bottomSheet__body,s),children:t})},Footer:e=>{let{children:t,className:s}=e;return(0,r.jsx)("div",{className:c()(g().bottomSheet__footer,s),children:t})}})},67014:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(7653),n=e=>{let[t,s]=(0,r.useState)(e?.defaultOpen??!1);return{isOpen:t,open:(0,r.useCallback)(()=>{s(!0)},[]),close:(0,r.useCallback)(t=>{(!e?.onAttemptClose||t?.force||e.onAttemptClose())&&(s(!1),e?.afterClose&&setTimeout(e.afterClose,300))},[e])}}},35992:function(e,t,s){"use strict";var r=s(27573),n=s(59245),i=s(75008),a=s.n(i);t.Z=e=>{let{icon:t,text:s,description:i}=e;return(0,r.jsxs)("div",{className:a().newEmpty,children:[(0,r.jsx)("div",{className:a().newEmpty__iconContainer,children:t}),(0,r.jsx)("p",{className:n.X.Label_SM_Regular,children:s}),i?(0,r.jsx)("p",{className:n.X.Label_XS_Regular,children:i}):null]})}},72025:function(e,t,s){"use strict";s.d(t,{t:function(){return r}});let r=300},46301:function(e,t,s){"use strict";var r=s(27573),n=s(45531),i=s.n(n),a=s(39386),o=s.n(a);t.Z=Object.assign(e=>{let{activeTab:t,onClickTab:s,children:n,className:a}=e;return(0,r.jsx)("nav",{className:i()(o().tabs,a),children:n.map(e=>(0,r.jsxs)("button",{type:"button",className:i()(o().tab,{[o()["tab--active"]]:e.props.value===t}),disabled:e.props.disabled,onClick:()=>{s(e.props.value)},children:[e.props.startDecorator,e.props.label,e.props.endDecorator]},e.props.value))})},{Tab:e=>null})},66339:function(e,t,s){"use strict";var r=s(7653),n=s(23618);t.Z=()=>{let e=(0,n.TH)();return{params:(0,r.useMemo)(()=>{let t=new URLSearchParams(e.search),s=t.keys(),r={};for(let e of s){let s=t.get(e);r={...r,[e]:s}}return r},[e.search])}}},88724:function(e,t){"use strict";var s;(function(e){class t{constructor(e){this.has=e=>!!this.permissions&&!!this.permissions.organization.permissions[e],this.permissions=e}}e.Organization=t;class s{constructor(e,t){this.has=e=>!!(this.permissions&&this.permissions.group.group_ids.includes(this.groupID))&&!!this.permissions.group.permissions[e],this.permissions=e,this.groupID=t}}e.Group=s;class r{constructor(e,t){this.has=e=>!!(this.permissions&&this.permissions.workspace.workspace_ids.includes(this.workspaceID))&&!!this.permissions.workspace.permissions[e],this.permissions=e,this.workspaceID=t}}e.Workspace=r;class n{constructor(e,t){this.has=e=>!!this.permissions&&(this.userID&&this.userID!==this.permissions.user.user_id?this.userID===this.permissions.user_student?.user_id&&!!this.permissions.user_student.permissions[e]:!!this.permissions.user.permissions[e]),this.permissions=e,this.userID=t}}e.User=n})(s||(s={})),t.Z=s},11815:function(e,t,s){"use strict";s.d(t,{Cs:function(){return a},Qe:function(){return o},dJ:function(){return i}});var r=s(88724),n=s(89752);let i=()=>{let e=(0,n.Z)(e=>e.permissions);return new r.Z.Organization(e)},a=e=>{let t=(0,n.Z)(e=>e.permissions);return new r.Z.Group(t,e)},o=e=>{let t=(0,n.Z)(e=>e.permissions);return new r.Z.User(t,e)}},89752:function(e,t,s){"use strict";let r=(0,s(66641).Ue)()(e=>({permissions:void 0,setPermissions:t=>{e({permissions:t})},addWorkspacePermission:t=>{e(e=>e.permissions?{permissions:{...e.permissions,workspace:{...e.permissions.workspace,workspace_ids:e.permissions.workspace.workspace_ids.concat(t)}}}:{})}}));t.Z=r},94730:function(e,t,s){"use strict";var r=s(27573),n=s(45531),i=s.n(n),a=s(7653),o=s(20867),l=s.n(o);let c=()=>Math.floor(130*Math.random())+70,u=e=>{let{width:t=c(),height:s=10,borderRadius:n=10,style:a,className:o}=e;return(0,r.jsx)("div",{className:i()(l().skeleton,o),style:{...a,inlineSize:t,blockSize:s,borderRadius:n}})},h=e=>{let{width:t=50,height:s=50,borderRadius:n=0,style:a,className:o}=e;return(0,r.jsx)("div",{className:i()(l().skeleton,o),style:{...a,inlineSize:t,blockSize:s,borderRadius:n}})},d=e=>{let{width:t=50,height:s=50,borderRadius:n=1e3,style:a,className:o}=e;return(0,r.jsx)("div",{className:i()(l().skeleton,o),style:{...a,inlineSize:t,blockSize:s,borderRadius:n}})};t.Z=e=>{let{width:t,height:s,borderRadius:n,variant:i="text",style:o,index:l,multiplier:c=.06,useMinimumTime:m=!0,minimumTime:f=250}=e,[p,_]=(0,a.useState)(!m);return(0,a.useEffect)(()=>{if(!m)return;_(!1);let e=setTimeout(()=>{_(!0)},f);return()=>{clearTimeout(e)}},[f,m]),(0,r.jsx)("rect"===i?h:"circle"===i?d:u,{width:t,height:s,borderRadius:n,style:{...o,animationDelay:`${String(l?l*c:0)}s`,animation:p?void 0:"none"}})}},83497:function(e,t,s){"use strict";s.d(t,{ReactQueryProvider:function(){return b}});var r=s(27573),n=s(63583),i=s(19319),a=s(24392),o=s(17307),l=class extends o.l{constructor(e={}){super(),this.config=e,this.#u=new Map}#u;build(e,t,s){let r=t.queryKey,a=t.queryHash??(0,n.Rm)(r,t),o=this.get(a);return o||(o=new i.A({cache:this,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){this.#u.has(e.queryHash)||(this.#u.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){let t=this.#u.get(e.queryHash);t&&(e.destroy(),t===e&&this.#u.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){a.V.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#u.get(e)}getAll(){return[...this.#u.values()]}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n._x)(t,e))}findAll(e={}){let t=this.getAll();return Object.keys(e).length>0?t.filter(t=>(0,n._x)(e,t)):t}notify(e){a.V.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){a.V.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){a.V.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},c=s(37927),u=class extends o.l{constructor(e={}){super(),this.config=e,this.#h=new Map,this.#d=Date.now()}#h;#d;build(e,t,s){let r=new c.m({mutationCache:this,mutationId:++this.#d,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){let t=h(e),s=this.#h.get(t)??[];s.push(e),this.#h.set(t,s),this.notify({type:"added",mutation:e})}remove(e){let t=h(e);if(this.#h.has(t)){let s=this.#h.get(t)?.filter(t=>t!==e);s&&(0===s.length?this.#h.delete(t):this.#h.set(t,s))}this.notify({type:"removed",mutation:e})}canRun(e){let t=this.#h.get(h(e))?.find(e=>"pending"===e.state.status);return!t||t===e}runNext(e){let t=this.#h.get(h(e))?.find(t=>t!==e&&t.state.isPaused);return t?.continue()??Promise.resolve()}clear(){a.V.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#h.values()].flat()}find(e){let t={exact:!0,...e};return this.getAll().find(e=>(0,n.X7)(t,e))}findAll(e={}){return this.getAll().filter(t=>(0,n.X7)(e,t))}notify(e){a.V.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){let e=this.getAll().filter(e=>e.state.isPaused);return a.V.batch(()=>Promise.all(e.map(e=>e.continue().catch(n.ZT))))}};function h(e){return e.options.scope?.id??String(e.mutationId)}var d=s(73452),m=s(10335),f=s(22051),p=class{#m;#f;#p;#_;#y;#g;#v;#b;constructor(e={}){this.#m=e.queryCache||new l,this.#f=e.mutationCache||new u,this.#p=e.defaultOptions||{},this.#_=new Map,this.#y=new Map,this.#g=0}mount(){this.#g++,1===this.#g&&(this.#v=d.j.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#m.onFocus())}),this.#b=m.N.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#m.onOnline())}))}unmount(){this.#g--,0===this.#g&&(this.#v?.(),this.#v=void 0,this.#b?.(),this.#b=void 0)}isFetching(e){return this.#m.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#f.findAll({...e,status:"pending"}).length}getQueryData(e){let t=this.defaultQueryOptions({queryKey:e});return this.#m.get(t.queryHash)?.state.data}ensureQueryData(e){let t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{let s=this.defaultQueryOptions(e),r=this.#m.build(this,s);return e.revalidateIfStale&&r.isStaleByTime((0,n.KC)(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(t)}}getQueriesData(e){return this.#m.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){let r=this.defaultQueryOptions({queryKey:e}),i=this.#m.get(r.queryHash),a=i?.state.data,o=(0,n.SE)(t,a);if(void 0!==o)return this.#m.build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return a.V.batch(()=>this.#m.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){let t=this.defaultQueryOptions({queryKey:e});return this.#m.get(t.queryHash)?.state}removeQueries(e){let t=this.#m;a.V.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){let s=this.#m,r={type:"active",...e};return a.V.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){let s={revert:!0,...t};return Promise.all(a.V.batch(()=>this.#m.findAll(e).map(e=>e.cancel(s)))).then(n.ZT).catch(n.ZT)}invalidateQueries(e={},t={}){return a.V.batch(()=>{if(this.#m.findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();let s={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(s,t)})}refetchQueries(e={},t){let s={...t,cancelRefetch:t?.cancelRefetch??!0};return Promise.all(a.V.batch(()=>this.#m.findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,s);return s.throwOnError||(t=t.catch(n.ZT)),"paused"===e.state.fetchStatus?Promise.resolve():t}))).then(n.ZT)}fetchQuery(e){let t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);let s=this.#m.build(this,t);return s.isStaleByTime((0,n.KC)(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(n.ZT).catch(n.ZT)}fetchInfiniteQuery(e){return e.behavior=(0,f.Gm)(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(n.ZT).catch(n.ZT)}ensureInfiniteQueryData(e){return e.behavior=(0,f.Gm)(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return m.N.isOnline()?this.#f.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#m}getMutationCache(){return this.#f}getDefaultOptions(){return this.#p}setDefaultOptions(e){this.#p=e}setQueryDefaults(e,t){this.#_.set((0,n.Ym)(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){let t=[...this.#_.values()],s={};return t.forEach(t=>{(0,n.to)(e,t.queryKey)&&(s={...s,...t.defaultOptions})}),s}setMutationDefaults(e,t){this.#y.set((0,n.Ym)(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){let t=[...this.#y.values()],s={};return t.forEach(t=>{(0,n.to)(e,t.mutationKey)&&(s={...s,...t.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;let t={...this.#p.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=(0,n.Rm)(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===n.CN&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#p.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#m.clear(),this.#f.clear()}},_=s(26821),y=function(){return null},g=e=>{let{disabled:t}=e;return t?null:(0,r.jsx)(y,{initialIsOpen:!1})};let v=new p({defaultOptions:{queries:{retry:!1,refetchOnWindowFocus:!1}}});var b=e=>{let{children:t}=e;return(0,r.jsxs)(_.aH,{client:v,children:[(0,r.jsx)(g,{disabled:!0}),t]})}},15709:function(e,t,s){"use strict";s.d(t,{Y:function(){return i}});var r,n,i,a=s(36448),o=s(38556),l=s(40785);(r=i||(i={})).initialize=e=>{l.Z.isProduction&&a.S1(o.D.AMPLITUDE_API_KEY,e,{serverZone:"EU",defaultTracking:{sessions:!0,pageViews:!0,formInteractions:!0,fileDownloads:!0},serverUrl:"https://amplitude.meitner.se"})},r.trackEvent=(e,t)=>{l.Z.isProduction&&a.j(e,t)},(n=r.Event||(r.Event={})).StudentClassChanged="ADMIN: student class changed",n.AssignmentCreated="LMS: assignment created",n.ChatCreated="LMS: chat created",n.NoteCreated="LMS: note created",n.MailSent="LMS: mail sent",n.PlatformPostCreated="LMS: platform post created",n.AbsenceCreatedEmployee="LMS: absence created employee",n.AbsenceCreatedGuardian="LMS: absence created guardian",n.AbsenceCreatedStudent="LMS: absence created student",n.OnboardingComplete="LMS: onboarding complete",n.SpecificCaretimeChanged="LMS: specific caretime changed",n.OrdinaryCaretimeChanged="LMS: ordinary caretime changed",n.SchedulePrinted="LMS: schedule printed",n.ScheduleDownloaded="LMS: schedule downloaded",n.FormSubmitted="LMS: form submitted",n.Error="error",n.Click="click",n.FormData="form data",n.ClicksOnTaskFromHub="LMS: task list, clicks on task from hub",n.ClicksOnTaskFromView="LMS: task list, clicks on task from view",n.ShowAll="LMS: clicks on Show All button",n.CriterionSavedResultFromOverview="LMS: criterion, saved result from overview",n.CriterionSavedResultFromStudentView="LMS: criterion, saved result from student view"},6974:function(){},644:function(){},41809:function(){},44720:function(){},61898:function(){},91178:function(){},63937:function(){},76114:function(){},23870:function(e){e.exports={chatItem:"style_chatItem__8Z_ot","chatItem--unread":"style_chatItem--unread__t6Ezt",chatItem__content:"style_chatItem__content__VTTMK",chatItem__row:"style_chatItem__row__2onJ_"}},51280:function(e){e.exports={chatList:"style_chatList__PpOSA"}},88406:function(e){e.exports={chatMain:"style_chatMain__iRcDU"}},65391:function(e){e.exports={chatWrapper:"style_chatWrapper__yzXp6"}},7549:function(e){e.exports={searchWrapper:"style_searchWrapper__rJA_u",searchInput:"style_searchInput__Pub6s"}},21537:function(e){e.exports={bottomSheet__body:"style_bottomSheet__body__Ey4dV"}},46041:function(e){e.exports={overlay:"style_overlay__D46mj","overlay--open":"style_overlay--open__XsF9C"}},7057:function(e){e.exports={bottomSheet__footer:"style_bottomSheet__footer__ikScY"}},36475:function(e){e.exports={bottomSheet__header:"style_bottomSheet__header__OomfS"}},43622:function(e){e.exports={bottomSheetPopup:"style_bottomSheetPopup__CnqF0","bottomSheetPopup--fullHeight":"style_bottomSheetPopup--fullHeight__AYzdO","bottomSheetPopup--isLayered":"style_bottomSheetPopup--isLayered__F8yFB","bottomSheetPopup--open":"style_bottomSheetPopup--open__lqkfk"}},74028:function(e){e.exports={bottomSheet__title:"style_bottomSheet__title__7COMg"}},75008:function(e){e.exports={newEmpty:"style_newEmpty__ASiQZ",newEmpty__iconContainer:"style_newEmpty__iconContainer__JggVF"}},39386:function(e){e.exports={tabs:"style_tabs__ib_89",tab:"style_tab__01s9D","tab--active":"style_tab--active__31we_"}},20867:function(e){e.exports={skeleton:"style_skeleton__68ZKV"}}},function(e){e.O(0,[4031,4563,879,9383,2639,9230,9407,4449,21,3412,2920,2822,9267,9262,1339,6709,2747,9730,3436,8521,433,5779,6809,8854,3327,9954,3076,3514,8224,3694,1515,7078,1844,6825,9656,4126,8369,6248,9237,9498,2599,2983,9666,8370,9049,6379,684,7642,5566,3402,1949,6118,1809,9898,4162,5822,994,6281,4488,3657,7468,5584,9533,6448,7254,2592,2053,42,2142,6165,9646,4172,5176,856,5898,1293,3829,560],function(){return e(e.s=2009)}),_N_E=e.O()}]);